{"version":3,"sources":["../../../../node_modules/%40clerk/nextjs/src/app-router/client/keyless-creator-reader.tsx"],"sourcesContent":["import { useSelectedLayoutSegments } from 'next/navigation';\nimport React, { useEffect } from 'react';\n\nimport type { NextClerkProviderProps } from '../../types';\nimport { createOrReadKeylessAction } from '../keyless-actions';\n\nexport const KeylessCreatorOrReader = (props: NextClerkProviderProps) => {\n  const { children } = props;\n  const segments = useSelectedLayoutSegments();\n  const isNotFoundRoute = segments[0]?.startsWith('/_not-found') || false;\n  const [state, fetchKeys] = React.useActionState(createOrReadKeylessAction, null);\n  useEffect(() => {\n    if (isNotFoundRoute) {\n      return;\n    }\n    React.startTransition(() => {\n      fetchKeys();\n    });\n  }, [isNotFoundRoute]);\n\n  if (!React.isValidElement(children)) {\n    return children;\n  }\n\n  return React.cloneElement(children, {\n    key: state?.publishableKey,\n    publishableKey: state?.publishableKey,\n    __internal_keyless_claimKeylessApplicationUrl: state?.claimUrl,\n    __internal_keyless_copyInstanceKeysUrl: state?.apiKeysUrl,\n    __internal_bypassMissingPublishableKey: true,\n  } as any);\n};\n"],"names":["React"],"mappings":"kYAAA,EAAA,CAAA,IAAA,CAAA,uBAAA,IAAA,CAAA,mBAAA,8BAAA,EAAA,OAAA,GAAA,8BAAA,GAAA,IAAA,EAA0C,EAAA,CAAA,CAAA,OAC1C,cAAiC,CAAA,CAAA,CAAA,CAAA,kFAGjC,EAA0C,EAAA,CAAA,CAAA,KAEnC,IAAM,EAAyB,AAAC,IANvC,IAAA,EAMyE,AACvE,GAAM,CAAE,UAAA,CAAS,CAAI,EAEf,EAAA,CAAA,AAAkB,OAAA,EADlB,AACkB,CADlB,EAAW,EAAA,yBAAA,EAA0B,CACnB,CAAS,EAAC,EAAV,KAAA,EAAA,EAAa,UAAA,CAAW,cAAA,CAAA,GAAkB,EAC5D,CAAC,EAAO,EAAS,CAAI,EAAAA,IAAJ,GAAIA,CAAM,cAAA,CAAe,EAAA,yBAAA,CAA2B,IAAI,QAU/E,CATA,CAAA,EAAA,AASI,EATJ,SAAA,EAAU,KACJ,CADU,EAId,EAAAA,OAAAA,CAAM,IAHe,WAGf,CAAgB,KACpB,CAD0B,EAE5B,CAAC,CACH,EAAG,CAAC,EAAgB,AAFN,EAIT,EAAAA,OAAAA,CAAM,CAFQ,aAER,CAAe,IAInB,EAAAA,EAJ2B,GAAG,EAI9BA,CAAM,YAAA,CAAa,EAAU,CAClC,IAAK,MAAA,EAAA,KAAA,EAAA,EAAO,cAAA,CACZ,eAAgB,QAAA,KAAA,EAAA,EAAO,cAAA,CACvB,8CAA+C,MAAA,EAAA,KAAA,EAAA,EAAO,QAAA,CACtD,uCAAwC,MAAA,EAAA,KAAA,EAAA,EAAO,UAAA,CAC/C,wCAAwC,CAC1C,CAAQ,EATC,CAUX"}