module.exports=[2721,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(11241);var e=a.i(96373),f=a.i(1322),g=a.i(38246),h=a.i(49815);function i({showAfterSections:a=2,completedSections:d=0,dismissable:e=!0}){let{isSignedIn:f,isLoaded:g}=(0,h.useUser)(),[i,j]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{let a=localStorage.getItem("saveProgressPromptDismissed");if(a){let b=parseInt(a);Date.now()-b<864e5&&j(!0)}},[]),!g||f||d<a||i)?null:(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-lg p-4 mb-6 shadow-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-4",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"w-8 h-8 text-white/90",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-white font-semibold",children:"Save Your Progress"}),(0,b.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Create a free account to save your answers and access your estate plan from any device."}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mt-3",children:[(0,b.jsx)(h.SignUpButton,{mode:"modal",children:(0,b.jsx)("button",{className:"px-4 py-2 bg-white text-blue-600 rounded-lg text-sm font-medium hover:bg-blue-50 transition-colors",children:"Create Free Account"})}),e&&(0,b.jsx)("button",{onClick:()=>{j(!0),localStorage.setItem("saveProgressPromptDismissed",Date.now().toString())},className:"text-white/70 hover:text-white text-sm transition-colors",children:"Maybe later"})]})]})]})})}var j=a.i(4720),k=a.i(70106);let l=(0,k.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var m=a.i(33441),n=a.i(50522),o=a.i(41710);let p=(0,k.default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);var q=a.i(67453);let r=(0,k.default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.i(64339);var s=a.i(71767);function t(){let a=(0,d.useRouter)(),h=(0,d.useSearchParams)(),k=h.get("planId"),t="true"===h.get("complete"),[u,v]=(0,c.useState)(!1),w=(0,e.useMutation)(f.api.estatePlanning.createEstatePlan),x=(0,e.useQuery)(f.api.queries.getEstatePlan,k?{estatePlanId:k}:"skip"),y=(0,e.useQuery)(f.api.queries.getIntakeProgress,k?{estatePlanId:k}:"skip"),z=(0,e.useQuery)(f.api.extractedData.getExtractedData,k?{estatePlanId:k}:"skip"),A=(0,e.useQuery)(f.api.uploadedDocuments.getUploadedDocuments,k?{estatePlanId:k}:"skip"),B=z&&z.length>0,C=A&&A.length>0,D=async()=>{v(!0);try{let b=`session_${Date.now()}_${Math.random().toString(36).substring(7)}`,c=await w({sessionId:b,name:"My Estate Plan"});localStorage.setItem("estatePlanSessionId",b),localStorage.setItem("estatePlanId",c),a.push(`/intake/upload?planId=${c}`)}catch(a){console.error("Failed to create estate plan:",a),v(!1)}},E=async()=>{v(!0);try{let b=`session_${Date.now()}_${Math.random().toString(36).substring(7)}`,c=await w({sessionId:b,name:"My Estate Plan"});localStorage.setItem("estatePlanSessionId",b),localStorage.setItem("estatePlanId",c),a.push(`/intake/personal?planId=${c}`)}catch(a){console.error("Failed to create estate plan:",a),v(!1)}};if((0,c.useEffect)(()=>{if(!k){let b=localStorage.getItem("estatePlanId");b&&a.replace(`/intake?planId=${b}`)}},[k,a]),t&&k)return(0,b.jsxs)("div",{className:"max-w-xl mx-auto text-center space-y-6",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center mx-auto bg-[var(--success-muted)]",children:(0,b.jsx)(m.Check,{className:"w-8 h-8 text-[var(--success)]"})}),(0,b.jsx)("h1",{className:"text-section text-[var(--text-heading)]",children:"Intake Complete"}),(0,b.jsx)("p",{className:"text-[var(--text-muted)]",children:"You've provided all the information we need. Let's analyze your estate planning situation."}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,b.jsx)(g.default,{href:`/analysis/${k}`,children:(0,b.jsx)(s.Button,{variant:"primary",children:"Run Gap Analysis"})}),(0,b.jsx)(g.default,{href:`/intake/personal?planId=${k}`,children:(0,b.jsx)(s.Button,{variant:"secondary",children:"Review Answers"})})]})]});if(x&&y){let c=Object.values(y.sections).filter(a=>a.isComplete).length;return(0,b.jsxs)("div",{className:"max-w-xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-section text-[var(--text-heading)]",children:x.name||"Your Estate Plan"}),(0,b.jsx)("p",{className:"text-[var(--text-muted)] mt-1",children:"Continue where you left off"})]}),B&&(0,b.jsx)("div",{className:"bg-[var(--info-muted)] border border-[var(--info)]/20 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center bg-[var(--info)]/10",children:(0,b.jsx)(j.FileText,{className:"w-5 h-5 text-[var(--info)]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-[var(--info)]",children:"Pre-filled data available"}),(0,b.jsxs)("p",{className:"text-sm text-[var(--info)]/80 mt-0.5",children:["Extracted from ",A?.length||0," uploaded document",1!==(A?.length||0)?"s":"","."]})]})]})}),!C&&(0,b.jsx)(g.default,{href:`/intake/upload?planId=${k}`,className:"block bg-white border border-[var(--border)] rounded-xl p-4 hover:border-[var(--accent-purple)] hover:shadow-md transition-all group",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center bg-[var(--accent-muted)]",children:(0,b.jsx)(l,{className:"w-5 h-5 text-[var(--accent-purple)]"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-[var(--text-heading)]",children:"Have existing documents?"}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"Upload to auto-fill your questionnaire"})]}),(0,b.jsx)(n.ChevronRight,{className:"w-5 h-5 text-[var(--text-muted)] group-hover:text-[var(--accent-purple)] group-hover:translate-x-0.5 transition-all"})]})}),(0,b.jsx)(i,{completedSections:c,showAfterSections:2}),(0,b.jsxs)("div",{className:"bg-white border border-[var(--border)] rounded-xl p-5",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("h2",{className:"text-sm font-medium text-[var(--text-heading)]",children:"Progress"}),(0,b.jsxs)("span",{className:"text-xl font-semibold text-[var(--accent-purple)]",children:[y.percentComplete,"%"]})]}),(0,b.jsx)("div",{className:"w-full bg-[var(--off-white)] rounded-full h-2 mb-5",children:(0,b.jsx)("div",{className:"h-2 rounded-full bg-[var(--accent-purple)] transition-all duration-300",style:{width:`${y.percentComplete}%`}})}),(0,b.jsx)("div",{className:"space-y-2",children:Object.entries(y.sections).map(([a,c])=>(0,b.jsxs)(g.default,{href:`/intake/${{personal:"personal",family:"family",assets:"assets",existing_documents:"existing",goals:"goals"}[a]}?planId=${k}`,className:`
                    flex items-center justify-between p-3 rounded-lg transition-all
                    ${c.isComplete?"bg-[var(--success-muted)] hover:bg-[var(--success)]/15":c.exists?"bg-[var(--warning-muted)] hover:bg-[var(--warning)]/15":"bg-[var(--off-white)] hover:bg-[var(--light-gray)]"}
                  `,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`
                        w-5 h-5 rounded-full flex items-center justify-center
                        ${c.isComplete?"bg-[var(--success)]":c.exists?"bg-[var(--warning)]":"border-2 border-[var(--border)]"}
                      `,children:c.isComplete?(0,b.jsx)(m.Check,{className:"w-3 h-3 text-white"}):c.exists?(0,b.jsx)("span",{className:"text-[10px] text-white font-bold",children:"..."}):null}),(0,b.jsx)("span",{className:"font-medium text-[var(--text-heading)] text-sm",children:{personal:"Personal Information",family:"Family Information",assets:"Assets Overview",existing_documents:"Existing Documents",goals:"Goals & Wishes"}[a]})]}),(0,b.jsx)("span",{className:`
                      text-xs font-medium
                      ${c.isComplete?"text-[var(--success)]":c.exists?"text-[var(--warning)]":"text-[var(--text-muted)]"}
                    `,children:c.isComplete?"Complete":c.exists?"In Progress":"Not Started"})]},a))})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[y.isAllComplete?(0,b.jsx)(g.default,{href:`/analysis/${k}`,className:"flex-1",children:(0,b.jsx)(s.Button,{variant:"primary",fullWidth:!0,children:"Continue to Gap Analysis"})}):(0,b.jsx)(g.default,{href:`/intake/${function(a){let b={personal:"personal",family:"family",assets:"assets",existing_documents:"existing",goals:"goals"};for(let c of["personal","family","assets","existing_documents","goals"])if(!a[c]?.isComplete)return b[c];return"personal"}(y.sections)}?planId=${k}`,className:"flex-1",children:(0,b.jsx)(s.Button,{variant:"primary",fullWidth:!0,children:"Continue Intake"})}),(0,b.jsx)("button",{onClick:()=>{localStorage.removeItem("estatePlanId"),localStorage.removeItem("estatePlanSessionId"),a.push("/intake")},className:"px-5 py-2.5 border border-[var(--border)] text-[var(--text-heading)] rounded-lg font-medium text-sm hover:bg-[var(--off-white)] transition-colors",children:"Start New Plan"})]})]})}return(0,b.jsxs)("div",{className:"max-w-xl mx-auto space-y-8",children:[(0,b.jsxs)("div",{className:"text-center space-y-3",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-xl mb-2 bg-[var(--accent-muted)]",children:(0,b.jsx)(j.FileText,{className:"w-7 h-7 text-[var(--accent-purple)]"})}),(0,b.jsx)("h1",{className:"text-section text-[var(--text-heading)]",children:"Estate Plan Intake"}),(0,b.jsx)("p",{className:"text-[var(--text-muted)] max-w-md mx-auto",children:"Upload your existing documents or start with a blank questionnaire."})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("button",{onClick:D,disabled:u,className:"w-full rounded-xl p-5 bg-[var(--accent-purple)] hover:bg-[var(--accent-hover)] disabled:opacity-50 disabled:cursor-not-allowed transition-all group",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:(0,b.jsx)(l,{className:"w-6 h-6 text-white"})}),(0,b.jsxs)("div",{className:"text-left flex-1",children:[(0,b.jsx)("h3",{className:"font-medium text-white mb-0.5",children:"Upload Documents"}),(0,b.jsx)("p",{className:"text-white/70 text-sm",children:"Wills, trusts, powers of attorney"})]}),(0,b.jsx)(n.ChevronRight,{className:"w-5 h-5 text-white/70 group-hover:translate-x-0.5 transition-transform"})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-2 text-sm",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 bg-white border border-[var(--border)] rounded-lg",children:[(0,b.jsx)(o.Clock,{className:"w-4 h-4 text-[var(--success)]"}),(0,b.jsx)("span",{className:"text-[var(--text-muted)] text-xs",children:"Save 15+ min"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 bg-white border border-[var(--border)] rounded-lg",children:[(0,b.jsx)(q.CheckCircle2,{className:"w-4 h-4 text-[var(--info)]"}),(0,b.jsx)("span",{className:"text-[var(--text-muted)] text-xs",children:"Auto-fill forms"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center gap-2 p-3 bg-white border border-[var(--border)] rounded-lg",children:[(0,b.jsx)(p,{className:"w-4 h-4 text-[var(--accent-purple)]"}),(0,b.jsx)("span",{className:"text-[var(--text-muted)] text-xs",children:"AI analysis"})]})]})]}),u&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 text-[var(--text-muted)]",children:[(0,b.jsx)(r,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{className:"text-sm",children:"Creating your estate plan..."})]}),(0,b.jsxs)("div",{className:"bg-[var(--off-white)] border border-[var(--border)] rounded-xl p-5",children:[(0,b.jsxs)("h2",{className:"text-label mb-4 flex items-center gap-2",children:[(0,b.jsx)(j.FileText,{className:"w-3.5 h-3.5"}),"Supported Documents"]}),(0,b.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-sm",children:["Will","Living Trust","Irrevocable Trust","Power of Attorney","Healthcare Proxy","Advance Directive","Beneficiary Forms","Property Deeds","Insurance Policies"].map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[var(--text-body)]",children:[(0,b.jsx)(m.Check,{className:"w-3.5 h-3.5 flex-shrink-0 text-[var(--success)]"}),(0,b.jsx)("span",{children:a})]},a))})]}),(0,b.jsxs)("div",{className:"pt-4 border-t border-[var(--border)] text-center",children:[(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)] mb-2",children:"Don't have documents yet?"}),(0,b.jsxs)("button",{onClick:E,disabled:u,className:"font-medium text-sm inline-flex items-center gap-1 text-[var(--accent-purple)] disabled:opacity-50 hover:gap-1.5 transition-all",children:["Start with blank questionnaire",(0,b.jsx)(n.ChevronRight,{className:"w-4 h-4"})]}),(0,b.jsx)("p",{className:"text-xs text-[var(--text-caption)] mt-1",children:"Takes about 15-20 minutes"})]})]})}function u(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(r,{className:"w-6 h-6 animate-spin text-[var(--accent-purple)]"})}),children:(0,b.jsx)(t,{})})}a.s(["default",()=>u],2721)}];

//# sourceMappingURL=app_intake_page_tsx_e91b5868._.js.map