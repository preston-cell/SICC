module.exports=[62864,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);a.i(11241);var e=a.i(96373),f=a.i(1322),g=a.i(38246),h=a.i(86008),i=a.i(49043),j=a.i(66917);let k={missing:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),bgColor:"bg-red-50 dark:bg-red-900/20",borderColor:"border-red-200 dark:border-red-800",iconColor:"text-red-500",titleColor:"text-red-800 dark:text-red-300"},outdated:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-yellow-50 dark:bg-yellow-900/20",borderColor:"border-yellow-200 dark:border-yellow-800",iconColor:"text-yellow-500",titleColor:"text-yellow-800 dark:text-yellow-300"},inconsistency:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-orange-50 dark:bg-orange-900/20",borderColor:"border-orange-200 dark:border-orange-800",iconColor:"text-orange-500",titleColor:"text-orange-800 dark:text-orange-300"},recommendation:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),bgColor:"bg-blue-50 dark:bg-blue-900/20",borderColor:"border-blue-200 dark:border-blue-800",iconColor:"text-blue-500",titleColor:"text-blue-800 dark:text-blue-300"},note:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-gray-50 dark:bg-gray-700",borderColor:"border-gray-200 dark:border-gray-600",iconColor:"text-gray-500",titleColor:"text-gray-800 dark:text-gray-200"},common_issue:{icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),bgColor:"bg-purple-50 dark:bg-purple-900/20",borderColor:"border-purple-200 dark:border-purple-800",iconColor:"text-purple-500",titleColor:"text-purple-800 dark:text-purple-300"}},l={high:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},m={critical:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",high:"bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-300",medium:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",low:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300"},n={will:"Last Will & Testament",trust:"Revocable Living Trust",poa_financial:"Financial Power of Attorney",poa_healthcare:"Healthcare Power of Attorney",healthcare_directive:"Healthcare Directive / Living Will",hipaa:"HIPAA Authorization",credit_shelter_trust:"Credit Shelter Trust",ilit:"Irrevocable Life Insurance Trust",homestead_declaration:"Homestead Declaration",other:"Other Document"};function o({type:a,title:d,description:e,priority:f,action:g,documentType:h,issueType:i,severity:j,affectedAssets:n,recommendation:o,showResolutionSteps:p=!1}){let[q,r]=(0,c.useState)(!1),s=k[a],t=h?({will:{whatItIs:"A Last Will & Testament is a legal document that spells out your wishes for how your belongings (property, money, possessions) should be distributed after you pass away. It also lets you name a guardian for any minor children.",whyYouNeedIt:"Without a will, you have no say in who gets your assets or who raises your children. A will gives you control and makes things much easier for your loved ones during a difficult time.",whatHappensWithout:"Your state's laws will decide who inherits your assets (called 'intestate succession'). This may not match your wishes. For example, your assets might go to distant relatives instead of close friends, or be split in ways you wouldn't want."},trust:{whatItIs:"A Revocable Living Trust is like a container that holds your assets during your lifetime. You control everything while you're alive, but when you pass away, your chosen trustee distributes assets according to your instructions - without going through probate court.",whyYouNeedIt:"A trust helps your family avoid the lengthy and expensive probate process. It also keeps your affairs private (wills become public record) and can help if you become incapacitated.",whatHappensWithout:"Your assets may need to go through probate, which can take months or years, cost thousands in legal fees, and become part of the public record. Your family may face delays in accessing funds they need."},poa_financial:{whatItIs:"A Financial Power of Attorney lets you name someone you trust (called your 'agent') to handle your financial matters if you can't do it yourself - like paying bills, managing investments, or selling property.",whyYouNeedIt:"If you're in an accident, have a medical emergency, or develop dementia, someone needs to be able to pay your bills and manage your finances. Without this document, your family may need to go to court to get that authority.",whatHappensWithout:"Your family may need to petition a court to become your conservator - a process that's expensive, time-consuming, and emotionally draining. Meanwhile, bills go unpaid and financial matters pile up."},poa_healthcare:{whatItIs:"A Healthcare Power of Attorney (also called a Healthcare Proxy) names someone to make medical decisions for you if you're unable to communicate or make decisions yourself.",whyYouNeedIt:"Medical emergencies can happen suddenly. Having someone legally authorized to speak with doctors and make decisions ensures your care isn't delayed and your wishes are respected.",whatHappensWithout:"Doctors may not know who to consult about your care. Family members may disagree about treatment, causing delays and conflict. In worst cases, a court may need to appoint a guardian."},healthcare_directive:{whatItIs:"A Healthcare Directive (or Living Will) documents your wishes for end-of-life medical care - like whether you want to be kept on life support, receive CPR, or have a feeding tube. It speaks for you when you can't.",whyYouNeedIt:"This document takes the burden of difficult decisions off your loved ones. Instead of guessing what you'd want, they can follow your clearly stated wishes during an incredibly stressful time.",whatHappensWithout:"Your family may face agonizing decisions without knowing your wishes. Family members may disagree, leading to conflict and guilt. Medical staff may default to aggressive treatment you wouldn't have wanted."},hipaa:{whatItIs:"A HIPAA Authorization allows specific people to access your medical records and speak with your healthcare providers about your health information.",whyYouNeedIt:"Due to privacy laws, doctors and hospitals can't share your medical information - even with close family - without your permission. This form ensures your loved ones can stay informed about your health.",whatHappensWithout:"Even your spouse or adult children may be unable to get information about your condition, test results, or treatment plans. This can cause enormous frustration during health crises."},credit_shelter_trust:{whatItIs:"A Credit Shelter Trust (also called a Bypass Trust or Family Trust) is a special trust for married couples that can reduce estate taxes by using both spouses' tax exemptions.",whyYouNeedIt:"For larger estates, this trust can save hundreds of thousands of dollars in estate taxes while still providing for your surviving spouse and ultimately passing assets to your children.",whatHappensWithout:"You may pay more estate taxes than necessary. Your spouse might not be able to use your estate tax exemption, essentially wasting a valuable tax benefit."},ilit:{whatItIs:"An Irrevocable Life Insurance Trust (ILIT) owns your life insurance policy outside of your estate. This means the death benefit isn't counted as part of your estate for tax purposes.",whyYouNeedIt:"For people with large estates, life insurance can push you over the estate tax threshold. An ILIT keeps those proceeds out of your taxable estate, potentially saving your heirs significant taxes.",whatHappensWithout:"Life insurance proceeds become part of your taxable estate. For large estates, this could mean 40% or more of your insurance payout goes to taxes instead of your beneficiaries."},homestead_declaration:{whatItIs:"A Homestead Declaration is a document filed with your county that protects your home from certain creditors. It creates a legal shield around the equity in your primary residence.",whyYouNeedIt:"If you face a lawsuit or financial trouble, a homestead declaration can protect your home equity (up to state limits) from being seized to pay creditors. It's an important layer of asset protection.",whatHappensWithout:"Your home equity could be vulnerable to creditor claims from lawsuits, medical bills, or business debts. You might lose your home or be forced to sell it to pay creditors."}})[h]||{whatItIs:"This is an important estate planning document.",whyYouNeedIt:"It helps protect you and your family.",whatHappensWithout:"You may not have proper legal protections in place."}:null,u=i?({missing_beneficiary:"A beneficiary is the person (or people) you've named to receive assets from accounts like retirement plans, life insurance, or bank accounts. These assets pass directly to beneficiaries - they don't go through your will.",unclear_trust:"This means there's something about your trust that could cause problems - maybe it's not properly funded (assets haven't been transferred into it), or key details like who manages it after you're gone aren't clear.",missing_guardian:"A guardian is the person you want to raise your children if something happens to you. Without naming one in your will, a court will decide - and it might not be who you'd choose.",outdated_designation:"Beneficiary designations should be reviewed regularly. Life changes - marriages, divorces, births, deaths - can make old designations problematic or even give assets to the wrong people.",inconsistent_beneficiary:"Your beneficiary designations on accounts may not match what's in your will or what you actually want. This can cause confusion, family conflict, or assets going to unintended recipients."})[i]||"This issue may need your attention to ensure your estate plan works as intended.":null,v=h?({will:["Decide who you want to inherit your assets and in what proportions","Choose an executor - someone responsible to carry out your wishes","If you have minor children, decide who should be their guardian","Consult with an estate planning attorney to draft your will","Sign your will in front of witnesses (requirements vary by state)","Store the original in a safe place and tell your executor where it is"],trust:["Decide what type of trust best fits your needs (revocable is most common)","Choose a successor trustee to manage the trust after you","List the beneficiaries and their shares","Work with an estate planning attorney to create the trust document","Fund the trust by transferring assets into it (retitling property, accounts)","Update beneficiary designations on retirement accounts to align with your plan"],poa_financial:["Choose someone you trust completely to handle your finances if needed","Consider naming a backup agent in case your first choice can't serve","Decide when the power should take effect (immediately or only if incapacitated)","Work with an attorney to draft the document with appropriate powers","Sign the document according to your state's requirements (notarization usually required)","Give a copy to your agent and keep the original in a safe place"],poa_healthcare:["Choose someone who understands your healthcare wishes and can advocate for you","Have a conversation with them about your preferences for medical care","Consider naming an alternate agent as a backup","Work with an attorney or use your state's official form","Sign the document with proper witnesses/notarization as required","Give copies to your agent, your doctor, and the hospital where you'd likely receive care"],healthcare_directive:["Think carefully about your wishes for end-of-life care","Consider: life support, CPR, feeding tubes, pain management preferences","Discuss your values and wishes with your family and healthcare proxy","Complete your state's official advance directive form or work with an attorney","Sign the document with proper witnesses as required by your state","Distribute copies to your healthcare agent, doctors, and family members"],hipaa:["Decide who should be able to access your medical information","Obtain a HIPAA authorization form (from your doctor or attorney)","List each person by name with their relationship to you","Specify what information they can access (usually 'all' is recommended)","Sign and date the form","Give copies to each authorized person and your healthcare providers"],credit_shelter_trust:["Evaluate your estate size to see if this trust would provide tax benefits","Discuss the strategy with your spouse - both must understand the implications","Consult with an estate planning attorney who specializes in tax planning","Coordinate the trust with your will and other estate documents","Fund the trust appropriately after the first spouse passes","Review periodically as estate tax laws change"],ilit:["Determine if your estate is large enough to benefit from an ILIT","Choose a trustee (cannot be you or your spouse)","Work with an attorney to create the irrevocable trust","Transfer existing policy ownership to the trust OR have the trust purchase a new policy","Make annual gifts to the trust to pay premiums (using Crummey notices)","Understand this trust cannot be changed once created - it's permanent"],homestead_declaration:["Verify your state offers homestead protection (not all do)","Obtain the homestead declaration form from your county recorder's office","Fill out the form with your property information","Sign the form (notarization may be required)","File the form with your county recorder's office and pay any filing fee","Keep a copy with your important documents"]})[h]||["Identify what document you need","Gather information about your wishes and situation","Consult with an estate planning attorney","Sign the document according to your state's requirements","Store it safely and inform relevant parties"]:i?({missing_beneficiary:["Gather account statements for all retirement accounts, life insurance, and bank accounts","Contact each financial institution to request current beneficiary information","Review each designation - does it still reflect your wishes?","Update any outdated designations with new beneficiary forms","Name both primary AND contingent (backup) beneficiaries on every account","Keep copies of all beneficiary designation forms with your estate documents"],unclear_trust:["Locate your original trust document and any amendments","Review who is named as successor trustee - are they still the right choice?","Check if the trust has been funded - are assets actually titled in the trust's name?","Verify beneficiary designations are clear and percentages add up to 100%","Meet with an estate planning attorney to address any gaps or unclear provisions","Create a trust funding checklist and transfer any assets still in your personal name"],missing_guardian:["Have a conversation with your spouse/partner about who you'd want to raise your children","Consider the potential guardian's values, parenting style, and financial stability","Think about location - would your children need to move schools?","Talk to your chosen guardian to make sure they're willing and able","Name an alternate guardian in case your first choice can't serve","Add guardian nominations to your will and have it properly signed"],outdated_designation:["Pull recent statements for all accounts with beneficiary designations","Make a list showing current beneficiaries for each account","Compare against your current wishes and family situation","Contact financial institutions to update any that need changing","Set a calendar reminder to review beneficiaries annually","Review after any major life event (marriage, divorce, birth, death)"],inconsistent_beneficiary:["Create a spreadsheet listing all your accounts and their current beneficiaries","Compare this list with your will and/or trust beneficiaries","Identify any inconsistencies that could cause confusion or conflict","Decide what the correct beneficiary should be for each account","Update beneficiary forms to match your intended plan","Keep everything consistent - your will, trust, and beneficiary designations should tell the same story"]})[i]||["Review your current estate planning documents","Identify what needs to be updated or created","Consult with an estate planning professional","Make the necessary changes","Document everything and store safely"]:[];return(0,b.jsx)("div",{className:`${s.bgColor} ${s.borderColor} border rounded-lg p-4`,children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)("div",{className:`flex-shrink-0 ${s.iconColor}`,children:s.icon}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,b.jsx)("h4",{className:`font-medium ${s.titleColor}`,children:d}),f&&(0,b.jsxs)("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${l[f]}`,children:[f.charAt(0).toUpperCase()+f.slice(1)," Priority"]}),j&&(0,b.jsx)("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${m[j]}`,children:j.charAt(0).toUpperCase()+j.slice(1)})]}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e}),n&&n.length>0&&(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Affected: "}),(0,b.jsx)("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:n.join(", ")})]}),o&&(0,b.jsxs)("div",{className:"mt-2 p-2 bg-white/50 dark:bg-gray-800/50 rounded text-sm",children:[(0,b.jsx)("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Recommendation: "}),(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:o})]}),(t||u||p)&&(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("button",{onClick:()=>r(!q),className:"flex items-center gap-1 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200 transition-colors",children:[(0,b.jsx)("svg",{className:`w-4 h-4 transition-transform ${q?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),q?"Hide details":"Learn more & how to fix"]}),q&&(0,b.jsxs)("div",{className:"mt-3 space-y-4 p-3 bg-white/70 dark:bg-gray-800/70 rounded-lg",children:[t&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"What is this document?"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.whatItIs})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"Why do you need it?"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.whyYouNeedIt})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-amber-700 dark:text-amber-400",children:"What happens without it?"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:t.whatHappensWithout})]})]}),u&&!t&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-gray-800 dark:text-gray-200",children:"What does this mean?"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:u})]}),v.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsx)("h5",{className:"text-sm font-semibold text-green-700 dark:text-green-400 mb-2",children:"How to resolve this:"}),(0,b.jsx)("ol",{className:"space-y-2",children:v.map((a,c)=>(0,b.jsxs)("li",{className:"flex gap-2 text-sm",children:[(0,b.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 flex items-center justify-center text-xs font-medium",children:c+1}),(0,b.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:a})]},c))})]})]})]}),g&&(0,b.jsx)("div",{className:"mt-3",children:g})]})]})})}function p({score:a,size:c="md"}){let d={sm:{ring:60,stroke:6,text:"text-lg"},md:{ring:100,stroke:8,text:"text-2xl"},lg:{ring:140,stroke:10,text:"text-4xl"}}[c],e=(d.ring-d.stroke)/2,f=2*e*Math.PI,g=f-a/100*f,h=a=>a>=80?"text-green-500":a>=60?"text-yellow-500":a>=40?"text-orange-500":"text-red-500";return(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsxs)("div",{className:"relative inline-flex items-center justify-center",children:[(0,b.jsxs)("svg",{width:d.ring,height:d.ring,className:"-rotate-90",children:[(0,b.jsx)("circle",{cx:d.ring/2,cy:d.ring/2,r:e,fill:"none",stroke:"currentColor",strokeWidth:d.stroke,className:"text-gray-200 dark:text-gray-700"}),(0,b.jsx)("circle",{cx:d.ring/2,cy:d.ring/2,r:e,fill:"none",stroke:"currentColor",strokeWidth:d.stroke,strokeDasharray:f,strokeDashoffset:g,strokeLinecap:"round",className:`${h(a)} transition-all duration-500`})]}),(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,b.jsx)("span",{className:`font-bold ${d.text} ${h(a)}`,children:a})})]}),"sm"!==c&&(0,b.jsx)("span",{className:`mt-1 text-sm font-medium ${h(a)}`,children:a>=80?"Good":a>=60?"Fair":a>=40?"Needs Work":"Critical"})]})}function q(){var a;let k=(0,d.useParams)().estatePlanId,[l,m]=(0,c.useState)(!1),[q,t]=(0,c.useState)(null),[u,v]=(0,c.useState)("overview"),w=(0,e.useQuery)(f.api.queries.getEstatePlan,{estatePlanId:k}),x=(0,e.useQuery)(f.api.queries.getLatestGapAnalysis,{estatePlanId:k}),y=(0,e.useQuery)(f.api.queries.getIntakeProgress,{estatePlanId:k}),z=(0,e.useQuery)(f.api.queries.getEstatePlanFull,{estatePlanId:k}),A=(0,e.useMutation)(f.api.estatePlanning.saveGapAnalysisPublic),B=(0,c.useCallback)(async()=>{m(!0),t(null);try{console.log("Raw intakeData from Convex:",z);let a=z?.intakeData||z?.intake||[];console.log("Intake array:",a),console.log("Available sections:",a.map?.(a=>a.section)||"none");let b=z?.beneficiaryDesignations||[],c={estatePlan:{stateOfResidence:w?.stateOfResidence},personal:a?.find(a=>"personal"===a.section),family:a?.find(a=>"family"===a.section),assets:a?.find(a=>"assets"===a.section),existingDocuments:a?.find(a=>"existing_documents"===a.section),goals:a?.find(a=>"goals"===a.section),beneficiaryDesignations:b};console.log("Built apiIntakeData:",JSON.stringify(c,null,2));let d=await fetch("/api/gap-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({intakeData:c})}),e=await d.json();if(!e.success)return void t(e.error||"Analysis failed");console.log("Gap analysis API response:",{success:e.success,hasAnalysisResult:!!e.analysisResult,score:e.analysisResult?.score,overallScore:e.analysisResult?.overallScore,missingDocsCount:e.analysisResult?.missingDocuments?.length||0,recommendationsCount:(e.analysisResult?.recommendations||e.analysisResult?.prioritizedRecommendations)?.length||0,stateNotesCount:(e.analysisResult?.stateSpecificNotes||e.analysisResult?.stateSpecificConsiderations)?.length||0});let f=e.analysisResult?.missingDocuments||[],g=e.analysisResult?.recommendations||e.analysisResult?.prioritizedRecommendations||[],h=e.analysisResult?.stateSpecificNotes||e.analysisResult?.stateSpecificConsiderations||[];0===f.length&&0===g.length&&(console.warn("WARNING: API returned empty analysis data - possible parsing issue"),console.warn("Full result structure:",JSON.stringify(e.analysisResult,null,2).slice(0,1e3))),console.log("Saving to Convex:",{score:e.analysisResult?.score||50,missingDocsCount:f.length,recommendationsCount:g.length,stateNotesCount:h.length}),await A({estatePlanId:k,score:e.analysisResult.score||50,estateComplexity:e.analysisResult.estateComplexity?JSON.stringify(e.analysisResult.estateComplexity):void 0,estimatedEstateTax:e.analysisResult.estimatedEstateTax||e.analysisResult.financialExposure?.estimatedEstateTax?JSON.stringify(e.analysisResult.estimatedEstateTax||e.analysisResult.financialExposure?.estimatedEstateTax):void 0,missingDocuments:JSON.stringify(e.analysisResult.missingDocuments||[]),outdatedDocuments:JSON.stringify(e.analysisResult.outdatedDocuments||[]),inconsistencies:JSON.stringify(e.analysisResult.inconsistencies||[]),taxOptimization:e.analysisResult.taxOptimization||e.analysisResult.taxStrategies?JSON.stringify(e.analysisResult.taxOptimization||e.analysisResult.taxStrategies):void 0,medicaidPlanning:e.analysisResult.medicaidPlanning?JSON.stringify(e.analysisResult.medicaidPlanning):void 0,recommendations:JSON.stringify(e.analysisResult.recommendations||e.analysisResult.prioritizedRecommendations||[]),stateSpecificNotes:JSON.stringify(e.analysisResult.stateSpecificNotes||e.analysisResult.stateSpecificConsiderations||[]),rawAnalysis:e.analysisResult.rawAnalysis||e.stdout})}catch(a){t(a instanceof Error?a.message:"An error occurred")}finally{m(!1)}},[k,w,z,A]),C=a=>{if(!a)return[];try{return JSON.parse(a)}catch{return[]}},D=C(x?.missingDocuments),E=C(x?.outdatedDocuments),F=C(x?.inconsistencies),G=C(x?.recommendations),H=C(x?.stateSpecificNotes),I=E.length+F.length,J=y?.isAllComplete,K=x?.score?(a=x.score)>=80?{label:"Excellent",description:"Your estate plan is comprehensive and well-organized.",color:"text-[var(--success)]"}:a>=60?{label:"Good",description:"Your estate plan is solid but has some room for improvement.",color:"text-[var(--warning)]"}:a>=40?{label:"Needs Work",description:"Several important areas need attention in your estate plan.",color:"text-[var(--warning)]"}:{label:"Critical",description:"Your estate plan has significant gaps that should be addressed soon.",color:"text-[var(--error)]"}:null,L=(0,c.useMemo)(()=>[{id:"overview",label:"Overview",icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})},{id:"missing",label:`Missing (${D.length})`,icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),disabled:0===D.length},{id:"issues",label:`Issues (${I})`,icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),disabled:0===I},{id:"recommendations",label:`Actions (${G.length})`,icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),disabled:0===G.length},{id:"state",label:"State Notes",icon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),disabled:0===H.length}],[D.length,I,G.length,H.length]);return w?(0,b.jsxs)("div",{className:"min-h-screen bg-white print:bg-white",children:[(0,b.jsx)("header",{className:"bg-white shadow-sm print:hidden",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsx)(g.default,{href:"/",className:"text-xl font-bold text-[var(--text-heading)] hover:text-[var(--accent-purple)] transition-colors",children:"Estate Planning Assistant"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[x&&(0,b.jsx)(j.default,{variant:"outline",size:"sm",onClick:()=>{window.print()},leftIcon:(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),children:"Print Report"}),(0,b.jsx)(g.default,{href:`/intake?planId=${k}`,className:"text-sm text-[var(--text-muted)] hover:text-[var(--text-body)]",children:"Back to Intake"})]})]})}),(0,b.jsxs)("main",{className:"max-w-5xl mx-auto px-4 py-8",children:[!J&&(0,b.jsx)("div",{className:"mb-6 bg-[var(--warning-muted)] border border-[var(--warning)] rounded-lg p-4 print:hidden",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-[var(--warning)]",children:"Intake Incomplete"}),(0,b.jsxs)("p",{className:"text-sm text-[var(--warning)] mt-1",children:["Complete all intake sections for the most accurate analysis. You've completed ",y?.completedCount||0," of ",y?.totalCount||5," sections."]}),(0,b.jsx)(g.default,{href:`/intake?planId=${k}`,className:"inline-block mt-2 text-sm font-medium text-[var(--warning)] hover:underline",children:"Complete Intake →"})]})]})}),!x&&!l&&(0,b.jsxs)("div",{className:"mb-8 bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-[var(--accent-muted)] to-[var(--accent-purple)]/20 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,b.jsx)("svg",{className:"w-10 h-10 text-[var(--accent-purple)]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})})}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-heading)] mb-3",children:"Ready to Analyze Your Estate Plan"}),(0,b.jsx)("p",{className:"text-[var(--text-body)] mb-8 max-w-lg mx-auto",children:"Our AI will review your intake data and identify gaps, outdated documents, and provide personalized recommendations based on your state's laws."}),(0,b.jsx)(j.default,{onClick:B,size:"lg",children:"Run Gap Analysis"})]}),l&&(0,b.jsxs)("div",{className:"mb-8 bg-white rounded-xl shadow-lg p-8 text-center",children:[(0,b.jsxs)("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[(0,b.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-[var(--accent-muted)]"}),(0,b.jsx)("div",{className:"absolute inset-0 rounded-full border-4 border-[var(--accent-purple)] border-t-transparent animate-spin"})]}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-[var(--text-heading)] mb-3",children:"Analyzing Your Estate Plan..."}),(0,b.jsx)("p",{className:"text-[var(--text-body)] max-w-lg mx-auto",children:"This may take a minute. We're reviewing your information and generating personalized recommendations."})]}),q&&(0,b.jsx)("div",{className:"mb-6 bg-[var(--error-muted)] border border-[var(--error)] rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-[var(--error)]",children:"Analysis Failed"}),(0,b.jsx)("p",{className:"text-sm text-[var(--error)] mt-1",children:q}),(0,b.jsx)("button",{onClick:B,className:"mt-2 text-sm font-medium text-[var(--error)] hover:underline",children:"Try Again"})]})]})}),x&&!l&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"bg-gradient-to-br from-[var(--off-white)] to-[var(--light-gray)]/50 px-6 py-10 text-center",children:[(0,b.jsxs)("h1",{className:"text-lg font-medium text-[var(--text-body)] mb-6",children:[w.name||"Your Estate Plan"," Analysis"]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(p,{score:x.score||0,size:"lg"})}),K&&(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h2",{className:`text-3xl font-bold ${K.color} mb-2`,children:K.label}),(0,b.jsx)("p",{className:"text-[var(--text-body)] max-w-md mx-auto",children:K.description})]}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 md:gap-10",children:[(0,b.jsx)(r,{label:"Missing Documents",value:D.length,color:D.length>0?"red":"green",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,b.jsx)(r,{label:"Issues Found",value:I,color:I>0?"yellow":"green",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,b.jsx)(r,{label:"Recommendations",value:G.length,color:"blue",icon:(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})})]}),(0,b.jsxs)("div",{className:"mt-8 flex flex-wrap justify-center gap-4",children:[(0,b.jsxs)(g.default,{href:`/analysis/${k}/visualization`,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#FF7759] hover:bg-[#E85A3C] text-white font-medium rounded-full shadow-md hover:shadow-lg transition-all",children:[(0,b.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]}),"View Estate Distribution"]}),(0,b.jsxs)(g.default,{href:`/analysis/${k}/reminders`,className:"inline-flex items-center gap-2 px-6 py-3 bg-[#1D1D1B] hover:bg-[#2D2D2B] text-white font-medium rounded-full shadow-md hover:shadow-lg transition-all",children:[(0,b.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),"Reminders & Life Events"]})]})]}),(0,b.jsxs)("div",{className:"px-6 py-3 bg-white/50 border-t border-[var(--border)] flex flex-wrap justify-between items-center gap-2 text-sm print:hidden",children:[(0,b.jsxs)("span",{className:"text-[var(--text-muted)]",children:["Analysis from ",new Date(x.createdAt).toLocaleString()]}),(0,b.jsxs)("button",{onClick:B,disabled:l,className:"text-[var(--accent-purple)] hover:opacity-80 font-medium inline-flex items-center gap-1",children:[(0,b.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Re-run Analysis"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden print:shadow-none",children:[(0,b.jsxs)(h.Tabs,{tabs:L,activeTab:u,onChange:v,variant:"underline",fullWidth:!0,className:"print:hidden",children:[(0,b.jsx)(h.TabPanel,{tabId:"overview",children:(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"bg-white/50 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-[var(--text-heading)] mb-3 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Priority Actions"]}),D.filter(a=>"high"===a.priority).length>0||G.filter(a=>"high"===a.priority).length>0?(0,b.jsxs)("ul",{className:"space-y-2",children:[D.filter(a=>"high"===a.priority).slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)(i.default,{variant:"error",size:"sm",children:"Missing"}),(0,b.jsx)("span",{className:"text-[var(--text-body)]",children:n[a.document||a.type||""]||a.document||a.type||"Document"})]},`doc-${c}`)),G.filter(a=>"high"===a.priority||"critical"===a.priority).slice(0,2).map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2 text-sm",children:[(0,b.jsx)(i.default,{variant:"warning",size:"sm",children:"Action"}),(0,b.jsx)("span",{className:"text-[var(--text-body)]",children:a.action})]},`rec-${c}`))]}):(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"No high-priority actions needed."})]}),(0,b.jsxs)("div",{className:"bg-white/50 rounded-lg p-4",children:[(0,b.jsxs)("h3",{className:"font-semibold text-[var(--text-heading)] mb-3 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Document Status"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[var(--text-body)]",children:"Missing"}),(0,b.jsx)("span",{className:"font-medium text-red-600",children:D.length})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[var(--text-body)]",children:"Outdated"}),(0,b.jsx)("span",{className:"font-medium text-yellow-600",children:E.length})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{className:"text-[var(--text-body)]",children:"Inconsistencies"}),(0,b.jsx)("span",{className:"font-medium text-orange-600",children:F.length})]})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 pt-4",children:[(0,b.jsx)(g.default,{href:`/documents/generate/${k}`,className:"flex-1",children:(0,b.jsx)(j.default,{variant:"primary",fullWidth:!0,children:"Generate Documents"})}),(0,b.jsx)(g.default,{href:`/documents/upload/${k}`,className:"flex-1",children:(0,b.jsx)(j.default,{variant:"secondary",fullWidth:!0,children:"Upload & Analyze"})}),(0,b.jsx)(g.default,{href:`/intake?planId=${k}`,className:"flex-1",children:(0,b.jsx)(j.default,{variant:"outline",fullWidth:!0,children:"Update Information"})})]})]})}),(0,b.jsx)(h.TabPanel,{tabId:"missing",children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:D.map((a,c)=>{let d=a.document||a.type||"Unknown Document",e=a.type||a.document?.toLowerCase().replace(/\s+/g,"_")||"",f=a.priority||"medium";return(0,b.jsxs)("div",{className:"bg-[var(--error-muted)] border border-[var(--error)] rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsx)("h4",{className:"font-semibold text-[var(--text-heading)]",children:n[e]||d}),(0,b.jsx)(i.default,{variant:"critical"===f||"high"===f?"error":"medium"===f?"warning":"success",size:"sm",children:f})]}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-body)] mb-2",children:a.reason||"This document is recommended for your estate plan."}),a.consequences&&(0,b.jsxs)("p",{className:"text-sm text-[var(--error)] mb-2",children:[(0,b.jsx)("strong",{children:"Without it:"})," ",a.consequences]}),a.estimatedCostToCreate&&(0,b.jsxs)("p",{className:"text-xs text-[var(--text-muted)] mb-4",children:["Est. cost: $",a.estimatedCostToCreate.low.toLocaleString()," - $",a.estimatedCostToCreate.high.toLocaleString()]}),(0,b.jsx)(g.default,{href:`/documents/generate/${k}?type=${e}`,className:"inline-flex items-center gap-1 text-sm font-medium text-[var(--accent-purple)] hover:opacity-80",children:"Generate Document →"})]},c)})})})}),(0,b.jsx)(h.TabPanel,{tabId:"issues",children:(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[E.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[var(--text-heading)] mb-4 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-yellow-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Outdated Documents (",E.length,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:E.map((a,c)=>{let d=a.document||a.type||"Document",e=[a.issue,a.risk&&`Risk: ${a.risk}`,a.recommendation].filter(Boolean).join(". ");return(0,b.jsx)(o,{type:"outdated",title:n[d]||d,description:e||"This document may need review."},c)})})]}),F.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold text-[var(--text-heading)] mb-4 flex items-center gap-2",children:[(0,b.jsx)("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Inconsistencies (",F.length,")"]}),(0,b.jsx)("div",{className:"space-y-3",children:F.map((a,c)=>{let d=a.issue||a.type||"Inconsistency Found",e=[a.details||a.potentialConsequence,(a.resolution||a.recommendation)&&`Resolution: ${a.resolution||a.recommendation}`].filter(Boolean).join(". "),f="critical"===a.severity?"high":a.severity;return(0,b.jsx)(o,{type:"inconsistency",title:d,description:e||"Please review this inconsistency.",priority:f},c)})})]})]})}),(0,b.jsx)(h.TabPanel,{tabId:"recommendations",children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)("div",{className:"space-y-4",children:G.map((a,c)=>{let d=a.action||"Recommendation",e=a.priority||"medium",f=a.reason||a.riskOfDelay||a.estimatedBenefit||"";return(0,b.jsxs)("div",{className:"bg-white border border-[var(--border)] rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.rank&&(0,b.jsx)("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-[var(--accent-muted)] text-[var(--accent-purple)] text-xs font-bold",children:a.rank}),(0,b.jsx)("h4",{className:"font-semibold text-[var(--text-heading)]",children:d})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[a.timeline&&(0,b.jsx)(i.default,{variant:"default",size:"sm",children:a.timeline}),(0,b.jsx)(i.default,{variant:"critical"===e||"high"===e?"error":"medium"===e?"warning":"success",size:"sm",children:e})]})]}),f&&(0,b.jsx)("p",{className:"text-sm text-[var(--text-body)] mb-3",children:f}),a.detailedSteps&&a.detailedSteps.length>0&&(0,b.jsxs)("div",{className:"mt-3 pt-3 border-t border-[var(--border)]",children:[(0,b.jsx)("p",{className:"text-xs font-medium text-[var(--text-muted)] mb-2",children:"Steps:"}),(0,b.jsxs)("ul",{className:"text-sm text-[var(--text-body)] space-y-1",children:[a.detailedSteps.slice(0,3).map((a,c)=>(0,b.jsxs)("li",{className:"flex items-start gap-2",children:[(0,b.jsx)("span",{className:"text-gray-400",children:"•"}),(0,b.jsx)("span",{children:a})]},c)),a.detailedSteps.length>3&&(0,b.jsxs)("li",{className:"text-gray-400 text-xs",children:["+ ",a.detailedSteps.length-3," more steps..."]})]})]}),a.estimatedCost&&(0,b.jsxs)("p",{className:"text-xs text-[var(--text-muted)] mt-2",children:["Est. cost: $",a.estimatedCost.low?.toLocaleString()," - $",a.estimatedCost.high?.toLocaleString()]})]},c)})})})}),(0,b.jsx)(h.TabPanel,{tabId:"state",children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[H.map((a,c)=>{let d=a.topic||a.note||"State Consideration",e=[a.rule,a.impact,a.action&&`Action: ${a.action}`,a.relevance].filter(Boolean).join(". ");return(0,b.jsxs)("div",{className:"bg-[var(--info-muted)] border border-[var(--info)] rounded-lg p-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-[var(--text-heading)] mb-2",children:d}),e&&(0,b.jsx)("p",{className:"text-sm text-[var(--text-body)] mb-2",children:e}),a.citation&&(0,b.jsx)("p",{className:"text-xs text-[var(--accent-purple)] font-mono",children:a.citation})]},c)}),0===H.length&&(0,b.jsx)("p",{className:"text-[var(--text-muted)] text-center py-8",children:"No state-specific considerations found. This may be due to limited state information provided."})]})})})]}),(0,b.jsxs)("div",{className:"hidden print:block p-6 space-y-8",children:[(0,b.jsx)(s,{title:"Missing Documents",items:D,type:"missing"}),(0,b.jsx)(s,{title:"Outdated Documents",items:E,type:"outdated"}),(0,b.jsx)(s,{title:"Inconsistencies",items:F,type:"inconsistency"}),(0,b.jsx)(s,{title:"Recommendations",items:G,type:"recommendation"}),(0,b.jsx)(s,{title:"State-Specific Notes",items:H,type:"note"})]})]}),(0,b.jsx)("div",{className:"bg-[var(--warning-muted)] border border-[var(--warning)] rounded-lg p-4",children:(0,b.jsxs)("p",{className:"text-sm text-[var(--warning)]",children:[(0,b.jsx)("strong",{children:"Disclaimer:"})," This analysis is for informational purposes only and does not constitute legal advice. Please consult with a licensed attorney in your state to review your specific situation and any documents before signing."]})})]})]})]}):(0,b.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[var(--accent-purple)] mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-[var(--text-body)]",children:"Loading..."})]})})}function r({label:a,value:c,color:d,icon:e}){return(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:`w-12 h-12 rounded-full ${{red:"text-[var(--error)] bg-[var(--error-muted)]",yellow:"text-[var(--warning)] bg-[var(--warning-muted)]",green:"text-[var(--success)] bg-[var(--success-muted)]",blue:"text-[var(--accent-purple)] bg-[var(--accent-muted)]"}[d]} flex items-center justify-center mx-auto mb-2`,children:e}),(0,b.jsx)("div",{className:"text-3xl font-bold text-[var(--text-heading)]",children:c}),(0,b.jsx)("div",{className:"text-sm text-[var(--text-muted)]",children:a})]})}function s({title:a,items:c,type:d}){return 0===c.length?null:(0,b.jsxs)("div",{className:"break-inside-avoid",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-3 border-b pb-2",children:a}),(0,b.jsx)("ul",{className:"space-y-2",children:c.map((a,c)=>{let e,f;return(0,b.jsxs)("li",{className:"text-sm",children:["missing"===d&&(e=a.document||a.type||"Document",(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("strong",{children:n[e]||e})," - ",a.reason||a.consequences||"Recommended for your estate plan"]})),"outdated"===d&&(f=a.document||a.type||"Document",(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("strong",{children:n[f]||f})," - ",a.issue,". ",a.recommendation]})),"inconsistency"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("strong",{children:a.issue||a.type||"Inconsistency"})," - ",a.details||a.potentialConsequence||"",". ",a.recommendation||a.resolution||""]}),"recommendation"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("strong",{children:a.action||"Recommendation"})," - ",a.reason||a.riskOfDelay||a.estimatedBenefit||""]}),"note"===d&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("strong",{children:a.topic||a.note||"State Consideration"})," - ",a.rule||a.impact||a.relevance||""]})]},c)})})]})}a.s(["default",()=>q],62864)}];

//# sourceMappingURL=app_analysis_%5BestatePlanId%5D_page_tsx_b77b210d._.js.map