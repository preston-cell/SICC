{"version":3,"sources":["../../../../app/documents/generate/%5BestatePlanId%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useParams, useSearchParams } from \"next/navigation\";\nimport { useQuery, useAction } from \"convex/react\";\nimport { api } from \"../../../../convex/_generated/api\";\nimport { Id } from \"../../../../convex/_generated/dataModel\";\nimport Link from \"next/link\";\nimport { useState, useCallback } from \"react\";\nimport ReactMarkdown from \"react-markdown\";\n\ntype DocumentType = \"will\" | \"trust\" | \"poa_financial\" | \"poa_healthcare\" | \"healthcare_directive\" | \"hipaa\";\n\nconst DOCUMENT_TYPES: Array<{\n  type: DocumentType;\n  name: string;\n  description: string;\n  estimatedTime: string;\n  icon: React.ReactNode;\n}> = [\n  {\n    type: \"will\",\n    name: \"Last Will & Testament\",\n    description: \"Specify how your assets should be distributed after death and name guardians for minor children\",\n    estimatedTime: \"2-3 minutes\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n      </svg>\n    ),\n  },\n  {\n    type: \"trust\",\n    name: \"Revocable Living Trust\",\n    description: \"Avoid probate and maintain privacy for your estate with a flexible trust\",\n    estimatedTime: \"3-4 minutes\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n      </svg>\n    ),\n  },\n  {\n    type: \"poa_financial\",\n    name: \"Financial Power of Attorney\",\n    description: \"Authorize someone to manage your finances if you become incapacitated\",\n    estimatedTime: \"1-2 minutes\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n    ),\n  },\n  {\n    type: \"poa_healthcare\",\n    name: \"Healthcare Power of Attorney\",\n    description: \"Designate someone to make medical decisions on your behalf\",\n    estimatedTime: \"1-2 minutes\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n      </svg>\n    ),\n  },\n  {\n    type: \"healthcare_directive\",\n    name: \"Healthcare Directive / Living Will\",\n    description: \"Document your wishes for end-of-life medical treatment\",\n    estimatedTime: \"2-3 minutes\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\n      </svg>\n    ),\n  },\n  {\n    type: \"hipaa\",\n    name: \"HIPAA Authorization\",\n    description: \"Allow designated individuals to access your medical information\",\n    estimatedTime: \"1 minute\",\n    icon: (\n      <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n      </svg>\n    ),\n  },\n];\n\ninterface GenerationState {\n  isGenerating: boolean;\n  generatingType: DocumentType | null;\n  error: string | null;\n}\n\ninterface PreviewState {\n  isOpen: boolean;\n  title: string;\n  content: string;\n  documentId: string | null;\n}\n\nexport default function DocumentGeneratePage() {\n  const params = useParams();\n  const searchParams = useSearchParams();\n  const estatePlanId = params.estatePlanId as Id<\"estatePlans\">;\n  const highlightType = searchParams.get(\"type\");\n\n  // State\n  const [generationState, setGenerationState] = useState<GenerationState>({\n    isGenerating: false,\n    generatingType: null,\n    error: null,\n  });\n  const [previewState, setPreviewState] = useState<PreviewState>({\n    isOpen: false,\n    title: \"\",\n    content: \"\",\n    documentId: null,\n  });\n  const [useAI, setUseAI] = useState(false);\n\n  // Fetch estate plan\n  const estatePlan = useQuery(api.queries.getEstatePlan, { estatePlanId });\n\n  // Fetch existing documents\n  const existingDocs = useQuery(api.queries.getDocuments, { estatePlanId });\n\n  // Fetch gap analysis for recommendations\n  const gapAnalysis = useQuery(api.queries.getLatestGapAnalysis, { estatePlanId });\n\n  // Fetch intake progress\n  const intakeProgress = useQuery(api.queries.getIntakeProgress, { estatePlanId });\n\n  // Document generation action\n  const generateDocument = useAction(api.documentGeneration.generateDocument);\n\n  // Parse missing documents from gap analysis\n  const missingDocTypes = new Set<string>();\n  if (gapAnalysis?.missingDocuments) {\n    try {\n      const missing = JSON.parse(gapAnalysis.missingDocuments);\n      missing.forEach((doc: { type: string }) => missingDocTypes.add(doc.type));\n    } catch {\n      // Ignore parse errors\n    }\n  }\n\n  // Handle document generation\n  const handleGenerate = useCallback(async (docType: DocumentType) => {\n    setGenerationState({\n      isGenerating: true,\n      generatingType: docType,\n      error: null,\n    });\n\n    try {\n      const result = await generateDocument({\n        estatePlanId,\n        documentType: docType,\n        useAI,\n      });\n\n      if (result.success && result.content) {\n        const docInfo = DOCUMENT_TYPES.find(d => d.type === docType);\n        setPreviewState({\n          isOpen: true,\n          title: docInfo?.name || \"Generated Document\",\n          content: result.content,\n          documentId: result.documentId || null,\n        });\n      } else {\n        setGenerationState(prev => ({\n          ...prev,\n          error: result.error || \"Failed to generate document\",\n        }));\n      }\n    } catch (error) {\n      setGenerationState(prev => ({\n        ...prev,\n        error: error instanceof Error ? error.message : \"An error occurred\",\n      }));\n    } finally {\n      setGenerationState(prev => ({\n        ...prev,\n        isGenerating: false,\n        generatingType: null,\n      }));\n    }\n  }, [estatePlanId, generateDocument, useAI]);\n\n  // Handle download\n  const handleDownload = useCallback(() => {\n    const blob = new Blob([previewState.content], { type: \"text/markdown\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `${previewState.title.replace(/\\s+/g, \"_\")}.md`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }, [previewState.content, previewState.title]);\n\n  // Copy to clipboard\n  const handleCopy = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(previewState.content);\n      // Could add a toast notification here\n    } catch (error) {\n      console.error(\"Failed to copy:\", error);\n    }\n  }, [previewState.content]);\n\n  if (!estatePlan) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600\"></div>\n      </div>\n    );\n  }\n\n  const hasEnoughData = intakeProgress && intakeProgress.percentComplete >= 40;\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Header */}\n      <header className=\"bg-white dark:bg-gray-800 shadow-sm\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4 flex items-center justify-between\">\n          <Link\n            href=\"/\"\n            className=\"text-xl font-bold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition-colors\"\n          >\n            Estate Planning Assistant\n          </Link>\n          <Link\n            href={`/analysis/${estatePlanId}`}\n            className=\"text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300\"\n          >\n            Back to Analysis\n          </Link>\n        </div>\n      </header>\n\n      <main className=\"max-w-4xl mx-auto px-4 py-8\">\n        {/* Page Header */}\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">\n            Generate Documents\n          </h1>\n          <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\n            Select a document type to generate a customized draft based on your information.\n          </p>\n        </div>\n\n        {/* Progress Warning */}\n        {!hasEnoughData && (\n          <div className=\"mb-6 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg p-4\">\n            <div className=\"flex gap-3\">\n              <svg className=\"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-medium text-amber-800 dark:text-amber-200\">More Information Needed</h3>\n                <p className=\"text-sm text-amber-700 dark:text-amber-300 mt-1\">\n                  Your intake questionnaire is only {intakeProgress?.percentComplete || 0}% complete.\n                  Documents generated with incomplete information will have placeholder values.{\" \"}\n                  <Link href={`/intake/${estatePlanId}`} className=\"underline hover:no-underline\">\n                    Complete the questionnaire\n                  </Link>{\" \"}\n                  for better results.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* AI Enhancement Toggle */}\n        <div className=\"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h3 className=\"font-medium text-gray-900 dark:text-white\">AI-Enhanced Generation</h3>\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\n                Use Claude AI to generate more detailed and customized documents\n              </p>\n            </div>\n            <button\n              onClick={() => setUseAI(!useAI)}\n              className={`\n                relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent\n                transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2\n                ${useAI ? \"bg-blue-600\" : \"bg-gray-200 dark:bg-gray-600\"}\n              `}\n            >\n              <span\n                className={`\n                  pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0\n                  transition duration-200 ease-in-out\n                  ${useAI ? \"translate-x-5\" : \"translate-x-0\"}\n                `}\n              />\n            </button>\n          </div>\n        </div>\n\n        {/* Error Display */}\n        {generationState.error && (\n          <div className=\"mb-6 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\n            <div className=\"flex gap-3\">\n              <svg className=\"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <h3 className=\"font-medium text-red-800 dark:text-red-200\">Generation Error</h3>\n                <p className=\"text-sm text-red-700 dark:text-red-300 mt-1\">{generationState.error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Document Types Grid */}\n        <div className=\"grid md:grid-cols-2 gap-4\">\n          {DOCUMENT_TYPES.map((doc) => {\n            const isRecommended = missingDocTypes.has(doc.type);\n            const isHighlighted = highlightType === doc.type;\n            const existingDoc = existingDocs?.find((d) => d.type === doc.type);\n            const isGenerating = generationState.isGenerating && generationState.generatingType === doc.type;\n\n            return (\n              <div\n                key={doc.type}\n                className={`\n                  bg-white dark:bg-gray-800 rounded-lg shadow p-6 border-2 transition-colors\n                  ${isHighlighted\n                    ? \"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800\"\n                    : isRecommended\n                      ? \"border-red-200 dark:border-red-800\"\n                      : \"border-transparent\"\n                  }\n                `}\n              >\n                <div className=\"flex items-start gap-4\">\n                  <div className={`flex-shrink-0 ${isRecommended ? \"text-red-500\" : \"text-blue-500\"}`}>\n                    {doc.icon}\n                  </div>\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 flex-wrap\">\n                      <h3 className=\"font-semibold text-gray-900 dark:text-white\">\n                        {doc.name}\n                      </h3>\n                      {isRecommended && (\n                        <span className=\"text-xs px-2 py-0.5 bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300 rounded-full\">\n                          Recommended\n                        </span>\n                      )}\n                      {existingDoc && (\n                        <span className=\"text-xs px-2 py-0.5 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 rounded-full\">\n                          Draft v{existingDoc.version}\n                        </span>\n                      )}\n                    </div>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                      {doc.description}\n                    </p>\n                    <p className=\"text-xs text-gray-500 dark:text-gray-500 mt-1\">\n                      Est. time: {doc.estimatedTime}\n                    </p>\n                    <div className=\"mt-4 flex gap-2\">\n                      <button\n                        onClick={() => handleGenerate(doc.type)}\n                        disabled={generationState.isGenerating}\n                        className={`\n                          px-4 py-2 rounded-lg text-sm font-medium transition-colors\n                          ${isGenerating\n                            ? \"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 cursor-wait\"\n                            : generationState.isGenerating\n                              ? \"bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed\"\n                              : \"bg-blue-600 hover:bg-blue-700 text-white\"\n                          }\n                        `}\n                      >\n                        {isGenerating ? (\n                          <span className=\"flex items-center gap-2\">\n                            <svg className=\"animate-spin h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\">\n                              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" />\n                              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n                            </svg>\n                            Generating...\n                          </span>\n                        ) : existingDoc ? (\n                          \"Regenerate\"\n                        ) : (\n                          \"Generate\"\n                        )}\n                      </button>\n                      {existingDoc && (\n                        <button\n                          onClick={() => {\n                            setPreviewState({\n                              isOpen: true,\n                              title: existingDoc.title,\n                              content: existingDoc.content,\n                              documentId: existingDoc._id,\n                            });\n                          }}\n                          className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors\"\n                        >\n                          View Draft\n                        </button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n\n        {/* Disclaimer */}\n        <div className=\"mt-8 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\n          <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n            <strong>Disclaimer:</strong> Generated documents are drafts for informational purposes only and do not constitute legal advice.\n            All documents should be reviewed by a licensed attorney in your state before signing or relying upon them.\n          </p>\n        </div>\n      </main>\n\n      {/* Document Preview Modal */}\n      {previewState.isOpen && (\n        <div className=\"fixed inset-0 z-50 overflow-y-auto\">\n          <div className=\"fixed inset-0 bg-black/50\" onClick={() => setPreviewState(prev => ({ ...prev, isOpen: false }))} />\n          <div className=\"relative min-h-screen flex items-center justify-center p-4\">\n            <div className=\"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col\">\n              {/* Modal Header */}\n              <div className=\"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700\">\n                <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                  {previewState.title}\n                </h2>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    onClick={handleCopy}\n                    className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                    title=\"Copy to clipboard\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\" />\n                    </svg>\n                  </button>\n                  <button\n                    onClick={handleDownload}\n                    className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                    title=\"Download as Markdown\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" />\n                    </svg>\n                  </button>\n                  <button\n                    onClick={() => setPreviewState(prev => ({ ...prev, isOpen: false }))}\n                    className=\"p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n              </div>\n\n              {/* Modal Body - Document Content */}\n              <div className=\"flex-1 overflow-y-auto p-6\">\n                <div className=\"prose dark:prose-invert prose-sm max-w-none\">\n                  <ReactMarkdown>{previewState.content}</ReactMarkdown>\n                </div>\n              </div>\n\n              {/* Modal Footer */}\n              <div className=\"flex items-center justify-between px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50 rounded-b-xl\">\n                <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n                  This is a draft document. Please review with an attorney before signing.\n                </p>\n                <div className=\"flex gap-3\">\n                  <button\n                    onClick={() => setPreviewState(prev => ({ ...prev, isOpen: false }))}\n                    className=\"px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    Close\n                  </button>\n                  <button\n                    onClick={handleDownload}\n                    className=\"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium transition-colors\"\n                  >\n                    Download\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}