module.exports=[67906,(e,t,n)=>{(function(){"use strict";var r={function:!0,object:!0},i=r.undefined&&window||this,a=r.object&&n,s=r.object&&t&&!t.nodeType&&t,o=a&&s&&e.g;o&&(o.global===o||o.window===o||o.self===o)&&(i=o);var l=/\bOpera/,u=Object.prototype,c=u.hasOwnProperty,d=u.toString;function f(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=y(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:f(e)}function h(e,t){for(var n in e)c.call(e,n)&&t(e[n],n,e)}function m(e){return null==e?f(e):d.call(e).slice(8,-1)}function p(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function b(e,t){var n=null,r=function(r,i){n=t(n,r,i,e)},i=-1,a=e?e.length:0;if("number"==typeof a&&a>-1&&a<=0x1fffffffffffff)for(;++i<a;)r(e[i],i,e);else h(e,r);return n}function y(e){return String(e).replace(/^ +| +$/g,"")}function v(e){var t,n,r,a,s,o=i,u=e&&"object"==typeof e&&"String"!=m(e);u&&(o=e,e=null);var c=o.navigator||{},f=c.userAgent||"";e||(e=f);var E=u?!!c.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(d.toString()),w="Object",A=u&&o.java?"JavaPackage":m(o.java),N=/\bJava/.test(A)&&o.java,I=N&&m(o.environment)==(u?w:"Environment"),S=N?"a":"α",T=N?"b":"β",R=o.document||{},O=o.operamini||o.opera,x=l.test(x=u&&O?O["[[Class]]"]:m(O))?x:O=null,k=e,C=[],_=null,V=e==f,P=V&&O&&"function"==typeof O.version&&O.version(),D=b([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)}),F=b(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"],function(t,n){return t||RegExp("\\b"+(n.pattern||p(n))+"\\b","i").exec(e)&&(n.label||n)}),U=B([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),L=b({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}},function(t,n,r){return t||(n[U]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(U)]||RegExp("\\b"+p(r)+"(?:\\b|\\w*\\d)","i").exec(e))&&r}),M=b(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "],function(t,n){var r,i,a,s=n.pattern||p(n);return!t&&(t=RegExp("\\b"+s+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(r=t,i=n.label||n,a={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"},s&&i&&/^Win/i.test(r)&&!/^Windows Phone /i.test(r)&&(a=a[/[\d.]+$/.exec(r)])&&(r="Windows "+a),r=String(r),s&&i&&(r=r.replace(RegExp(s,"i"),i)),t=r=g(r.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])),t});function B(t){return b(t,function(t,n){var r=n.pattern||p(n);return!t&&(t=RegExp("\\b"+r+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+r+" *\\w+-[\\w]*","i").exec(e)||RegExp("\\b"+r+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(r,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=g(t[0].replace(RegExp(r,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t})}function j(t){return b(t,function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null})}if(D&&(D=[D]),/\bAndroid\b/.test(M)&&!U&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(U=y(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),L&&!U?U=B([L]):L&&U&&(U=U.replace(RegExp("^("+p(L)+")[-_.\\s]","i"),L+" ").replace(RegExp("^("+p(L)+")[-_.]?(\\w)","i"),L+" $2")),(a=/\bGoogle TV\b/.exec(U))&&(U=a[0]),/\bSimulator\b/i.test(e)&&(U=(U?U+" ":"")+"Simulator"),"Opera Mini"==F&&/\bOPiOS\b/.test(e)&&C.push("running in Turbo/Uncompressed mode"),"IE"==F&&/\blike iPhone OS\b/.test(e)?(L=(a=v(e.replace(/like iPhone OS/,""))).manufacturer,U=a.product):/^iP/.test(U)?(F||(F="Safari"),M="iOS"+((a=/ OS ([\d_]+)/i.exec(e))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==F&&/^Linux\b/i.test(M)?M="Kubuntu":L&&"Google"!=L&&(/Chrome/.test(F)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(U))||/\bAndroid\b/.test(M)&&/^Chrome/.test(F)&&/\bVersion\//i.test(e)?(F="Android Browser",M=/\bAndroid\b/.test(M)?M:"Android"):"Silk"==F?(/\bMobi/i.test(e)||(M="Android",C.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&C.unshift("accelerated")):"UC Browser"==F&&/\bUCWEB\b/.test(e)?C.push("speed mode"):"PaleMoon"==F&&(a=/\bFirefox\/([\d.]+)\b/.exec(e))?C.push("identifying as Firefox "+a[1]):"Firefox"==F&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(M||(M="Firefox OS"),U||(U=a[1])):!F||(a=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(F))?(F&&!U&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(a+"/")+8))&&(F=null),(a=U||L||M)&&(U||L||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(M))&&(F=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(M)?M:a)+" Browser")):"Electron"==F&&(a=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&C.push("Chromium "+a),P||(P=j(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",p(F),"(?:Firefox|Minefield|NetFront)"])),(a="iCab"==D&&parseFloat(P)>3&&"WebKit"||/\bOpera\b/.test(F)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(D)&&"WebKit"||!D&&/\bMSIE\b/i.test(e)&&("Mac OS"==M?"Tasman":"Trident")||"WebKit"==D&&/\bPlayStation\b(?! Vita\b)/i.test(F)&&"NetFront")&&(D=[a]),"IE"==F&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(F+=" Mobile",M="Windows Phone "+(/\+$/.test(a)?a:a+".x"),C.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(F="IE Mobile",M="Windows Phone 8.x",C.unshift("desktop mode"),P||(P=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=F&&"Trident"==D&&(a=/\brv:([\d.]+)/.exec(e))&&(F&&C.push("identifying as "+F+(P?" "+P:"")),F="IE",P=a[1]),V){if(n="global",r=null!=(t=o)?typeof t[n]:"number",/^(?:boolean|number|string|undefined)$/.test(r)||"object"==r&&!t[n])m(a=o.runtime)==(u?w:"ScriptBridgingProxyObject")?(F="Adobe AIR",M=a.flash.system.Capabilities.os):m(a=o.phantom)==(u?w:"RuntimeObject")?(F="PhantomJS",P=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof R.documentMode&&(a=/\bTrident\/(\d+)/i.exec(e))?(P=[P,R.documentMode],(a=+a[1]+4)!=P[1]&&(C.push("IE "+P[1]+" mode"),D&&(D[1]=""),P[1]=a),P="IE"==F?String(P[1].toFixed(1)):P[0]):"number"==typeof R.documentMode&&/^(?:Chrome|Firefox)\b/.test(F)&&(C.push("masking as "+F+" "+P),F="IE",P="11.0",D=["Trident"],M="Windows");else if(N&&(k=(a=N.lang.System).getProperty("os.arch"),M=M||a.getProperty("os.name")+" "+a.getProperty("os.version")),I){try{P=o.require("ringo/engine").version.join("."),F="RingoJS"}catch(e){(a=o.system)&&a.global.system==o.system&&(F="Narwhal",M||(M=a[0].os||null))}F||(F="Rhino")}else"object"==typeof o.process&&!o.process.browser&&(a=o.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(C.push("Node "+a.versions.node),F="Electron",P=a.versions.electron):"string"==typeof a.versions.nw&&(C.push("Chromium "+P,"Node "+a.versions.node),F="NW.js",P=a.versions.nw)),F||(F="Node.js",k=a.arch,M=a.platform,P=(P=/[\d.]+/.exec(a.version))?P[0]:null));M=M&&g(M)}if(P&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(P)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(V&&c.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(_=/b/i.test(a)?"beta":"alpha",P=P.replace(RegExp(a+"\\+?$"),"")+("beta"==_?T:S)+(/\d+\+?/.exec(a)||"")),"Fennec"==F||"Firefox"==F&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(M))F="Firefox Mobile";else if("Maxthon"==F&&P)P=P.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(U))"Xbox 360"==U&&(M=null),"Xbox 360"==U&&/\bIEMobile\b/.test(e)&&C.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(F)||F&&!U&&!/Browser|Mobi/.test(F))&&("Windows CE"==M||/Mobi/i.test(e)))F+=" Mobile";else if("IE"==F&&V)try{null===o.external&&C.unshift("platform preview")}catch(e){C.unshift("embedded")}else(/\bBlackBerry\b/.test(U)||/\bBB10\b/.test(e))&&(a=(RegExp(U.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||P)?(M=((a=[a,/BB10/.test(e)])[1]?(U=null,L="BlackBerry"):"Device Software")+" "+a[0],P=null):this!=h&&"Wii"!=U&&(V&&O||/Opera/.test(F)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==F&&/\bOS X (?:\d+\.){2,}/.test(M)||"IE"==F&&(M&&!/^Win/.test(M)&&P>5.5||/\bWindows XP\b/.test(M)&&P>8||8==P&&!/\bTrident\b/.test(e)))&&!l.test(a=v.call(h,e.replace(l,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),l.test(F)?(/\bIE\b/.test(a)&&"Mac OS"==M&&(M=null),a="identify"+a):(a="mask"+a,F=x?g(x.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(M=null),V||(P=null)),D=["Presto"],C.push(a));(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==F&&"+"==a[1].slice(-1)?(F="WebKit Nightly",_="alpha",P=a[1].slice(0,-1)):(P==a[1]||P==(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1]))&&(P=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==D&&(D=["Blink"]),V&&(E||a[1])?(D&&(D[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=D?"27":"28")):(D&&(D[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),D&&(D[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==F&&(!P||parseInt(P)>45)?P=a:"Chrome"==F&&/\bHeadlessChrome/i.test(e)&&C.unshift("headless")),"Opera"==F&&(a=/\bzbov|zvav$/.exec(M))?(F+=" ",C.unshift("desktop mode"),"zvav"==a?(F+="Mini",P=null):F+="Mobile",M=M.replace(RegExp(" *"+a+"$"),"")):"Safari"==F&&/\bChrome\b/.exec(D&&D[1])?(C.unshift("desktop mode"),F="Chrome Mobile",P=null,/\bOS X\b/.test(M)?(L="Apple",M="iOS 4.3+"):M=null):/\bSRWare Iron\b/.test(F)&&!P&&(P=j("Chrome")),P&&0==P.indexOf(a=/[\d.]+$/.exec(M))&&e.indexOf("/"+a+"-")>-1&&(M=y(M.replace(a,""))),M&&-1!=M.indexOf(F)&&!RegExp(F+" OS").test(M)&&(M=M.replace(RegExp(" *"+p(F)+" *"),"")),D&&!/\b(?:Avant|Nook)\b/.test(F)&&(/Browser|Lunascape|Maxthon/.test(F)||"Safari"!=F&&/^iOS/.test(M)&&/\bSafari\b/.test(D[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(F)&&D[1])&&(a=D[D.length-1])&&C.push(a),C.length&&(C=["("+C.join("; ")+")"]),L&&U&&0>U.indexOf(L)&&C.push("on "+L),U&&C.push((/^on /.test(C[C.length-1])?"":"on ")+U),M&&(s=(a=/ ([\d.+]+)$/.exec(M))&&"/"==M.charAt(M.length-a[0].length-1),M={architecture:32,family:a&&!s?M.replace(a[0],""):M,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!s?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(k))&&!/\bi686\b/i.test(k)?(M&&(M.architecture=64,M.family=M.family.replace(RegExp(" *"+a),"")),F&&(/\bWOW64\b/i.test(e)||V&&/\w(?:86|32)$/.test(c.cpuClass||c.platform)&&!/\bWin64; x64\b/i.test(e))&&C.unshift("32-bit")):M&&/^OS X/.test(M.family)&&"Chrome"==F&&parseFloat(P)>=39&&(M.architecture=64),e||(e=null);var G={};return G.description=e,G.layout=D&&D[0],G.manufacturer=L,G.name=F,G.prerelease=_,G.product=U,G.ua=e,G.version=F&&P,G.os=M||{architecture:null,family:null,version:null,toString:function(){return"null"}},G.parse=v,G.toString=function(){return this.description||""},G.version&&C.unshift(P),G.name&&C.unshift(F),M&&F&&!(M==String(M).split(" ")[0]&&(M==F.split(" ")[0]||U))&&C.push(U?"("+M+")":"on "+M),C.length&&(G.description=C.join(" ")),G}var E=v();if("function"==typeof define&&"object"==typeof define.amd&&define.amd)i.platform=E,e.r,void 0!==E&&e.v(E);else a&&s?h(E,function(e,t){a[t]=e}):i.platform=E}).call(e.e)},12842,(e,t,n)=>{"use strict";let r=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,a=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,s=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,o=new Map([["n","\n"],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1b"],["a","\x07"]]);function l(e){let t="u"===e[0],n="{"===e[1];return t&&!n&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):t&&n?String.fromCodePoint(parseInt(e.slice(2,-1),16)):o.get(e)||e}function u(e,t){let n={};for(let e of t)for(let t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(let[e,t]of Object.entries(n))if(Array.isArray(t)){if(!(e in r))throw Error(`Unknown Chalk style: ${e}`);r=t.length>0?r[e](...t):r[e]}return r}t.exports=(e,t)=>{let n=[],o=[],c=[];if(t.replace(r,(t,r,d,f,g,h)=>{if(r)c.push(l(r));else if(f){let t=c.join("");c=[],o.push(0===n.length?t:u(e,n)(t)),n.push({inverse:d,styles:function(e){let t;i.lastIndex=0;let n=[];for(;null!==(t=i.exec(e));){let e=t[1];if(t[2]){let r=function(e,t){let n,r=[];for(let i of t.trim().split(/\s*,\s*/g)){let t=Number(i);if(Number.isNaN(t))if(n=i.match(a))r.push(n[2].replace(s,(e,t,n)=>t?l(t):n));else throw Error(`Invalid Chalk template style argument: ${i} (in style '${e}')`);else r.push(t)}return r}(e,t[2]);n.push([e].concat(r))}else n.push([e])}return n}(f)})}else if(g){if(0===n.length)throw Error("Found extraneous } in Chalk template literal");o.push(u(e,n)(c.join(""))),c=[],n.pop()}else c.push(h)}),o.push(c.join("")),n.length>0)throw Error(`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`);return o.join("")}},77235,(e,t,n)=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},49779,(e,t,n)=>{let r=e.r(77235),i={};for(let e of Object.keys(r))i[r[e]]=e;let a={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(let e of(t.exports=a,Object.keys(a))){if(!("channels"in a[e]))throw Error("missing channels property: "+e);if(!("labels"in a[e]))throw Error("missing channel labels property: "+e);if(a[e].labels.length!==a[e].channels)throw Error("channel and label counts mismatch: "+e);let{channels:t,labels:n}=a[e];delete a[e].channels,delete a[e].labels,Object.defineProperty(a[e],"channels",{value:t}),Object.defineProperty(a[e],"labels",{value:n})}a.rgb.hsl=function(e){let t,n=e[0]/255,r=e[1]/255,i=e[2]/255,a=Math.min(n,r,i),s=Math.max(n,r,i),o=s-a;s===a?t=0:n===s?t=(r-i)/o:r===s?t=2+(i-n)/o:i===s&&(t=4+(n-r)/o),(t=Math.min(60*t,360))<0&&(t+=360);let l=(a+s)/2;return[t,100*(s===a?0:l<=.5?o/(s+a):o/(2-s-a)),100*l]},a.rgb.hsv=function(e){let t,n,r,i,a,s=e[0]/255,o=e[1]/255,l=e[2]/255,u=Math.max(s,o,l),c=u-Math.min(s,o,l),d=function(e){return(u-e)/6/c+.5};return 0===c?(i=0,a=0):(a=c/u,t=d(s),n=d(o),r=d(l),s===u?i=r-n:o===u?i=1/3+t-r:l===u&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*a,100*u]},a.rgb.hwb=function(e){let t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],1/255*Math.min(t,Math.min(n,r))*100,100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-n,1-r);return[100*((1-t-i)/(1-i)||0),100*((1-n-i)/(1-i)||0),100*((1-r-i)/(1-i)||0),100*i]},a.rgb.keyword=function(e){let t,n=i[e];if(n)return n;let a=1/0;for(let n of Object.keys(r)){let i=r[n],s=(e[0]-i[0])**2+(e[1]-i[1])**2+(e[2]-i[2])**2;s<a&&(a=s,t=n)}return t},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){let t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?((t+.055)/1.055)**2.4:t/12.92)+.3576*(n=n>.04045?((n+.055)/1.055)**2.4:n/12.92)+.1805*(r=r>.04045?((r+.055)/1.055)**2.4:r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){let t=a.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return n/=95.047,r/=100,i/=108.883,[116*(r=r>.008856?r**(1/3):7.787*r+16/116)-16,500*((n=n>.008856?n**(1/3):7.787*n+16/116)-r),200*(r-(i=i>.008856?i**(1/3):7.787*i+16/116))]},a.hsl.rgb=function(e){let t,n,r,i=e[0]/360,a=e[1]/100,s=e[2]/100;if(0===a)return[r=255*s,r,r];t=s<.5?s*(1+a):s+a-s*a;let o=2*s-t,l=[0,0,0];for(let e=0;e<3;e++)(n=i+-(1/3*(e-1)))<0&&n++,n>1&&n--,r=6*n<1?o+(t-o)*6*n:2*n<1?t:3*n<2?o+(t-o)*(2/3-n)*6:o,l[e]=255*r;return l},a.hsl.hsv=function(e){let t=e[0],n=e[1]/100,r=e[2]/100,i=n,a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,i*=a<=1?a:2-a;let s=(r+n)/2;return[t,100*(0===r?2*i/(a+i):2*n/(r+n)),100*s]},a.hsv.rgb=function(e){let t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,a=t-Math.floor(t),s=255*r*(1-n),o=255*r*(1-n*a),l=255*r*(1-n*(1-a));switch(r*=255,i){case 0:return[r,l,s];case 1:return[o,r,s];case 2:return[s,r,l];case 3:return[s,o,r];case 4:return[l,s,r];case 5:return[r,s,o]}},a.hsv.hsl=function(e){let t,n,r=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);n=(2-i)*a;let o=(2-i)*s;return[r,100*(t=(t=i*s/(o<=1?o:2-o))||0),100*(n/=2)]},a.hwb.rgb=function(e){let t,n,r,i,a=e[0]/360,s=e[1]/100,o=e[2]/100,l=s+o;l>1&&(s/=l,o/=l);let u=Math.floor(6*a),c=1-o;t=6*a-u,(1&u)!=0&&(t=1-t);let d=s+t*(c-s);switch(u){default:case 6:case 0:n=c,r=d,i=s;break;case 1:n=d,r=c,i=s;break;case 2:n=s,r=c,i=d;break;case 3:n=s,r=d,i=c;break;case 4:n=d,r=s,i=c;break;case 5:n=c,r=s,i=d}return[255*n,255*r,255*i]},a.cmyk.rgb=function(e){let t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(e){let t,n,r,i=e[0]/100,a=e[1]/100,s=e[2]/100;return t=(t=3.2406*i+-1.5372*a+-.4986*s)>.0031308?1.055*t**(1/2.4)-.055:12.92*t,n=(n=-.9689*i+1.8758*a+.0415*s)>.0031308?1.055*n**(1/2.4)-.055:12.92*n,r=(r=.0557*i+-.204*a+1.057*s)>.0031308?1.055*r**(1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];return t/=95.047,n/=100,r/=108.883,[116*(n=n>.008856?n**(1/3):7.787*n+16/116)-16,500*((t=t>.008856?t**(1/3):7.787*t+16/116)-n),200*(n-(r=r>.008856?r**(1/3):7.787*r+16/116))]},a.lab.xyz=function(e){let t,n,r,i=e[0],a=e[1],s=e[2];t=a/500+(n=(i+16)/116),r=n-s/200;let o=n**3,l=t**3,u=r**3;return n=(o>.008856?o:(n-16/116)/7.787)*100,[t=(l>.008856?l:(t-16/116)/7.787)*95.047,n,r=(u>.008856?u:(r-16/116)/7.787)*108.883]},a.lab.lch=function(e){let t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},a.lch.lab=function(e){let t=e[0],n=e[1],r=e[2]/360*2*Math.PI;return[t,n*Math.cos(r),n*Math.sin(r)]},a.rgb.ansi16=function(e,t=null){let[n,r,i]=e,s=null===t?a.rgb.hsv(e)[2]:t;if(0===(s=Math.round(s/50)))return 30;let o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return 2===s&&(o+=60),o},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){let t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){let t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];let n=(~~(e>50)+1)*.5;return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){let t;if(e>=232){let t=(e-232)*10+8;return[t,t,t]}return[Math.floor((e-=16)/36)/5*255,Math.floor((t=e%36)/6)/5*255,t%6/5*255]},a.rgb.hex=function(e){let t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let n=t[0];3===t[0].length&&(n=n.split("").map(e=>e+e).join(""));let r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){let t,n=e[0]/255,r=e[1]/255,i=e[2]/255,a=Math.max(Math.max(n,r),i),s=Math.min(Math.min(n,r),i),o=a-s;return t=o<1?s/(1-o):0,[360*((o<=0?0:a===n?(r-i)/o%6:a===r?2+(i-n)/o:4+(n-r)/o)/6%1),100*o,100*t]},a.hsl.hcg=function(e){let t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n),i=0;return r<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},a.hsv.hcg=function(e){let t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.hcg.rgb=function(e){let t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];let i=[0,0,0],a=t%1*6,s=a%1,o=1-s,l=0;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=o,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=o,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=o}return l=(1-n)*r,[(n*i[0]+l)*255,(n*i[1]+l)*255,(n*i[2]+l)*255]},a.hcg.hsv=function(e){let t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){let t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){let t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],(n-t)*100,(1-n)*100]},a.hwb.hcg=function(e){let t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=function(e){return[0,0,e[0]]},a.gray.hsv=a.gray.hsl,a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){let t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},61443,(e,t,n)=>{let r=e.r(49779);t.exports=function(e){let t=function(e){let t=function(){let e={},t=Object.keys(r);for(let n=t.length,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;){let e=n.pop(),i=Object.keys(r[e]);for(let r=i.length,a=0;a<r;a++){let r=i[a],s=t[r];-1===s.distance&&(s.distance=t[e].distance+1,s.parent=e,n.unshift(r))}}return t}(e),n={},i=Object.keys(t);for(let e=i.length,a=0;a<e;a++){let e=i[a];null!==t[e].parent&&(n[e]=function(e,t){let n=[t[e].parent,e],i=r[t[e].parent][e],a=t[e].parent;for(;t[a].parent;)n.unshift(t[a].parent),i=function(e,t){return function(n){return t(e(n))}}(r[t[a].parent][a],i),a=t[a].parent;return i.conversion=n,i}(e,t))}return n}},79559,(e,t,n)=>{let r=e.r(49779),i=e.r(61443),a={};Object.keys(r).forEach(e=>{a[e]={},Object.defineProperty(a[e],"channels",{value:r[e].channels}),Object.defineProperty(a[e],"labels",{value:r[e].labels});let t=i(e);Object.keys(t).forEach(n=>{let r,i,s=t[n];a[e][n]=(r=function(...e){let t=e[0];if(null==t)return t;t.length>1&&(e=t);let n=s(e);if("object"==typeof n)for(let e=n.length,t=0;t<e;t++)n[t]=Math.round(n[t]);return n},"conversion"in s&&(r.conversion=s.conversion),r),a[e][n].raw=(i=function(...e){let t=e[0];return null==t?t:(t.length>1&&(e=t),s(e))},"conversion"in s&&(i.conversion=s.conversion),i)})}),t.exports=a},4567,(e,t,n)=>{"use strict";let r,i=(e,t)=>(...n)=>{let r=e(...n);return`\u001B[${r+t}m`},a=(e,t)=>(...n)=>{let r=e(...n);return`\u001B[${38+t};5;${r}m`},s=(e,t)=>(...n)=>{let r=e(...n);return`\u001B[${38+t};2;${r[0]};${r[1]};${r[2]}m`},o=e=>e,l=(e,t,n)=>[e,t,n],u=(e,t,n)=>{Object.defineProperty(e,t,{get:()=>{let r=n();return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})},c=(t,n,i,a)=>{void 0===r&&(r=e.r(79559));let s=10*!!a,o={};for(let[e,a]of Object.entries(r)){let r="ansi16"===e?"ansi":e;e===n?o[r]=t(i,s):"object"==typeof a&&(o[r]=t(a[n],s))}return o};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};for(let[n,r]of(t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright,Object.entries(t))){for(let[n,i]of Object.entries(r))t[n]={open:`\u001B[${i[0]}m`,close:`\u001B[${i[1]}m`},r[n]=t[n],e.set(i[0],i[1]);Object.defineProperty(t,n,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1b[39m",t.bgColor.close="\x1b[49m",u(t.color,"ansi",()=>c(i,"ansi16",o,!1)),u(t.color,"ansi256",()=>c(a,"ansi256",o,!1)),u(t.color,"ansi16m",()=>c(s,"rgb",l,!1)),u(t.bgColor,"ansi",()=>c(i,"ansi16",o,!0)),u(t.bgColor,"ansi256",()=>c(a,"ansi256",o,!0)),u(t.bgColor,"ansi16m",()=>c(s,"rgb",l,!0)),t}})},46786,(e,t,n)=>{t.exports=e.x("os",()=>require("os"))},70722,(e,t,n)=>{t.exports=e.x("tty",()=>require("tty"))},55225,(e,t,n)=>{"use strict";t.exports=(e,t=process.argv)=>{let n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return -1!==r&&(-1===i||r<i)}},81042,(e,t,n)=>{"use strict";let r;e.r(46786);let i=e.r(70722),a=e.r(55225),{env:s}=process;function o(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function l(e,t){if(0===r)return 0;if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2;if(e&&!t&&void 0===r)return 0;let n=r||0;if("dumb"===s.TERM)return n;if("CI"in s)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(e=>e in s)||"codeship"===s.CI_NAME?1:n;if("TEAMCITY_VERSION"in s)return+!!/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(s.TEAMCITY_VERSION);if("truecolor"===s.COLORTERM)return 3;if("TERM_PROGRAM"in s){let e=parseInt((s.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(s.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(s.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(s.TERM)||"COLORTERM"in s?1:n}a("no-color")||a("no-colors")||a("color=false")||a("color=never")?r=0:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(r=1),"FORCE_COLOR"in s&&(r="true"===s.FORCE_COLOR?1:"false"===s.FORCE_COLOR?0:0===s.FORCE_COLOR.length?1:Math.min(parseInt(s.FORCE_COLOR,10),3)),t.exports={supportsColor:function(e){return o(l(e,e&&e.isTTY))},stdout:o(l(!0,i.isatty(1))),stderr:o(l(!0,i.isatty(2)))}},81018,(e,t,n)=>{"use strict";t.exports={stringReplaceAll:(e,t,n)=>{let r=e.indexOf(t);if(-1===r)return e;let i=t.length,a=0,s="";do s+=e.substr(a,r-a)+t+n,a=r+i,r=e.indexOf(t,a);while(-1!==r)return s+e.substr(a)},stringEncaseCRLFWithFirstIndex:(e,t,n,r)=>{let i=0,a="";do{let s="\r"===e[r-1];a+=e.substr(i,(s?r-1:r)-i)+t+(s?"\r\n":"\n")+n,i=r+1,r=e.indexOf("\n",i)}while(-1!==r)return a+e.substr(i)}}},29166,(e,t,n)=>{"use strict";let r,i=e.r(4567),{stdout:a,stderr:s}=e.r(81042),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:l}=e.r(81018),{isArray:u}=Array,c=["ansi","ansi","ansi256","ansi16m"],d=Object.create(null);class f{constructor(e){return g(e)}}let g=e=>{let t={};return((e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw Error("The `level` option should be an integer from 0 to 3");let n=a?a.level:0;e.level=void 0===t.level?n:t.level})(t,e),t.template=(...e)=>E(t.template,...e),Object.setPrototypeOf(t,h.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=f,t.template};function h(e){return g(e)}for(let[e,t]of Object.entries(i))d[e]={get(){let n=y(this,b(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:n}),n}};d.visible={get(){let e=y(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};let m=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let e of m)d[e]={get(){let{level:t}=this;return function(...n){return y(this,b(i.color[c[t]][e](...n),i.color.close,this._styler),this._isEmpty)}}};for(let e of m)d["bg"+e[0].toUpperCase()+e.slice(1)]={get(){let{level:t}=this;return function(...n){return y(this,b(i.bgColor[c[t]][e](...n),i.bgColor.close,this._styler),this._isEmpty)}}};let p=Object.defineProperties(()=>{},{...d,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),b=(e,t,n)=>{let r,i;return void 0===n?(r=e,i=t):(r=n.openAll+e,i=t+n.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:n}},y=(e,t,n)=>{let r=(...e)=>u(e[0])&&u(e[0].raw)?v(r,E(r,...e)):v(r,1===e.length?""+e[0]:e.join(" "));return Object.setPrototypeOf(r,p),r._generator=e,r._styler=t,r._isEmpty=n,r},v=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let n=e._styler;if(void 0===n)return t;let{openAll:r,closeAll:i}=n;if(-1!==t.indexOf("\x1b"))for(;void 0!==n;)t=o(t,n.close,n.open),n=n.parent;let a=t.indexOf("\n");return -1!==a&&(t=l(t,i,r,a)),r+t+i},E=(t,...n)=>{let[i]=n;if(!u(i)||!u(i.raw))return n.join(" ");let a=n.slice(1),s=[i.raw[0]];for(let e=1;e<i.length;e++)s.push(String(a[e-1]).replace(/[{}\\]/g,"\\$&"),String(i.raw[e]));return void 0===r&&(r=e.r(12842)),r(t,s.join(""))};Object.defineProperties(h.prototype,d);let w=g(void 0);w.supportsColor=a,w.stderr=g({level:s?s.level:0}),w.stderr.supportsColor=s,t.exports=w},68130,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Argument=void 0,n.Argument=class{constructor(e,t){this.value=e,this.range=t}toString(){return this.value}getRange(){return this.range}getValue(){return this.value}isAfter(e){return!(this.range.end.line<e.line)&&(this.range.start.line>e.line||this.range.start.character>e.character)}isBefore(e){return this.range.start.line<e.line||!(this.range.end.line>e.line)&&this.range.end.character<e.character}}},10736,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JSONArgument=void 0;let r=e.r(68130);class i extends r.Argument{constructor(e,t,n){super(e,t),this.jsonRange=n}getJSONRange(){return this.jsonRange}getJSONValue(){let e=super.getValue();return e.substring(1,e.length-1)}}n.JSONArgument=i},18405,(e,t,n)=>{var r=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextDocument=t.EOL=t.WorkspaceFolder=t.InlineCompletionContext=t.SelectedCompletionInfo=t.InlineCompletionTriggerKind=t.InlineCompletionList=t.InlineCompletionItem=t.StringValue=t.InlayHint=t.InlayHintLabelPart=t.InlayHintKind=t.InlineValueContext=t.InlineValueEvaluatableExpression=t.InlineValueVariableLookup=t.InlineValueText=t.SemanticTokens=t.SemanticTokenModifiers=t.SemanticTokenTypes=t.SelectionRange=t.DocumentLink=t.FormattingOptions=t.CodeLens=t.CodeAction=t.CodeActionContext=t.CodeActionTriggerKind=t.CodeActionKind=t.DocumentSymbol=t.WorkspaceSymbol=t.SymbolInformation=t.SymbolTag=t.SymbolKind=t.DocumentHighlight=t.DocumentHighlightKind=t.SignatureInformation=t.ParameterInformation=t.Hover=t.MarkedString=t.CompletionList=t.CompletionItem=t.CompletionItemLabelDetails=t.InsertTextMode=t.InsertReplaceEdit=t.CompletionItemTag=t.InsertTextFormat=t.CompletionItemKind=t.MarkupContent=t.MarkupKind=t.TextDocumentItem=t.OptionalVersionedTextDocumentIdentifier=t.VersionedTextDocumentIdentifier=t.TextDocumentIdentifier=t.WorkspaceChange=t.WorkspaceEdit=t.DeleteFile=t.RenameFile=t.CreateFile=t.TextDocumentEdit=t.AnnotatedTextEdit=t.ChangeAnnotationIdentifier=t.ChangeAnnotation=t.TextEdit=t.Command=t.Diagnostic=t.CodeDescription=t.DiagnosticTag=t.DiagnosticSeverity=t.DiagnosticRelatedInformation=t.FoldingRange=t.FoldingRangeKind=t.ColorPresentation=t.ColorInformation=t.Color=t.LocationLink=t.Location=t.Range=t.Position=t.uinteger=t.integer=t.URI=t.DocumentUri=void 0,(ea||(t.DocumentUri=ea={})).is=function(e){return"string"==typeof e},(es||(t.URI=es={})).is=function(e){return"string"==typeof e},(F=eo||(t.integer=eo={})).MIN_VALUE=-0x80000000,F.MAX_VALUE=0x7fffffff,F.is=function(e){return"number"==typeof e&&F.MIN_VALUE<=e&&e<=F.MAX_VALUE},(U=el||(t.uinteger=el={})).MIN_VALUE=0,U.MAX_VALUE=0x7fffffff,U.is=function(e){return"number"==typeof e&&U.MIN_VALUE<=e&&e<=U.MAX_VALUE},(L=eu||(t.Position=eu={})).create=function(e,t){return e===Number.MAX_VALUE&&(e=el.MAX_VALUE),t===Number.MAX_VALUE&&(t=el.MAX_VALUE),{line:e,character:t}},L.is=function(e){return tE.objectLiteral(e)&&tE.uinteger(e.line)&&tE.uinteger(e.character)},(M=ec||(t.Range=ec={})).create=function(e,t,n,r){if(tE.uinteger(e)&&tE.uinteger(t)&&tE.uinteger(n)&&tE.uinteger(r))return{start:eu.create(e,t),end:eu.create(n,r)};if(eu.is(e)&&eu.is(t))return{start:e,end:t};throw Error("Range#create called with invalid arguments[".concat(e,", ").concat(t,", ").concat(n,", ").concat(r,"]"))},M.is=function(e){return tE.objectLiteral(e)&&eu.is(e.start)&&eu.is(e.end)},(B=ed||(t.Location=ed={})).create=function(e,t){return{uri:e,range:t}},B.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&(tE.string(e.uri)||tE.undefined(e.uri))},(j=ef||(t.LocationLink=ef={})).create=function(e,t,n,r){return{targetUri:e,targetRange:t,targetSelectionRange:n,originSelectionRange:r}},j.is=function(e){return tE.objectLiteral(e)&&ec.is(e.targetRange)&&tE.string(e.targetUri)&&ec.is(e.targetSelectionRange)&&(ec.is(e.originSelectionRange)||tE.undefined(e.originSelectionRange))},(G=eg||(t.Color=eg={})).create=function(e,t,n,r){return{red:e,green:t,blue:n,alpha:r}},G.is=function(e){return tE.objectLiteral(e)&&tE.numberRange(e.red,0,1)&&tE.numberRange(e.green,0,1)&&tE.numberRange(e.blue,0,1)&&tE.numberRange(e.alpha,0,1)},($=eh||(t.ColorInformation=eh={})).create=function(e,t){return{range:e,color:t}},$.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&eg.is(e.color)},(W=em||(t.ColorPresentation=em={})).create=function(e,t,n){return{label:e,textEdit:t,additionalTextEdits:n}},W.is=function(e){return tE.objectLiteral(e)&&tE.string(e.label)&&(tE.undefined(e.textEdit)||eI.is(e))&&(tE.undefined(e.additionalTextEdits)||tE.typedArray(e.additionalTextEdits,eI.is))},(K=ep||(t.FoldingRangeKind=ep={})).Comment="comment",K.Imports="imports",K.Region="region",(X=eb||(t.FoldingRange=eb={})).create=function(e,t,n,r,i,a){var s={startLine:e,endLine:t};return tE.defined(n)&&(s.startCharacter=n),tE.defined(r)&&(s.endCharacter=r),tE.defined(i)&&(s.kind=i),tE.defined(a)&&(s.collapsedText=a),s},X.is=function(e){return tE.objectLiteral(e)&&tE.uinteger(e.startLine)&&tE.uinteger(e.startLine)&&(tE.undefined(e.startCharacter)||tE.uinteger(e.startCharacter))&&(tE.undefined(e.endCharacter)||tE.uinteger(e.endCharacter))&&(tE.undefined(e.kind)||tE.string(e.kind))},(Y=ey||(t.DiagnosticRelatedInformation=ey={})).create=function(e,t){return{location:e,message:t}},Y.is=function(e){return tE.defined(e)&&ed.is(e.location)&&tE.string(e.message)},(Z=ev||(t.DiagnosticSeverity=ev={})).Error=1,Z.Warning=2,Z.Information=3,Z.Hint=4,(J=eE||(t.DiagnosticTag=eE={})).Unnecessary=1,J.Deprecated=2,(ew||(t.CodeDescription=ew={})).is=function(e){return tE.objectLiteral(e)&&tE.string(e.href)},(H=eA||(t.Diagnostic=eA={})).create=function(e,t,n,r,i,a){var s={range:e,message:t};return tE.defined(n)&&(s.severity=n),tE.defined(r)&&(s.code=r),tE.defined(i)&&(s.source=i),tE.defined(a)&&(s.relatedInformation=a),s},H.is=function(e){var t;return tE.defined(e)&&ec.is(e.range)&&tE.string(e.message)&&(tE.number(e.severity)||tE.undefined(e.severity))&&(tE.integer(e.code)||tE.string(e.code)||tE.undefined(e.code))&&(tE.undefined(e.codeDescription)||tE.string(null==(t=e.codeDescription)?void 0:t.href))&&(tE.string(e.source)||tE.undefined(e.source))&&(tE.undefined(e.relatedInformation)||tE.typedArray(e.relatedInformation,ey.is))},(z=eN||(t.Command=eN={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={title:e,command:t};return tE.defined(n)&&n.length>0&&(i.arguments=n),i},z.is=function(e){return tE.defined(e)&&tE.string(e.title)&&tE.string(e.command)},(q=eI||(t.TextEdit=eI={})).replace=function(e,t){return{range:e,newText:t}},q.insert=function(e,t){return{range:{start:e,end:e},newText:t}},q.del=function(e){return{range:e,newText:""}},q.is=function(e){return tE.objectLiteral(e)&&tE.string(e.newText)&&ec.is(e.range)},(Q=eS||(t.ChangeAnnotation=eS={})).create=function(e,t,n){var r={label:e};return void 0!==t&&(r.needsConfirmation=t),void 0!==n&&(r.description=n),r},Q.is=function(e){return tE.objectLiteral(e)&&tE.string(e.label)&&(tE.boolean(e.needsConfirmation)||void 0===e.needsConfirmation)&&(tE.string(e.description)||void 0===e.description)},(eT||(t.ChangeAnnotationIdentifier=eT={})).is=function(e){return tE.string(e)},(ee=eR||(t.AnnotatedTextEdit=eR={})).replace=function(e,t,n){return{range:e,newText:t,annotationId:n}},ee.insert=function(e,t,n){return{range:{start:e,end:e},newText:t,annotationId:n}},ee.del=function(e,t){return{range:e,newText:"",annotationId:t}},ee.is=function(e){return eI.is(e)&&(eS.is(e.annotationId)||eT.is(e.annotationId))},(et=eO||(t.TextDocumentEdit=eO={})).create=function(e,t){return{textDocument:e,edits:t}},et.is=function(e){return tE.defined(e)&&eD.is(e.textDocument)&&Array.isArray(e.edits)},(en=ex||(t.CreateFile=ex={})).create=function(e,t,n){var r={kind:"create",uri:e};return void 0!==t&&(void 0!==t.overwrite||void 0!==t.ignoreIfExists)&&(r.options=t),void 0!==n&&(r.annotationId=n),r},en.is=function(e){return e&&"create"===e.kind&&tE.string(e.uri)&&(void 0===e.options||(void 0===e.options.overwrite||tE.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tE.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eT.is(e.annotationId))},(er=ek||(t.RenameFile=ek={})).create=function(e,t,n,r){var i={kind:"rename",oldUri:e,newUri:t};return void 0!==n&&(void 0!==n.overwrite||void 0!==n.ignoreIfExists)&&(i.options=n),void 0!==r&&(i.annotationId=r),i},er.is=function(e){return e&&"rename"===e.kind&&tE.string(e.oldUri)&&tE.string(e.newUri)&&(void 0===e.options||(void 0===e.options.overwrite||tE.boolean(e.options.overwrite))&&(void 0===e.options.ignoreIfExists||tE.boolean(e.options.ignoreIfExists)))&&(void 0===e.annotationId||eT.is(e.annotationId))},(ei=eC||(t.DeleteFile=eC={})).create=function(e,t,n){var r={kind:"delete",uri:e};return void 0!==t&&(void 0!==t.recursive||void 0!==t.ignoreIfNotExists)&&(r.options=t),void 0!==n&&(r.annotationId=n),r},ei.is=function(e){return e&&"delete"===e.kind&&tE.string(e.uri)&&(void 0===e.options||(void 0===e.options.recursive||tE.boolean(e.options.recursive))&&(void 0===e.options.ignoreIfNotExists||tE.boolean(e.options.ignoreIfNotExists)))&&(void 0===e.annotationId||eT.is(e.annotationId))},(e_||(t.WorkspaceEdit=e_={})).is=function(e){return e&&(void 0!==e.changes||void 0!==e.documentChanges)&&(void 0===e.documentChanges||e.documentChanges.every(function(e){return tE.string(e.kind)?ex.is(e)||ek.is(e)||eC.is(e):eO.is(e)}))};var n,r,i,a,s,o,l,u,c,d,f,g,h,m,p,b,y,v,E,w,A,N,I,S,T,R,O,x,k,C,_,V,P,D,F,U,L,M,B,j,G,$,W,K,X,Y,Z,J,H,z,q,Q,ee,et,en,er,ei,ea,es,eo,el,eu,ec,ed,ef,eg,eh,em,ep,eb,ey,ev,eE,ew,eA,eN,eI,eS,eT,eR,eO,ex,ek,eC,e_,eV,eP,eD,eF,eU,eL,eM,eB,ej,eG,e$,eW,eK,eX,eY,eZ,eJ,eH,ez,eq,eQ,e0,e1,e2,e5,e3,e9,e4,e6,e8,e7,te,tt,tn,tr,ti,ta,ts,to,tl,tu,tc,td,tf,tg,th,tm,tp,tb,ty,tv,tE,tw=function(){function e(e,t){this.edits=e,this.changeAnnotations=t}return e.prototype.insert=function(e,t,n){var r,i;if(void 0===n?r=eI.insert(e,t):eT.is(n)?(i=n,r=eR.insert(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=eR.insert(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.replace=function(e,t,n){var r,i;if(void 0===n?r=eI.replace(e,t):eT.is(n)?(i=n,r=eR.replace(e,t,n)):(this.assertChangeAnnotations(this.changeAnnotations),i=this.changeAnnotations.manage(n),r=eR.replace(e,t,i)),this.edits.push(r),void 0!==i)return i},e.prototype.delete=function(e,t){var n,r;if(void 0===t?n=eI.del(e):eT.is(t)?(r=t,n=eR.del(e,t)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(t),n=eR.del(e,r)),this.edits.push(n),void 0!==r)return r},e.prototype.add=function(e){this.edits.push(e)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(e){if(void 0===e)throw Error("Text edit change is not configured to manage change annotations.")},e}(),tA=function(){function e(e){this._annotations=void 0===e?Object.create(null):e,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(e,t){var n;if(eT.is(e)?n=e:(n=this.nextId(),t=e),void 0!==this._annotations[n])throw Error("Id ".concat(n," is already in use."));if(void 0===t)throw Error("No annotation provided for id ".concat(n));return this._annotations[n]=t,this._size++,n},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}();t.WorkspaceChange=function(){function e(e){var t=this;this._textEditChanges=Object.create(null),void 0!==e?(this._workspaceEdit=e,e.documentChanges?(this._changeAnnotations=new tA(e.changeAnnotations),e.changeAnnotations=this._changeAnnotations.all(),e.documentChanges.forEach(function(e){if(eO.is(e)){var n=new tw(e.edits,t._changeAnnotations);t._textEditChanges[e.textDocument.uri]=n}})):e.changes&&Object.keys(e.changes).forEach(function(n){var r=new tw(e.changes[n]);t._textEditChanges[n]=r})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),void 0!==this._changeAnnotations&&(0===this._changeAnnotations.size?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(e){if(eD.is(e)){if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");var t={uri:e.uri,version:e.version},n=this._textEditChanges[t.uri];if(!n){var r=[],i={textDocument:t,edits:r};this._workspaceEdit.documentChanges.push(i),n=new tw(r,this._changeAnnotations),this._textEditChanges[t.uri]=n}return n}if(this.initChanges(),void 0===this._workspaceEdit.changes)throw Error("Workspace edit is not configured for normal text edit changes.");var n=this._textEditChanges[e];if(!n){var r=[];this._workspaceEdit.changes[e]=r,n=new tw(r),this._textEditChanges[e]=n}return n},e.prototype.initDocumentChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._changeAnnotations=new tA,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){void 0===this._workspaceEdit.documentChanges&&void 0===this._workspaceEdit.changes&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(e,t,n){var r,i,a;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eS.is(t)||eT.is(t)?r=t:n=t,void 0===r?i=ex.create(e,n):(a=eT.is(r)?r:this._changeAnnotations.manage(r),i=ex.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),void 0!==a)return a},e.prototype.renameFile=function(e,t,n,r){var i,a,s;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eS.is(n)||eT.is(n)?i=n:r=n,void 0===i?a=ek.create(e,t,r):(s=eT.is(i)?i:this._changeAnnotations.manage(i),a=ek.create(e,t,r,s)),this._workspaceEdit.documentChanges.push(a),void 0!==s)return s},e.prototype.deleteFile=function(e,t,n){var r,i,a;if(this.initDocumentChanges(),void 0===this._workspaceEdit.documentChanges)throw Error("Workspace edit is not configured for document changes.");if(eS.is(t)||eT.is(t)?r=t:n=t,void 0===r?i=eC.create(e,n):(a=eT.is(r)?r:this._changeAnnotations.manage(r),i=eC.create(e,n,a)),this._workspaceEdit.documentChanges.push(i),void 0!==a)return a},e}(),(n=eV||(t.TextDocumentIdentifier=eV={})).create=function(e){return{uri:e}},n.is=function(e){return tE.defined(e)&&tE.string(e.uri)},(r=eP||(t.VersionedTextDocumentIdentifier=eP={})).create=function(e,t){return{uri:e,version:t}},r.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&tE.integer(e.version)},(i=eD||(t.OptionalVersionedTextDocumentIdentifier=eD={})).create=function(e,t){return{uri:e,version:t}},i.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&(null===e.version||tE.integer(e.version))},(a=eF||(t.TextDocumentItem=eF={})).create=function(e,t,n,r){return{uri:e,languageId:t,version:n,text:r}},a.is=function(e){return tE.defined(e)&&tE.string(e.uri)&&tE.string(e.languageId)&&tE.integer(e.version)&&tE.string(e.text)},(s=eU||(t.MarkupKind=eU={})).PlainText="plaintext",s.Markdown="markdown",s.is=function(e){return e===s.PlainText||e===s.Markdown},(eL||(t.MarkupContent=eL={})).is=function(e){return tE.objectLiteral(e)&&eU.is(e.kind)&&tE.string(e.value)},(o=eM||(t.CompletionItemKind=eM={})).Text=1,o.Method=2,o.Function=3,o.Constructor=4,o.Field=5,o.Variable=6,o.Class=7,o.Interface=8,o.Module=9,o.Property=10,o.Unit=11,o.Value=12,o.Enum=13,o.Keyword=14,o.Snippet=15,o.Color=16,o.File=17,o.Reference=18,o.Folder=19,o.EnumMember=20,o.Constant=21,o.Struct=22,o.Event=23,o.Operator=24,o.TypeParameter=25,(l=eB||(t.InsertTextFormat=eB={})).PlainText=1,l.Snippet=2,(ej||(t.CompletionItemTag=ej={})).Deprecated=1,(u=eG||(t.InsertReplaceEdit=eG={})).create=function(e,t,n){return{newText:e,insert:t,replace:n}},u.is=function(e){return e&&tE.string(e.newText)&&ec.is(e.insert)&&ec.is(e.replace)},(c=e$||(t.InsertTextMode=e$={})).asIs=1,c.adjustIndentation=2,(eW||(t.CompletionItemLabelDetails=eW={})).is=function(e){return e&&(tE.string(e.detail)||void 0===e.detail)&&(tE.string(e.description)||void 0===e.description)},(eK||(t.CompletionItem=eK={})).create=function(e){return{label:e}},(eX||(t.CompletionList=eX={})).create=function(e,t){return{items:e||[],isIncomplete:!!t}},(d=eY||(t.MarkedString=eY={})).fromPlainText=function(e){return e.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")},d.is=function(e){return tE.string(e)||tE.objectLiteral(e)&&tE.string(e.language)&&tE.string(e.value)},(eZ||(t.Hover=eZ={})).is=function(e){return!!e&&tE.objectLiteral(e)&&(eL.is(e.contents)||eY.is(e.contents)||tE.typedArray(e.contents,eY.is))&&(void 0===e.range||ec.is(e.range))},(eJ||(t.ParameterInformation=eJ={})).create=function(e,t){return t?{label:e,documentation:t}:{label:e}},(eH||(t.SignatureInformation=eH={})).create=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i={label:e};return tE.defined(t)&&(i.documentation=t),tE.defined(n)?i.parameters=n:i.parameters=[],i},(f=ez||(t.DocumentHighlightKind=ez={})).Text=1,f.Read=2,f.Write=3,(eq||(t.DocumentHighlight=eq={})).create=function(e,t){var n={range:e};return tE.number(t)&&(n.kind=t),n},(g=eQ||(t.SymbolKind=eQ={})).File=1,g.Module=2,g.Namespace=3,g.Package=4,g.Class=5,g.Method=6,g.Property=7,g.Field=8,g.Constructor=9,g.Enum=10,g.Interface=11,g.Function=12,g.Variable=13,g.Constant=14,g.String=15,g.Number=16,g.Boolean=17,g.Array=18,g.Object=19,g.Key=20,g.Null=21,g.EnumMember=22,g.Struct=23,g.Event=24,g.Operator=25,g.TypeParameter=26,(e0||(t.SymbolTag=e0={})).Deprecated=1,(e1||(t.SymbolInformation=e1={})).create=function(e,t,n,r,i){var a={name:e,kind:t,location:{uri:r,range:n}};return i&&(a.containerName=i),a},(e2||(t.WorkspaceSymbol=e2={})).create=function(e,t,n,r){return void 0!==r?{name:e,kind:t,location:{uri:n,range:r}}:{name:e,kind:t,location:{uri:n}}},(h=e5||(t.DocumentSymbol=e5={})).create=function(e,t,n,r,i,a){var s={name:e,detail:t,kind:n,range:r,selectionRange:i};return void 0!==a&&(s.children=a),s},h.is=function(e){return e&&tE.string(e.name)&&tE.number(e.kind)&&ec.is(e.range)&&ec.is(e.selectionRange)&&(void 0===e.detail||tE.string(e.detail))&&(void 0===e.deprecated||tE.boolean(e.deprecated))&&(void 0===e.children||Array.isArray(e.children))&&(void 0===e.tags||Array.isArray(e.tags))},(m=e3||(t.CodeActionKind=e3={})).Empty="",m.QuickFix="quickfix",m.Refactor="refactor",m.RefactorExtract="refactor.extract",m.RefactorInline="refactor.inline",m.RefactorRewrite="refactor.rewrite",m.Source="source",m.SourceOrganizeImports="source.organizeImports",m.SourceFixAll="source.fixAll",(p=e9||(t.CodeActionTriggerKind=e9={})).Invoked=1,p.Automatic=2,(b=e4||(t.CodeActionContext=e4={})).create=function(e,t,n){var r={diagnostics:e};return null!=t&&(r.only=t),null!=n&&(r.triggerKind=n),r},b.is=function(e){return tE.defined(e)&&tE.typedArray(e.diagnostics,eA.is)&&(void 0===e.only||tE.typedArray(e.only,tE.string))&&(void 0===e.triggerKind||e.triggerKind===e9.Invoked||e.triggerKind===e9.Automatic)},(y=e6||(t.CodeAction=e6={})).create=function(e,t,n){var r={title:e},i=!0;return"string"==typeof t?(i=!1,r.kind=t):eN.is(t)?r.command=t:r.edit=t,i&&void 0!==n&&(r.kind=n),r},y.is=function(e){return e&&tE.string(e.title)&&(void 0===e.diagnostics||tE.typedArray(e.diagnostics,eA.is))&&(void 0===e.kind||tE.string(e.kind))&&(void 0!==e.edit||void 0!==e.command)&&(void 0===e.command||eN.is(e.command))&&(void 0===e.isPreferred||tE.boolean(e.isPreferred))&&(void 0===e.edit||e_.is(e.edit))},(v=e8||(t.CodeLens=e8={})).create=function(e,t){var n={range:e};return tE.defined(t)&&(n.data=t),n},v.is=function(e){return tE.defined(e)&&ec.is(e.range)&&(tE.undefined(e.command)||eN.is(e.command))},(E=e7||(t.FormattingOptions=e7={})).create=function(e,t){return{tabSize:e,insertSpaces:t}},E.is=function(e){return tE.defined(e)&&tE.uinteger(e.tabSize)&&tE.boolean(e.insertSpaces)},(w=te||(t.DocumentLink=te={})).create=function(e,t,n){return{range:e,target:t,data:n}},w.is=function(e){return tE.defined(e)&&ec.is(e.range)&&(tE.undefined(e.target)||tE.string(e.target))},(A=tt||(t.SelectionRange=tt={})).create=function(e,t){return{range:e,parent:t}},A.is=function(e){return tE.objectLiteral(e)&&ec.is(e.range)&&(void 0===e.parent||A.is(e.parent))},(N=tn||(t.SemanticTokenTypes=tn={})).namespace="namespace",N.type="type",N.class="class",N.enum="enum",N.interface="interface",N.struct="struct",N.typeParameter="typeParameter",N.parameter="parameter",N.variable="variable",N.property="property",N.enumMember="enumMember",N.event="event",N.function="function",N.method="method",N.macro="macro",N.keyword="keyword",N.modifier="modifier",N.comment="comment",N.string="string",N.number="number",N.regexp="regexp",N.operator="operator",N.decorator="decorator",(I=tr||(t.SemanticTokenModifiers=tr={})).declaration="declaration",I.definition="definition",I.readonly="readonly",I.static="static",I.deprecated="deprecated",I.abstract="abstract",I.async="async",I.modification="modification",I.documentation="documentation",I.defaultLibrary="defaultLibrary",(ti||(t.SemanticTokens=ti={})).is=function(e){return tE.objectLiteral(e)&&(void 0===e.resultId||"string"==typeof e.resultId)&&Array.isArray(e.data)&&(0===e.data.length||"number"==typeof e.data[0])},(S=ta||(t.InlineValueText=ta={})).create=function(e,t){return{range:e,text:t}},S.is=function(e){return null!=e&&ec.is(e.range)&&tE.string(e.text)},(T=ts||(t.InlineValueVariableLookup=ts={})).create=function(e,t,n){return{range:e,variableName:t,caseSensitiveLookup:n}},T.is=function(e){return null!=e&&ec.is(e.range)&&tE.boolean(e.caseSensitiveLookup)&&(tE.string(e.variableName)||void 0===e.variableName)},(R=to||(t.InlineValueEvaluatableExpression=to={})).create=function(e,t){return{range:e,expression:t}},R.is=function(e){return null!=e&&ec.is(e.range)&&(tE.string(e.expression)||void 0===e.expression)},(O=tl||(t.InlineValueContext=tl={})).create=function(e,t){return{frameId:e,stoppedLocation:t}},O.is=function(e){return tE.defined(e)&&ec.is(e.stoppedLocation)},(x=tu||(t.InlayHintKind=tu={})).Type=1,x.Parameter=2,x.is=function(e){return 1===e||2===e},(k=tc||(t.InlayHintLabelPart=tc={})).create=function(e){return{value:e}},k.is=function(e){return tE.objectLiteral(e)&&(void 0===e.tooltip||tE.string(e.tooltip)||eL.is(e.tooltip))&&(void 0===e.location||ed.is(e.location))&&(void 0===e.command||eN.is(e.command))},(C=td||(t.InlayHint=td={})).create=function(e,t,n){var r={position:e,label:t};return void 0!==n&&(r.kind=n),r},C.is=function(e){return tE.objectLiteral(e)&&eu.is(e.position)&&(tE.string(e.label)||tE.typedArray(e.label,tc.is))&&(void 0===e.kind||tu.is(e.kind))&&void 0===e.textEdits||tE.typedArray(e.textEdits,eI.is)&&(void 0===e.tooltip||tE.string(e.tooltip)||eL.is(e.tooltip))&&(void 0===e.paddingLeft||tE.boolean(e.paddingLeft))&&(void 0===e.paddingRight||tE.boolean(e.paddingRight))},(tf||(t.StringValue=tf={})).createSnippet=function(e){return{kind:"snippet",value:e}},(tg||(t.InlineCompletionItem=tg={})).create=function(e,t,n,r){return{insertText:e,filterText:t,range:n,command:r}},(th||(t.InlineCompletionList=th={})).create=function(e){return{items:e}},(_=tm||(t.InlineCompletionTriggerKind=tm={})).Invoked=0,_.Automatic=1,(tp||(t.SelectedCompletionInfo=tp={})).create=function(e,t){return{range:e,text:t}},(tb||(t.InlineCompletionContext=tb={})).create=function(e,t){return{triggerKind:e,selectedCompletionInfo:t}},(ty||(t.WorkspaceFolder=ty={})).is=function(e){return tE.objectLiteral(e)&&es.is(e.uri)&&tE.string(e.name)},t.EOL=["\n","\r\n","\r"],(V=tv||(t.TextDocument=tv={})).create=function(e,t,n,r){return new tN(e,t,n,r)},V.is=function(e){return!!(tE.defined(e)&&tE.string(e.uri)&&(tE.undefined(e.languageId)||tE.string(e.languageId))&&tE.uinteger(e.lineCount)&&tE.func(e.getText)&&tE.func(e.positionAt)&&tE.func(e.offsetAt))},V.applyEdits=function(e,t){for(var n=e.getText(),r=function e(t,n){if(t.length<=1)return t;var r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);e(i,n),e(a,n);for(var s=0,o=0,l=0;s<i.length&&o<a.length;)0>=n(i[s],a[o])?t[l++]=i[s++]:t[l++]=a[o++];for(;s<i.length;)t[l++]=i[s++];for(;o<a.length;)t[l++]=a[o++];return t}(t,function(e,t){var n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=n.length,a=r.length-1;a>=0;a--){var s=r[a],o=e.offsetAt(s.range.start),l=e.offsetAt(s.range.end);if(l<=i)n=n.substring(0,o)+s.newText+n.substring(l,n.length);else throw Error("Overlapping edit");i=o}return n};var tN=function(){function e(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(e){if(e){var t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content},e.prototype.update=function(e,t){this._content=e.text,this._version=t,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(void 0===this._lineOffsets){for(var e=[],t=this._content,n=!0,r=0;r<t.length;r++){n&&(e.push(r),n=!1);var i=t.charAt(r);n="\r"===i||"\n"===i,"\r"===i&&r+1<t.length&&"\n"===t.charAt(r+1)&&r++}n&&t.length>0&&e.push(t.length),this._lineOffsets=e}return this._lineOffsets},e.prototype.positionAt=function(e){e=Math.max(Math.min(e,this._content.length),0);var t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return eu.create(0,e);for(;n<r;){var i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}var a=n-1;return eu.create(a,e-t[a])},e.prototype.offsetAt=function(e){var t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;var n=t[e.line],r=e.line+1<t.length?t[e.line+1]:this._content.length;return Math.max(Math.min(n+e.character,r),n)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}();P=tE||(tE={}),D=Object.prototype.toString,P.defined=function(e){return void 0!==e},P.undefined=function(e){return void 0===e},P.boolean=function(e){return!0===e||!1===e},P.string=function(e){return"[object String]"===D.call(e)},P.number=function(e){return"[object Number]"===D.call(e)},P.numberRange=function(e,t,n){return"[object Number]"===D.call(e)&&t<=e&&e<=n},P.integer=function(e){return"[object Number]"===D.call(e)&&-0x80000000<=e&&e<=0x7fffffff},P.uinteger=function(e){return"[object Number]"===D.call(e)&&0<=e&&e<=0x7fffffff},P.func=function(e){return"[object Function]"===D.call(e)},P.objectLiteral=function(e){return null!==e&&"object"==typeof e},P.typedArray=function(e,t){return Array.isArray(e)&&e.every(t)}};if("object"==typeof t.exports)r(e.t,n);else{let t;"function"==typeof define&&define.amd&&void 0!==(t=r(e.r,n))&&e.v(t)}},58969,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Line=void 0,n.Line=class{constructor(e,t){this.document=e,this.range=t}getRange(){return this.range}getTextContent(){return this.document.getText().substring(this.document.offsetAt(this.range.start),this.document.offsetAt(this.range.end))}isAfter(e){return this.range.start.line>e.range.start.line}isBefore(e){return this.range.start.line<e}}},11300,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Util=void 0;class r{static isUTF8BOM(e){let t=Uint8Array.from(Buffer.from(e,"UTF-8"));return 239===t[0]&&187==t[1]&&191==t[2]}static isWhitespace(e){return" "===e||"	"===e||r.isNewline(e)}static isNewline(e){return"\r"===e||"\n"===e}static findLeadingNonWhitespace(e,t){e:for(let n=0;n<e.length;n++)switch(e.charAt(n)){case" ":case"	":continue;case t:t:for(let t=n+1;t<e.length;t++)switch(e.charAt(t)){case" ":case"	":continue;case"\r":n=t+1;continue e;case"\n":n=t;continue e;default:break t}return -1;default:return n}return -1}static isInsideRange(e,t){return t.start.line===t.end.line?t.start.line===e.line&&t.start.character<=e.character&&e.character<=t.end.character:t.start.line===e.line?t.start.character<=e.character:t.end.line===e.line?e.character<=t.end.character:t.start.line<e.line&&e.line<t.end.line}static parseHeredocName(e){if("-"===(e=e.substring(2)).charAt(0)&&(e=e.substring(1)),'"'===e.charAt(0)){if('"'!==e.charAt(e.length-1))return null;e=e.substring(1,e.length-1)}if("'"===e.charAt(0)){if("'"!==e.charAt(e.length-1))return null;e=e.substring(1,e.length-1)}return"<"===e.charAt(0)?null:e}}n.Util=r},40154,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Comment=void 0;let r=e.r(18405),i=e.r(58969),a=e.r(11300);class s extends i.Line{constructor(e,t){super(e,t)}toString(){let e=this.getContent();return e?"# "+e:"#"}getContent(){let e=this.getContentRange();return null===e?"":this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getContentRange(){let e=this.getRange(),t=this.document.offsetAt(e.start),n=this.document.getText().substring(t,this.document.offsetAt(e.end)),i=-1,s=-1;for(let e=1;e<n.length;e++)if(!a.Util.isWhitespace(n.charAt(e))){i=e;break}if(-1===i)return null;for(let e=n.length-1;e>=1;e--)if(!a.Util.isWhitespace(n.charAt(e))){s=e+1;break}return r.Range.create(this.document.positionAt(t+i),this.document.positionAt(t+s))}}n.Comment=s},68882,e=>{"use strict";var t,n;class r{constructor(e,t,n,r){this._uri=e,this._languageId=t,this._version=n,this._content=r,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let t=this.offsetAt(e.start),n=this.offsetAt(e.end);return this._content.substring(t,n)}return this._content}update(e,t){for(let t of e)if(r.isIncremental(t)){let e=s(t.range),n=this.offsetAt(e.start),r=this.offsetAt(e.end);this._content=this._content.substring(0,n)+t.text+this._content.substring(r,this._content.length);let a=Math.max(e.start.line,0),o=Math.max(e.end.line,0),l=this._lineOffsets,u=i(t.text,!1,n);if(o-a===u.length)for(let e=0,t=u.length;e<t;e++)l[e+a+1]=u[e];else u.length<1e4?l.splice(a+1,o-a,...u):this._lineOffsets=l=l.slice(0,a+1).concat(u,l.slice(o+1));let c=t.text.length-(r-n);if(0!==c)for(let e=a+1+u.length,t=l.length;e<t;e++)l[e]=l[e]+c}else if(r.isFull(t))this._content=t.text,this._lineOffsets=void 0;else throw Error("Unknown change event received");this._version=t}getLineOffsets(){return void 0===this._lineOffsets&&(this._lineOffsets=i(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let t=this.getLineOffsets(),n=0,r=t.length;if(0===r)return{line:0,character:e};for(;n<r;){let i=Math.floor((n+r)/2);t[i]>e?r=i:n=i+1}let i=n-1;return e=this.ensureBeforeEOL(e,t[i]),{line:i,character:e-t[i]}}offsetAt(e){let t=this.getLineOffsets();if(e.line>=t.length)return this._content.length;if(e.line<0)return 0;let n=t[e.line];if(e.character<=0)return n;let r=e.line+1<t.length?t[e.line+1]:this._content.length,i=Math.min(n+e.character,r);return this.ensureBeforeEOL(i,n)}ensureBeforeEOL(e,t){for(;e>t&&a(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){return null!=e&&"string"==typeof e.text&&void 0!==e.range&&(void 0===e.rangeLength||"number"==typeof e.rangeLength)}static isFull(e){return null!=e&&"string"==typeof e.text&&void 0===e.range&&void 0===e.rangeLength}}function i(e,t,n=0){let r=t?[n]:[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);a(i)&&(13===i&&t+1<e.length&&10===e.charCodeAt(t+1)&&t++,r.push(n+t+1))}return r}function a(e){return 13===e||10===e}function s(e){let t=e.start,n=e.end;return t.line>n.line||t.line===n.line&&t.character>n.character?{start:n,end:t}:e}function o(e){let t=s(e.range);return t!==e.range?{newText:e.newText,range:t}:e}(n=t||(t={})).create=function(e,t,n,i){return new r(e,t,n,i)},n.update=function(e,t,n){if(e instanceof r)return e.update(t,n),e;throw Error("TextDocument.update: document must be created by TextDocument.create")},n.applyEdits=function(e,t){let n=e.getText(),r=function e(t,n){if(t.length<=1)return t;let r=t.length/2|0,i=t.slice(0,r),a=t.slice(r);e(i,n),e(a,n);let s=0,o=0,l=0;for(;s<i.length&&o<a.length;)0>=n(i[s],a[o])?t[l++]=i[s++]:t[l++]=a[o++];for(;s<i.length;)t[l++]=i[s++];for(;o<a.length;)t[l++]=a[o++];return t}(t.map(o),(e,t)=>{let n=e.range.start.line-t.range.start.line;return 0===n?e.range.start.character-t.range.start.character:n}),i=0,a=[];for(let t of r){let r=e.offsetAt(t.range.start);if(r<i)throw Error("Overlapping edit");r>i&&a.push(n.substring(i,r)),t.newText.length&&a.push(t.newText),i=e.offsetAt(t.range.end)}return a.push(n.substr(i)),a.join("")},e.s(["TextDocument",()=>t])},93805,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ParserDirective=void 0;let r=e.r(43736),i=e.r(58969);class a extends i.Line{constructor(e,t,n,r){super(e,t),this.nameRange=n,this.valueRange=r}toString(){return"# "+this.getName()+"="+this.getValue()}getNameRange(){return this.nameRange}getValueRange(){return this.valueRange}getName(){return this.document.getText().substring(this.document.offsetAt(this.nameRange.start),this.document.offsetAt(this.nameRange.end))}getValue(){return this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end))}getDirective(){let e=r.Directive[this.getName().toLowerCase()];return void 0===e?null:e}}n.ParserDirective=a},72518,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Heredoc=void 0,n.Heredoc=class{constructor(e,t,n,r,i){this.startRange=e,this.name=t,this.nameRange=n,this.contentRange=r,this.endRange=i}getName(){return this.name}getStartRange(){return this.startRange}getNameRange(){return this.nameRange}getContentRange(){return this.contentRange}getDelimiterRange(){return this.endRange}}},79225,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Variable=void 0,n.Variable=class{constructor(e,t,n,r,i,a,s,o,l,u){this.name=e,this.nameRange=t,this.range=n,this.modifier=r,this.modifierRange=i,this.substitutionParameter=a,this.substitutionRange=s,this.defined=o,this.buildVariable=l,this.stringValue=u}toString(){return this.stringValue}getName(){return this.name}getNameRange(){return this.nameRange}getRange(){return this.range}getModifier(){return this.modifier}getModifierRange(){return this.modifierRange}getSubstitutionParameter(){return this.substitutionParameter}getSubstitutionRange(){return this.substitutionRange}isDefined(){return this.defined}isBuildVariable(){return!0===this.buildVariable}isEnvironmentVariable(){return!1===this.buildVariable}}},17899,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Instruction=void 0;let r=e.r(18405),i=e.r(11300),a=e.r(58969),s=e.r(68130),o=e.r(72518),l=e.r(79225),u=e.r(43736);class c extends a.Line{constructor(e,t,n,r,i,a){super(e,t),this.dockerfile=n,this.escapeChar=r,this.instruction=i,this.instructionRange=a}toString(){let e=this.getKeyword();for(let t of this.getRawArguments())e+=" ",e+=t.getValue();return e}getRangeContent(e){return null===e?null:this.document.getText().substring(this.document.offsetAt(e.start),this.document.offsetAt(e.end))}getInstructionRange(){return this.instructionRange}getInstruction(){return this.instruction}getKeyword(){return this.getInstruction().toUpperCase()}getArgumentsRange(){let e=this.getArguments();return 0===e.length?null:r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)}getArgumentsRanges(){let e=this.getArguments();if(0===e.length)return[];if(e[0].getRange().start.line===e[e.length-1].getRange().end.line)return[r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end)];let t=[],n=-1,a=e[0].getRange().start,s=this.getInstructionRange(),o=this.document.offsetAt(a)-this.document.offsetAt(s.start),l=this.getTextContent().substring(o,this.document.offsetAt(e[e.length-1].getRange().end)-this.document.offsetAt(s.start)),u=this.document.offsetAt(s.start)+o,c=!1;for(let e=0;e<l.length;e++){let s=l.charAt(e);if(s===this.escapeChar){let i=l.charAt(e+1);if(" "===i||"	"===i)e:for(let i=e+2;i<l.length;i++)switch(l.charAt(i)){case" ":case"	":continue;case"\r":i++;case"\n":null!==a&&t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,c=!1,e=i;break e;default:break e}else"\r"===i?(null!==a&&(t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null),c=!1,e+=2):("\n"===i&&(null!==a&&t.push(r.Range.create(a,this.document.positionAt(u+n+1))),a=null,c=!1),e++)}else if(i.Util.isNewline(s))c&&(a=null,c=!1);else if(!c){if(null===a){if("#"===s){c=!0;continue}let t=this.document.positionAt(u+e);0!==t.character&&(a=r.Position.create(t.line,0))}n=e}}return null===a?t.push(r.Range.create(this.document.positionAt(u+n),this.document.positionAt(u+n+1))):t.push(r.Range.create(a,this.document.positionAt(u+n+1))),t}getRawArgumentsContent(){let e=this.getArguments();return 0===e.length?null:this.getRangeContent(r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end))}getArgumentsContent(){if(0===this.getArguments().length)return null;let e="",t=this.getArgumentsRanges(),n=this.document.getText();for(let r of t)e+=n.substring(this.document.offsetAt(r.start),this.document.offsetAt(r.end));return e}getArguments(){return this.getRawArguments()}getRawArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end)-this.document.offsetAt(t.start),a=this.getTextContent().substring(n),o=this.document.offsetAt(t.start)+n,l=!1,u=!1,c=-1,d=!1,f=!1,g=-1,h="";for(let t=0;t<a.length;t++){let n=a.charAt(t);if(i.Util.isWhitespace(n))if(f){d=!0,i.Util.isNewline(n)&&(d=!1,u&&(u=!1,l=!0));continue}else -1!==c&&(-1===g?e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+t)))):e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),g=-1,h="",c=-1);else if(n===this.escapeChar){let i=a.charAt(t+1);if(" "===i||"	"===i)e:for(let e=t+2;e<a.length;e++)switch(a.charAt(e)){case" ":case"	":continue;case"\r":e++;case"\n":u=!1,f=!0,l=!0,-1!==c&&(g=t),t=e;break e;default:g=t,-1===c&&(t=e-1);break e}else if("\r"===i)u=!1,f=!0,l=!0,-1!==c&&-1===g&&(g=t),t+=2;else if("\n"===i)u=!1,f=!0,l=!0,-1!==c&&-1===g&&(g=t),t++;else{if(d&&-1!==g&&(e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),h="",c=-1),g=-1,d=!1,f=!1,"$"===i)h=h+n+i;else if(""===i)break;else h+=i;-1===c&&(c=t),t++}}else u||(l&&"#"===n?u=!0:(d&&-1!==g&&(e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g)))),h="",c=-1),d=!1,f=!1,g=-1,h+=n,-1===c&&(c=t)),l=!1)}return -1!==c&&(-1===g?e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+a.length)))):e.push(new s.Argument(h,r.Range.create(this.document.positionAt(o+c),this.document.positionAt(o+g))))),e}getExpandedArguments(){let e=this.getArguments();for(let t=0;t<e.length;t++){let n=e[t].getRange(),r=this.document.offsetAt(n.start),i=this.parseVariables(r,e[t].getValue()),a=[],o=!1;for(let e of i){let t=this.dockerfile.resolveVariable(e.getName(),e.getNameRange().start.line);a.push(t),o=o||void 0!==t}if(o){let o="";for(let e=0;e<a.length;e++){let t=i[e].getRange(),n=this.document.offsetAt(t.start),s=this.document.offsetAt(t.end);a[e]?(o+=this.document.getText().substring(r,n),o+=a[e]):o+=this.document.getText().substring(r,s),r=s}let l=this.document.offsetAt(n.end);l!==r&&(o+=this.document.getText().substring(r,l)),e[t]=new s.Argument(o,n)}}return e}getVariables(){let e=[];for(let t of this.getRawArguments()){let n=t.getRange(),r=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end));for(let n of this.parseVariables(this.document.offsetAt(t.getRange().start),r))e.push(n)}return e}parseVariables(e,t){let n=[];n:for(let a=0;a<t.length;a++)switch(t.charAt(a)){case this.escapeChar:"$"===t.charAt(a+1)&&a++;break;case"$":if("{"===t.charAt(a+1)){let i="${",s="",o=-1,u="",c=-1,d=-1,f=-1;r:for(let g=a+2;g<t.length;g++){let h=t.charAt(g);switch(h){case this.escapeChar:for(let e=g+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"	":case"\r":continue;case"\n":g=e;continue r}break;case"}":i+="}";let m=null,p=null,b=-1!==f?u:null,y=null;-1===o?o=g:o+1===g?(m="",p=r.Range.create(this.document.positionAt(e+o+1),this.document.positionAt(e+o+1))):(-1===c?(c=f+1,d=f+1):d+=1,m=t.substring(f,f+1),p=r.Range.create(this.document.positionAt(e+f),this.document.positionAt(e+f+1)),y=r.Range.create(this.document.positionAt(e+c),this.document.positionAt(e+d)));let v=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+2),this.document.positionAt(e+o)),r.Range.create(v,this.document.positionAt(e+g+1)),m,p,b,y,void 0!==this.dockerfile.resolveVariable(s,v.line),this.isBuildVariable(s,v.line),i)),a=g;continue n;case":":-1===o?o=g:-1!==f?(-1===c&&(c=g),d=g,u+=":"):f=g,i+=":";break;case"\n":case"\r":case" ":case"	":break;default:-1===o?s+=h:-1!==f?(-1===c&&(c=g),d=g,u+=h):f=g,i+=h}}}else{if(i.Util.isWhitespace(t.charAt(a+1))||a===t.length-1)continue;let s="";r:for(let i=a+1;i<t.length;i++){let o=t.charAt(i);switch(o){case"\r":case"\n":case" ":case"	":continue;case"$":case"'":case'"':let u=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(u,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,u.line),this.isBuildVariable(s,u.line),"$"+s)),a=i-1;continue n;case this.escapeChar:for(let e=i+1;e<t.length;e++)switch(t.charAt(e)){case" ":case"	":case"\r":continue;case"\n":i=e;continue r}let c=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(c,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,c.line),this.isBuildVariable(s,c.line),"$"+s));break n}if(null===o.match(/^[a-z0-9_]+$/i)){let t=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+i)),r.Range.create(t,this.document.positionAt(e+i)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,t.line),this.isBuildVariable(s,t.line),"$"+s)),a=i-1;continue n}s+=o}let o=this.document.positionAt(e+a);n.push(new l.Variable(s,r.Range.create(this.document.positionAt(e+a+1),this.document.positionAt(e+t.length)),r.Range.create(o,this.document.positionAt(e+t.length)),null,null,null,null,void 0!==this.dockerfile.resolveVariable(s,o.line),this.isBuildVariable(s,o.line),"$"+s))}break n}return n}isBuildVariable(e,t){if(this.getKeyword()===u.Keyword.FROM){for(let t of this.dockerfile.getInitialARGs()){let n=t.getProperty();if(n&&e===n.getName())return!0}return}let n=this.dockerfile.getContainingImage(r.Position.create(t,0)),i=n.getENVs();for(let n=i.length-1;n>=0;n--)if(i[n].isBefore(t)){for(let t of i[n].getProperties())if(t.getName()===e)return!1}let a=n.getARGs();for(let n=a.length-1;n>=0;n--)if(a[n].isBefore(t)){let t=a[n].getProperty();if(t&&t.getName()===e)return!0}}createSingleLineHeredocs(e){let t=[];for(let n of e){let e=n.getValue();if(e.startsWith("<<")&&null!==i.Util.parseHeredocName(e)){let e=n.getRange(),r=this.getNameRange(e),i=this.getName(r);t.push(new o.Heredoc(e,i,r,null,null))}}return t}getName(e){let t=this.document.getText(e),n=!1,r="";r:for(let e=0;e<t.length;e++){let i=t.charAt(e);switch(i){case this.escapeChar:n=!0;for(let n=e+1;n<t.length;n++)switch(t.charAt(n)){case" ":case"	":break;case"\r":e=n+1;continue r;case"\n":e=n;continue r;default:r+=t.charAt(n),e=n;continue r}break;case"#":if(n){for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){e=n;continue r}}case" ":case"	":case"\r":case"\n":if(n)break;default:r+=i}}return r}getNameRange(e){let t=this.document.getText(e),n=!1,i=!1,a=-1,s=-1,o=!1,l=null;i:for(let e=0;e<t.length;e++){let r=t.charAt(e);switch(r){case'"':case"'":if(l===r)break i;l=r;continue;case this.escapeChar:for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){o=!0,n=e;continue i}break;case" ":case"	":case"\r":case"\n":break;case"<":n?i=!0:n=!0;break;case"-":if(i){i=!1;break}case"#":if(o){for(let n=e+1;n<t.length;n++)if("\n"===t.charAt(n)){e=n;continue i}}default:if(-1===a&&(a=e),null!==l){s=e+1;break}break i}}if(-1===a)return r.Range.create(e.end,e.end);let u=this.document.positionAt(this.document.offsetAt(e.start)+a),c=null!==l?this.document.positionAt(this.document.offsetAt(e.start)+s):e.end;return r.Range.create(u,c)}getHeredocs(){let e=this.getArguments();if(0===e.length)return[];let t=[],n=this.getRange();if(n.start.line===n.end.line)return this.createSingleLineHeredocs(e);let i=[],a=!1,s=!1,l=-1,u=-1,c=-1,d=0,f=this.document.offsetAt(e[0].getRange().start),g=this.getRangeContent(r.Range.create(e[0].getRange().start,this.getRange().end));i:for(let n=0;n<g.length;n++)switch(g.charAt(n)){case this.escapeChar:s=!0;for(let e=n+1;e<g.length;e++)switch(g.charAt(e)){case" ":case"	":break;case"\r":e++;default:n=e;continue i}break;case"\r":break;case"\n":if(s)break;if(a){-1===l&&(l=n),u=n;let e=i[d],a=e.getRange(),s=this.getNameRange(a),g=this.getName(s),h=this.getDelimiterRange(e,g,r.Range.create(this.document.positionAt(f+c),this.document.positionAt(f+n)));if(null!==h){let e=r.Range.create(this.document.positionAt(f+l),this.document.positionAt(f+c-1));t.push(new o.Heredoc(a,g,s,e,h)),l=-1,d++}c=-1}else{let t=f+n;for(let n of e)if(this.document.offsetAt(n.getRange().start)<t)n.getValue().startsWith("<<")&&i.push(n);else break;a=!0,c=-1;continue}break;case" ":case"	":if(s)break;case"#":if(s){for(let e=n+1;e<g.length;e++)if("\n"===g.charAt(e)){n=e;continue i}}default:s&&(s=!1),a&&(-1===l&&(l=n),-1===c&&(c=n))}if(!a)return this.createSingleLineHeredocs(e);{let e=i[d],a=e.getRange(),s=this.getNameRange(a),g=this.getName(s),h=null,m=this.getDelimiterRange(e,g,r.Range.create(this.document.positionAt(f+c),n.end));null===m?h=r.Range.create(this.document.positionAt(f+l),n.end):-1!==u&&(h=r.Range.create(this.document.positionAt(f+l),this.document.positionAt(f+u))),t.push(new o.Heredoc(a,g,s,h,m)),d++;for(let e=d;e<i.length;e++){let e=i[d].getRange(),n=this.getNameRange(e),r=this.getName(n);t.push(new o.Heredoc(e,r,n,null,null)),d++}}return t}getDelimiterRange(e,t,n){let i=this.document.getText(n);if(e.getValue().startsWith("<<-")){let e=0;for(;"	"===i.charAt(e);)e++;return i.substring(e)===t?r.Range.create(r.Position.create(n.start.line,e),n.end):null}return i===t?n:null}}n.Instruction=c},93593,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FlagOption=void 0,n.FlagOption=class{constructor(e,t,n,r,i){this.range=e,this.name=t,this.nameRange=n,this.value=r,this.valueRange=i}toString(){return null!==this.valueRange?this.name+"="+this.value:this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}}},14625,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Flag=void 0;let r=e.r(18405),i=e.r(93593);n.Flag=class{constructor(e,t,n,r,i,a){if(this.options=[],this.range=t,this.name=n,this.nameRange=r,this.value=i,this.valueRange=a,null!==this.value){let t=e.offsetAt(a.start),n=-1,r=-1,s=!1;for(let a=0;a<i.length;a++)switch(i.charAt(a)){case"=":s=!0,-1===r&&(r=a+1);break;case",":this.options.push(this.createFlagOption(e,i,t,n,r,a)),n=-1,r=-1;break;default:-1===n&&(n=a)}s&&-1!==n&&this.options.push(this.createFlagOption(e,i,t,n,r,i.length))}}createFlagOption(e,t,n,a,s,o){let l=r.Range.create(e.positionAt(n+a),e.positionAt(n+o));return -1===s?new i.FlagOption(l,t.substring(a,o),l,null,null):new i.FlagOption(l,t.substring(a,s-1),r.Range.create(e.positionAt(n+a),e.positionAt(n+s-1)),t.substring(s,o),r.Range.create(e.positionAt(n+s),e.positionAt(n+o)))}toString(){return this.valueRange?"--"+this.name+"="+this.value:"--"+this.name}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getOption(e){for(let t of this.options)if(t.getName()===e)return t;return null}getOptions(){return this.options}hasOptions(){return this.options.length>0}}},46506,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ModifiableInstruction=void 0;let r=e.r(18405),i=e.r(14625),a=e.r(17899);class s extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getFlags(){if(!this.flags)for(let e of(this.flags=[],this.getArguments())){let t=e.getValue();if(this.stopSearchingForFlags(t))break;if(0===t.indexOf("--")){let n=e.getRange(),a=this.document.getText().substring(this.document.offsetAt(n.start),this.document.offsetAt(n.end)),s=t.indexOf("="),o=a.indexOf("="),l=!1,u=!1,c=-1;a:for(let e=0;e<a.length;e++)switch(a.charAt(e)){case"\\":case" ":case"	":case"\r":case"\n":break;case"-":if(u){c=e;break a}l?u=!0:l=!0;break;default:c=e;break a}let d=this.document.positionAt(this.document.offsetAt(n.start)+c);if(-1===o)this.flags.push(new i.Flag(this.document,n,t.substring(2),r.Range.create(d,n.end),null,null));else if(o===t.length-1){let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(this.document,n,t.substring(2,o),r.Range.create(d,e),"",r.Range.create(n.end,n.end)))}else{let e=this.document.positionAt(this.document.offsetAt(n.start)+o);this.flags.push(new i.Flag(this.document,n,t.substring(2,s),r.Range.create(d,e),t.substring(s+1),r.Range.create(this.document.positionAt(this.document.offsetAt(n.start)+o+1),n.end)))}}}return this.flags}getArguments(){let e=super.getArguments(),t=this.getFlags();if(0===t.length)return e;for(let n=0;n<t.length;n++)e.shift();return e}}n.ModifiableInstruction=s},30365,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JSONInstruction=void 0;let r=e.r(18405),i=e.r(68130),a=e.r(10736),s=e.r(46506);class o extends s.ModifiableInstruction{constructor(e,t,n,s,o,l){super(e,t,n,s,o,l),this.openingBracket=null,this.closingBracket=null,this.jsonStrings=[];const u=this.getRawArgumentsContent();if(null===u)return;const c=this.getArguments();if(1===c.length&&"[]"===c[0].getValue()){let e=c[0].getRange();this.openingBracket=new i.Argument("[",r.Range.create(e.start.line,e.start.character,e.start.line,e.start.character+1)),this.closingBracket=new i.Argument("]",r.Range.create(e.start.line,e.start.character+1,e.end.line,e.end.character));return}if(2===c.length&&"["===c[0].getValue()&&"]"===c[1].getValue()){this.openingBracket=c[0],this.closingBracket=c[1];return}const d=e.offsetAt(this.getArgumentsRange().start);let f=-1,g="",h=!1,m="";s:for(let t=0;t<u.length;t++){let n=u.charAt(t);switch(n){case"[":if(""===g)this.openingBracket=new i.Argument("[",r.Range.create(e.positionAt(d+t),e.positionAt(d+t+1))),g="[";else if(h)m+=n;else break s;break;case'"':if("["===g||","===g){f=t,h=!0,g='"',m+=n;continue}if('"'===g)if(h)m+=n,h=!1,this.jsonStrings.push(new a.JSONArgument(m,r.Range.create(e.positionAt(d+f),e.positionAt(d+t+1)),r.Range.create(e.positionAt(d+f+1),e.positionAt(d+t)))),m="";else break s;else break s;break;case",":if(h)m+=n;else if('"'===g)g=",";else break s;break;case"]":if(h)m+=n;else if(""!==g){this.closingBracket=new i.Argument("]",r.Range.create(e.positionAt(d+t),e.positionAt(d+t+1)));break s}break;case" ":case"	":break;case"\\":if(h)switch(u.charAt(t+1)){case'"':case"\\":m+=u.charAt(t+1),t++;continue;case" ":case"	":t:for(let e=t+2;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue s;case" ":case"	":break;default:break t}break;case"\r":t++;default:t++;continue}else t:for(let e=t+1;e<u.length;e++)switch(u.charAt(e)){case"\r":e++;case"\n":t=e;continue s;case" ":case"	":break;default:break t}break s;default:if(!h)break s;m+=n}}}stopSearchingForFlags(e){return!0}getOpeningBracket(){return this.openingBracket}getJSONStrings(){return this.jsonStrings}getClosingBracket(){return this.closingBracket}}n.JSONInstruction=o},72111,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Add=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}}n.Add=i},57822,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Property=void 0;let r=e.r(18405),i=e.r(11300);class a{constructor(e,t,n,i){this.assignmentOperatorRange=null,this.assignmentOperator=null,this.valueRange=null,this.value=null,this.document=e,this.escapeChar=t,this.nameRange=a.getNameRange(e,n);let s=e.getText().substring(e.offsetAt(this.nameRange.start),e.offsetAt(this.nameRange.end));if(this.name=a.getValue(s,t),i)this.valueRange=i.getRange(),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.range=r.Range.create(this.nameRange.start,this.valueRange.end);else{let i=n.getRange();this.nameRange.start.line===i.start.line&&this.nameRange.start.character===i.start.character&&this.nameRange.end.line===i.end.line&&this.nameRange.end.character===i.end.character||(this.valueRange=a.getValueRange(e,n),s=e.getText().substring(e.offsetAt(this.valueRange.start),e.offsetAt(this.valueRange.end)),this.value=a.getValue(s,t),this.assignmentOperatorRange=r.Range.create(this.nameRange.end,this.valueRange.start),this.assignmentOperator="="),this.range=i}}getRange(){return this.range}getName(){return this.name}getNameRange(){return this.nameRange}getValue(){return this.value}getValueRange(){return this.valueRange}getAssignmentOperator(){return this.assignmentOperator}getAssignmentOperatorRange(){return this.assignmentOperatorRange}getUnescapedValue(){if(null===this.valueRange)return null;let e=!1,t="",n=this.document.getText().substring(this.document.offsetAt(this.valueRange.start),this.document.offsetAt(this.valueRange.end));o:for(let r=0;r<n.length;r++){let i=n.charAt(r);switch(i){case this.escapeChar:for(let a=r+1;a<n.length;a++)switch(n.charAt(a)){case"\r":a++;case"\n":e=!0,r=a;continue o;case" ":case"	":break;default:t+=i;continue o}t+=i;break;case"\r":case"\n":break;case" ":case"	":e||(t+=i);break;case"#":if(e)for(let e=r+1;e<n.length;e++)switch(n.charAt(e)){case"\r":e++;case"\n":r=e;continue o}else t+=i;break;default:t+=i,e=!1}}return t}static getNameRange(e,t){let n=t.getValue(),i=n.indexOf("=");if(-1!==i){let a=n.charAt(0),s=n.charAt(i-1);if('"'===a&&'"'===s||"'"===a&&"'"===s||'"'!==a&&"'"!==a)return r.Range.create(t.getRange().start,e.positionAt(e.offsetAt(t.getRange().start)+i))}return t.getRange()}static getValueRange(e,t){return r.Range.create(e.positionAt(e.offsetAt(t.getRange().start)+t.getValue().indexOf("=")+1),e.positionAt(e.offsetAt(t.getRange().end)))}static getValue(e,t){let n=!1,r=i.Util.findLeadingNonWhitespace(e,t);0!==r&&"#"===e.charAt(r)&&(n=!0);let a=(e=e.substring(r)).charAt(0),s=e.charAt(e.length-1),o="'"===a||'"'===a,l="'"===a&&"'"===s,u=!1;if('"'===a)for(let n=1;n<e.length;n++)e.charAt(n)===t?n++:'"'===e.charAt(n)&&n===e.length-1&&(u=!0);(l||u)&&(e=e.substring(1,e.length-1));let c=-1,d="";l:for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case t:if(r+1===e.length){d+=t;break l}if(" "===(i=e.charAt(r+1))||"	"===i)e:for(let a=r+2;a<e.length;a++){let s=e.charAt(a);switch(s){case" ":case"	":break;case"\r":a++;case"\n":n=!0,r=a;continue l;default:if(!u&&!l&&!o){s===t?(d+=i,r+=1):(d=d+i+s,r=a);continue l}break e}}if(u){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):'"'!==i&&(i===t&&r++,d+=t);continue}if(l||o){"\r"===i?(n=!0,r+=2):"\n"===i?(n=!0,r++):d+=t;continue}i===t?(d+=t,r++):"\r"===i?(n=!0,r+=2):("\n"===i?n=!0:d+=i,r++);break;case" ":case"	":n&&-1===c&&(c=r),d+=i;break;case"\r":r++;case"\n":n&&-1!==c&&(d=d.substring(0,d.length-(r-c-1)),c=-1);break;case"#":if(n){-1!==c&&(d=d.substring(0,d.length-(r-c)),c=-1);u:for(let t=r+1;t<e.length;t++)switch(e.charAt(t)){case"\r":t++;case"\n":r=t;break u}continue}default:n&&(n=!1,c=-1),d+=i}}return d}}n.Property=a},22891,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PropertyInstruction=void 0;let r=e.r(18405),i=e.r(17899),a=e.r(57822),s=e.r(68130),o=e.r(11300);class l extends i.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a),this.properties=void 0}getProperties(){if(void 0===this.properties){let e=this.getPropertyArguments();if(0===e.length)this.properties=[];else if(1===e.length)this.properties=[new a.Property(this.document,this.escapeChar,e[0])];else if(2===e.length)-1===e[0].getValue().indexOf("=")?this.properties=[new a.Property(this.document,this.escapeChar,e[0],e[1])]:this.properties=[new a.Property(this.document,this.escapeChar,e[0]),new a.Property(this.document,this.escapeChar,e[1])];else if(-1===e[0].getValue().indexOf("=")){let t=this.document.getText(),n=e[1].getRange().start,i=e[e.length-1].getRange().end;t=t.substring(this.document.offsetAt(n),this.document.offsetAt(i)),this.properties=[new a.Property(this.document,this.escapeChar,e[0],new s.Argument(t,r.Range.create(e[1].getRange().start,e[e.length-1].getRange().end)))]}else{this.properties=[];for(let t=0;t<e.length;t++)this.properties.push(new a.Property(this.document,this.escapeChar,e[t]))}}return this.properties}findTrailingNonWhitespace(e){let t=e.length;e:for(let n=e.length-1;n>=0;n--)switch(e.charAt(n)){case" ":case"	":continue;case"\n":"\r"===e.charAt(n-1)&&(n-=1);case"\r":u:for(let r=n-1;r>=0;r--)switch(e.charAt(r)){case" ":case"	":case"\r":case"\n":case this.escapeChar:continue;default:t=r;break u}break e;default:t=n;break e}return t}getPropertyArguments(){let e=[],t=this.getInstructionRange(),n=this.document.offsetAt(t.end),i=n-this.document.offsetAt(t.start),a=this.getTextContent(),l=a.substring(i),u=o.Util.findLeadingNonWhitespace(l,this.escapeChar);if(-1===u)return[];let c=this.document.positionAt(n+u),d=t.start.line!==c.line,f=!1,g=-1,h=this.findTrailingNonWhitespace(l);a=l.substring(u,h+1);let m=d?-1:0,p=!1;c:for(let t=0;t<a.length;t++){let i=a.charAt(t);switch(i){case this.escapeChar:if(t+1===a.length){f=!0;break c}switch(!d&&(g=t),a.charAt(t+1)){case" ":case"	":if(!o.Util.isWhitespace(a.charAt(t+2))){t+=1;continue}e:for(let i=t+2;i<a.length;i++)switch(a.charAt(i)){case"\r":i++;case"\n":d=!0,t=i;continue c;case" ":case"	":break;default:e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t+2)))),m=i;break e}t=m-1;continue;case"\r":t++;case"\n":d=!0,t+=1;continue;case this.escapeChar:-1===m&&(m=t),t+=1;continue;default:-1===m&&(m=t);continue}case"'":case'"':p&&(this.createSpacedArgument(m,e,a,g,n,u),m=t,p=!1),-1===m&&(m=t);for(let o=t+1;o<a.length;o++)switch(a.charAt(o)){case i:if(" "!==a.charAt(o+1)&&""!==a.charAt(o+1)){t=o;continue c}e.push(new s.Argument(a.substring(m,o+1),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+o+1)))),t=o,m=-1;continue c;case this.escapeChar:o++}break c;case" ":case"	":d?-1!==m&&(p=!0):-1!==m&&(e.push(new s.Argument(a.substring(m,t),r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t)))),m=-1);break;case"\r":t++;case"\n":p=!1;break;case"#":if(d){for(let e=t+1;e<a.length;e++)switch(a.charAt(e)){case"\r":e++;case"\n":t=e,p=!1;continue c}if(-1!==m){let t=a.substring(m,g);e.push(new s.Argument(t,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+g)))),m=-1}break c}-1===m&&(m=t);break;default:if(p&&(this.createSpacedArgument(m,e,a,g,n,u),m=t,p=!1),d=!1,-1===m&&(m=t),"$"===i&&"{"===a.charAt(t+1)){let e=!1,n=!1,r=!1;for(let i=t+1;i<a.length;i++)switch(a.charAt(i)){case this.escapeChar:r=!0;break;case"\r":case"\n":break;case"'":e=!e,r=!1;break;case'"':n=!n,r=!1;break;case" ":case"	":if(r||e||n)break;t=i-1;continue c;case"}":t=i;continue c;default:r=!1}break c}}}if(-1!==m&&m!==a.length){let t=f?a.length-1:a.length,i=a.substring(m,t);e.push(new s.Argument(i,r.Range.create(this.document.positionAt(n+u+m),this.document.positionAt(n+u+t))))}return e}createSpacedArgument(e,t,n,i,a,o){-1!==e&&t.push(new s.Argument(n.substring(e,i),r.Range.create(this.document.positionAt(a+o+e),this.document.positionAt(a+o+i))))}}n.PropertyInstruction=l},74233,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Arg=void 0;let r=e.r(57822),i=e.r(22891);class a extends i.PropertyInstruction{constructor(e,t,n,i,a,s){super(e,t,n,i,a,s),this.property=null;const o=this.getPropertyArguments();1===o.length?this.property=new r.Property(this.document,this.escapeChar,o[0]):this.property=null}getProperty(){return this.property}}n.Arg=a},87925,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Cmd=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Cmd=i},80768,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Copy=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getFromFlag(){let e=super.getFlags();return 1===e.length&&"from"===e[0].getName()?e[0]:null}getHeredocs(){return super.getHeredocs()}}n.Copy=i},49731,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Env=void 0;let r=e.r(22891);class i extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getProperties(){return super.getProperties()}}n.Env=i},64080,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Entrypoint=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Entrypoint=i},34696,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.From=void 0;let r=e.r(18405),i=e.r(46506);class a extends i.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getImage(){let e=this.getArguments();return e.length>0?e[0].getValue():null}getImageName(){let e=this.getRangeContent(this.getImageNameRange());if(null===e)return null;let t=!1,n=!1,r="";for(let i=0;i<e.length;i++){let a=e.charAt(i);switch(a){case this.escapeChar:n=!0;break;case"\r":continue;case"\n":t=!1;break;case" ":case"	":break;case"#":n?t=!0:(r+=a,n=!1);break;default:t||(r+=a,n=!1)}}return r}getImageNameRange(){let e=this.getImageRange();if(e){let t=this.getRegistryRange();t&&(e.start=this.document.positionAt(this.document.offsetAt(t.end)+1));let n=this.getImageTagRange(),r=this.getImageDigestRange();return null===n?null!==r&&(e.end=this.document.positionAt(this.document.offsetAt(r.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(n.start)-1),e}return null}getImageRange(){let e=this.getArguments();return 0!==e.length?e[0].getRange():null}getImageTag(){return this.getRangeContent(this.getImageTagRange())}getImageTagRange(){let e=this.getImageRange();if(e){let t=this.document.offsetAt(e.start),n=this.getRangeContent(e),i=this.indexOf(t,n,"@"),a=n.indexOf("/");if(-1===i){let i=this.lastIndexOf(t,n,":");if(i>a)return r.Range.create(this.document.positionAt(t+i+1),e.end)}let s=n.substring(0,i),o=s.indexOf(":");return -1===o?null:-1===a?r.Range.create(this.document.positionAt(t+o+1),this.document.positionAt(t+i)):o<a?null:r.Range.create(this.document.positionAt(t+o+1),this.document.positionAt(t+s.length))}return null}getImageDigest(){return this.getRangeContent(this.getImageDigestRange())}getImageDigestRange(){let e=this.getImageRange();if(e){let t=this.getRangeContent(e),n=this.lastIndexOf(this.document.offsetAt(e.start),t,"@");if(-1!==n)return r.Range.create(e.start.line,e.start.character+n+1,e.end.line,e.end.character)}return null}indexOf(e,t,n){let r=t.indexOf(n),i=this.getVariables();for(let a=0;a<i.length;a++){let s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){let i=this.document.offsetAt(o.end)-e,s=t.substring(i).indexOf(n);if(-1===s)return -1;r=s+i,a=-1;continue}}return r}lastIndexOf(e,t,n){let r=t.lastIndexOf(n),i=this.getVariables();for(let a=0;a<i.length;a++){let s=e+r,o=i[a].getRange();if(this.document.offsetAt(o.start)<s&&s<this.document.offsetAt(o.end)){if(-1===(r=t.substring(0,r).lastIndexOf(n)))return -1;a=-1;continue}}return r}getRegistry(){return this.getRangeContent(this.getRegistryRange())}getRegistryRange(){let e=this.getImageRange();if(e){let t=this.getImageTagRange(),n=this.getImageDigestRange();null===t?null!==n&&(e.end=this.document.positionAt(this.document.offsetAt(n.start)-1)):e.end=this.document.positionAt(this.document.offsetAt(t.start)-1);let i=this.getRangeContent(e),a=this.document.offsetAt(e.start),s=this.indexOf(a,i,"/");if(-1===s)return null;let o=this.indexOf(a,i,":"),l=this.indexOf(a,i,".");if(-1!==o||-1!==l||"localhost"===i.substring(0,s))return r.Range.create(e.start,this.document.positionAt(a+s))}return null}getBuildStage(){let e=this.getBuildStageRange();return null===e?null:this.getRangeContent(e)}getBuildStageRange(){let e=this.getArguments();return e.length>2&&"AS"===e[1].getValue().toUpperCase()?e[2].getRange():null}getPlatformFlag(){let e=super.getFlags();return 1===e.length&&"platform"===e[0].getName()?e[0]:null}}n.From=a},77734,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Healthcheck=void 0;let r=e.r(46506);class i extends r.ModifiableInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return"CMD"===(e=e.toUpperCase())||"NONE"===e}getSubcommand(){let e=this.getArguments();return 0!==e.length?e[0]:null}}n.Healthcheck=i},66319,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Label=void 0;let r=e.r(22891),i=e.r(11300);class a extends r.PropertyInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getVariables(){let e=super.getVariables();for(let t of this.getProperties()){let n=t.getUnescapedValue();if(null!==n&&n.length>2&&"'"===n.charAt(0)&&"'"===n.charAt(n.length-1)){let n=t.getValueRange();for(let t=0;t<e.length;t++)i.Util.isInsideRange(e[t].getRange().start,n)&&(e.splice(t,1),t--)}}return e}getProperties(){return super.getProperties()}}n.Label=a},71786,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Onbuild=void 0;let r=e.r(18405),i=e.r(55751),a=e.r(17899);class s extends a.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getTrigger(){let e=this.getTriggerWord();return null===e?null:e.toUpperCase()}getTriggerWord(){return this.getRangeContent(this.getTriggerRange())}getTriggerRange(){let e=this.getArguments();return e.length>0?e[0].getRange():null}getTriggerInstruction(){let e=this.getTriggerRange();if(null===e)return null;let t=this.getArguments();return i.Parser.createInstruction(this.document,this.dockerfile,this.escapeChar,r.Range.create(t[0].getRange().start,this.getRange().end),this.getTriggerWord(),e)}}n.Onbuild=s},82949,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Run=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}stopSearchingForFlags(e){return -1===e.indexOf("--")}getHeredocs(){return super.getHeredocs()}}n.Run=i},58566,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Shell=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Shell=i},42446,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Stopsignal=void 0;let r=e.r(17899);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Stopsignal=i},10100,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Workdir=void 0;let r=e.r(17899);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}getPath(){return this.getArgumentsContent()}getAbsolutePath(){let e=this.getPath();if(null===e||e.startsWith("/"))return e;let t=this.getRange().start.line,n=this.dockerfile.getStageHierarchy(t);for(let r=n.length-1;r>=0;r--){let i=n[r].getWORKDIRs();for(let n=i.length-1;n>=0;n--)if(i[n].getRange().start.line<t){let t=i[n].getAbsolutePath();if(null==t)return;return t.endsWith("/")?t+e:t+"/"+e}}}}n.Workdir=i},4977,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.User=void 0;let r=e.r(17899);class i extends r.Instruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.User=i},78888,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Volume=void 0;let r=e.r(30365);class i extends r.JSONInstruction{constructor(e,t,n,r,i,a){super(e,t,n,r,i,a)}}n.Volume=i},6929,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ImageTemplate=void 0;let r=e.r(18405),i=e.r(74233),a=e.r(87925),s=e.r(80768),o=e.r(49731),l=e.r(64080),u=e.r(34696),c=e.r(77734),d=e.r(71786),f=e.r(11300),g=e.r(10100);n.ImageTemplate=class{constructor(){this.comments=[],this.instructions=[]}addComment(e){this.comments.push(e)}getComments(){return this.comments}addInstruction(e){this.instructions.push(e)}getInstructions(){return this.instructions}getInstructionAt(e){for(let t of this.instructions)if(f.Util.isInsideRange(r.Position.create(e,0),t.getRange()))return t;return null}getARGs(){let e=[];for(let t of this.instructions)t instanceof i.Arg&&e.push(t);return e}getCMDs(){let e=[];for(let t of this.instructions)t instanceof a.Cmd&&e.push(t);return e}getCOPYs(){let e=[];for(let t of this.instructions)t instanceof s.Copy&&e.push(t);return e}getENTRYPOINTs(){let e=[];for(let t of this.instructions)t instanceof l.Entrypoint&&e.push(t);return e}getENVs(){let e=[];for(let t of this.instructions)t instanceof o.Env&&e.push(t);return e}getFROM(){for(let e of this.instructions)if(e instanceof u.From)return e;return null}getFROMs(){let e=[];for(let t of this.instructions)t instanceof u.From&&e.push(t);return e}getHEALTHCHECKs(){let e=[];for(let t of this.instructions)t instanceof c.Healthcheck&&e.push(t);return e}getWORKDIRs(){let e=[];for(let t of this.instructions)t instanceof g.Workdir&&e.push(t);return e}getOnbuildTriggers(){let e=[];for(let t of this.instructions)if(t instanceof d.Onbuild){let n=t.getTriggerInstruction();n&&e.push(n)}return e}getAvailableVariables(e){let t=[];for(let n of this.getARGs())if(n.isBefore(e)){let e=n.getProperty();if(e){let n=e.getName();-1===t.indexOf(n)&&t.push(n)}}for(let n of this.getENVs())if(n.isBefore(e))for(let e of n.getProperties()){let n=e.getName();-1===t.indexOf(n)&&t.push(n)}return t}resolveVariable(e,t){let n=this.getENVs();for(let r=n.length-1;r>=0;r--)if(n[r].isBefore(t)){for(let t of n[r].getProperties())if(t.getName()===e)return t.getValue()}let r=this.getARGs();for(let n=r.length-1;n>=0;n--)if(r[n].isBefore(t)){let t=r[n].getProperty();if(t&&t.getName()===e)return t.getValue()}}getRange(){let e=this.getInstructions();if(0===e.length)return r.Range.create(0,0,0,0);let t=e[0].getRange().start,n=e[e.length-1].getRange().end;return r.Range.create(t,n)}contains(e){let t=this.getRange();return null!==t&&f.Util.isInsideRange(e,t)}}},24420,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Dockerfile=void 0;let r=e.r(18405),i=e.r(43736),a=e.r(6929),s=e.r(34696),o=e.r(11300),l=e.r(43736);class u extends a.ImageTemplate{constructor(e){super(),this.initialInstructions=new a.ImageTemplate,this.buildStages=[],this.directives=[],this.foundFrom=!1,this.document=e}getEscapeCharacter(){for(let e of this.directives)if(e.getDirective()===i.Directive.escape){let t=e.getValue();if("\\"===t||"`"===t)return t}return"\\"}getInitialARGs(){return this.initialInstructions.getARGs()}getContainingImage(e){let t=r.Range.create(r.Position.create(0,0),this.document.positionAt(this.document.getText().length));if(!o.Util.isInsideRange(e,t))return null;if((this.initialInstructions.getComments().length>0||this.initialInstructions.getInstructions().length>0)&&o.Util.isInsideRange(e,this.initialInstructions.getRange()))return this.initialInstructions;for(let t of this.buildStages)if(o.Util.isInsideRange(e,t.getRange()))return t;return this}addInstruction(e){e.getKeyword()===l.Keyword.FROM?(this.currentBuildStage=new a.ImageTemplate,this.buildStages.push(this.currentBuildStage),this.foundFrom=!0):this.foundFrom||this.initialInstructions.addInstruction(e),this.foundFrom&&this.currentBuildStage.addInstruction(e),super.addInstruction(e)}setDirectives(e){this.directives=e}getDirective(){return 0===this.directives.length?null:this.directives[0]}getDirectives(){return this.directives}resolveVariable(e,t){for(let n of this.getFROMs()){let r=n.getRange();if(r.start.line<=t&&t<=r.end.line){let n=new a.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}}let n=this.getContainingImage(r.Position.create(t,0));if(null===n)return;let i=n.resolveVariable(e,t);if(null===i){let n=new a.ImageTemplate;for(let e of this.initialInstructions.getARGs())n.addInstruction(e);return n.resolveVariable(e,t)}return i}getAvailableVariables(e){if(this.getInstructionAt(e)instanceof s.From){let e=[];for(let t of this.getInitialARGs()){let n=t.getProperty();n&&e.push(n.getName())}return e}let t=this.getContainingImage(r.Position.create(e,0));return t?t.getAvailableVariables(e):[]}getParentStage(e){let t=e.getFROM(),n=null===t?null:t.getImageName();if(null===n)return null;for(let e of this.getFROMs())if(e.getBuildStage()===n){let n=e.getRange();if(n.start.line===t.getRange().start.line)return null;return this.getContainingImage(n.start)}return null}getStageHierarchy(e){let t=this.getContainingImage(r.Position.create(e,0));if(null===t)return[];let n=[t],i=this.getParentStage(t);for(;null!==i;)n.splice(0,0,i),i=this.getParentStage(i);return n}getAvailableWorkingDirectories(e){let t=new Set;for(let n of this.getStageHierarchy(e))for(let r of n.getWORKDIRs())if(r.getRange().end.line<e){let e=r.getAbsolutePath();null!=e&&(e.endsWith("/")||(e+="/"),t.add(e))}return Array.from(t)}organizeComments(){let e=this.getComments();for(let t=0;t<e.length;t++)if(o.Util.isInsideRange(e[t].getRange().end,this.initialInstructions.getRange()))this.initialInstructions.addComment(e[t]);else for(let n of this.buildStages)o.Util.isInsideRange(e[t].getRange().start,n.getRange())&&n.addComment(e[t])}getRange(){let e=this.getComments(),t=this.getInstructions(),n=null;if(0===e.length)t.length>0&&(n=r.Range.create(t[0].getRange().start,t[t.length-1].getRange().end));else if(0===t.length)n=r.Range.create(e[0].getRange().start,e[e.length-1].getRange().end);else{let i=e[0].getRange().start,a=e[e.length-1].getRange().end,s=t[0].getRange().start,o=t[t.length-1].getRange().end;i.line<s.line?(a.line<o.line&&(n=r.Range.create(i,o)),n=r.Range.create(i,a)):n=a.line<o.line?r.Range.create(s,o):r.Range.create(s,a)}return null===n?0===this.directives.length?null:this.directives[0].getRange():0===this.directives.length?n:r.Range.create(this.directives[0].getRange().start,n.end)}}n.Dockerfile=u},55751,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Parser=void 0;let r=e.r(68882),i=e.r(18405),a=e.r(40154),s=e.r(93805),o=e.r(17899),l=e.r(72111),u=e.r(74233),c=e.r(87925),d=e.r(80768),f=e.r(49731),g=e.r(64080),h=e.r(34696),m=e.r(77734),p=e.r(66319),b=e.r(71786),y=e.r(82949),v=e.r(58566),E=e.r(42446),w=e.r(10100),A=e.r(4977),N=e.r(78888),I=e.r(24420),S=e.r(11300),T=e.r(43736);class R{constructor(){this.escapeChar=null}static createInstruction(e,t,n,r,i,a){switch(i.toUpperCase()){case"ADD":return new l.Add(e,r,t,n,i,a);case"ARG":return new u.Arg(e,r,t,n,i,a);case"CMD":return new c.Cmd(e,r,t,n,i,a);case"COPY":return new d.Copy(e,r,t,n,i,a);case"ENTRYPOINT":return new g.Entrypoint(e,r,t,n,i,a);case"ENV":return new f.Env(e,r,t,n,i,a);case"FROM":return new h.From(e,r,t,n,i,a);case"HEALTHCHECK":return new m.Healthcheck(e,r,t,n,i,a);case"LABEL":return new p.Label(e,r,t,n,i,a);case"ONBUILD":return new b.Onbuild(e,r,t,n,i,a);case"RUN":return new y.Run(e,r,t,n,i,a);case"SHELL":return new v.Shell(e,r,t,n,i,a);case"STOPSIGNAL":return new E.Stopsignal(e,r,t,n,i,a);case"WORKDIR":return new w.Workdir(e,r,t,n,i,a);case"USER":return new A.User(e,r,t,n,i,a);case"VOLUME":return new N.Volume(e,r,t,n,i,a)}return new o.Instruction(e,r,t,n,i,a)}getParserDirectives(e,t){let n=[];this.escapeChar="";let r=+!!S.Util.isUTF8BOM(t.substring(0,1));d:for(let a=r;a<t.length;a++)switch(t.charAt(a)){case" ":case"	":break;case"\r":case"\n":default:break d;case"#":let r=-1,o=-1;for(let l=a+1;l<t.length;l++){let u=t.charAt(l);switch(u){case" ":case"	":-1!==r&&-1===o&&(o=l);break;case"\r":case"\n":break d;case"=":let c=-1,d=-1;-1===o&&(o=l);let f=t.length;f:for(let e=l+1;e<t.length;e++)switch(u=t.charAt(e)){case"\r":case"\n":-1!==c&&-1===d&&(d=e),f=e;break f;case"	":case" ":-1!==c&&-1===d&&(d=e);continue;default:-1===c&&(c=e)}if(-1===r)break d;-1===c?(c=l+1,d=f):-1===d&&(d=t.length);let g=i.Range.create(e.positionAt(a),e.positionAt(f)),h=i.Range.create(e.positionAt(r),e.positionAt(o)),m=i.Range.create(e.positionAt(c),e.positionAt(d));n.push(new s.ParserDirective(e,g,h,m)),r=-1,a="\r"===t.charAt(d)?d+1:d;continue d;default:-1===r&&(r=l)}}}return n}parse(e){this.document=r.TextDocument.create("","",0,e),this.buffer=e;let t=new I.Dockerfile(this.document),n=this.getParserDirectives(this.document,this.buffer),a=0;this.escapeChar="\\",n.length>0?(t.setDirectives(n),this.escapeChar=t.getEscapeCharacter(),a=this.document.offsetAt(i.Position.create(n.length,0))):S.Util.isUTF8BOM(e.substring(0,1))&&(a=1);for(let e=a;e<this.buffer.length;e++){let n=this.buffer.charAt(e);switch(n){case" ":case"	":case"\r":case"\n":break;case"#":e=this.processComment(t,e);break;default:e=this.processInstruction(t,n,e)}}return t.organizeComments(),t}processInstruction(e,t,n){let r=t,i=-1,a=!1;g:for(let s=n+1;s<this.buffer.length;s++)switch(t=this.buffer.charAt(s)){case this.escapeChar:if(a=!0,"\r"===(t=this.buffer.charAt(s+1))||"\n"===t)-1===i&&(i=s),s++;else if(" "===t||"	"===t){for(let e=s+2;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":s=e;continue g;default:i=s+1,r+=this.escapeChar,s=e-2;continue g}i=s+1,r+=this.escapeChar;break g}else i=s+1,r+=this.escapeChar,a=!1;break;case" ":case"	":if(a){t:for(let e=s+1;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":s=e;continue g;default:break t}a=!1}return -1===i&&(i=s),s=this.processArguments(e,r,i,n,s),e.addInstruction(this.createInstruction(e,r,n,i,s)),s;case"\r":case"\n":if(a)continue;return -1===i&&(i=s),e.addInstruction(this.createInstruction(e,r,n,s,s)),s;case"#":if(a)continue;default:i=s+1,r+=t,a=!1}return -1===i&&(i=this.buffer.length),e.addInstruction(this.createInstruction(e,r,n,i,this.buffer.length)),this.buffer.length}processHeredocs(e,t){let n=e.getKeyword();if(n===T.Keyword.ONBUILD){if(null===(e=e.getTriggerInstruction()))return t;n=e.getKeyword()}if(n!==T.Keyword.ADD&&n!==T.Keyword.COPY&&n!==T.Keyword.RUN)return t;let r=[],i=!1;for(let t of e.getArguments()){let e=t.getValue();if(e.startsWith("<<")&&e.length>2){e.startsWith("<<-")&&(i=!0);let t=S.Util.parseHeredocName(e);null!==t&&r.push(t)}}if(r.length>0)for(let e of r)t=this.parseHeredoc(e,t,i);return t}processArguments(e,t,n,r,i){let a=!1;h:for(let s=i+1;s<this.buffer.length;s++)switch(this.buffer.charAt(s)){case"\r":case"\n":if(a)continue;return this.processHeredocs(this.createInstruction(e,t,r,n,s),s);case this.escapeChar:let i=this.buffer.charAt(s+1);if("\n"===i||"\r"===i)a=!0,s++;else if(" "===i||"	"===i){for(let e=s+2;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case" ":case"	":break;case"\r":case"\n":a=!0;default:s=e;continue h}return this.buffer.length}continue;case"#":if(a){s=this.processComment(e,s);continue}break;case" ":case"	":break;default:a&&(a=!1)}return this.buffer.length}processComment(e,t){let n=this.buffer.length;m:for(let e=t+1;e<this.buffer.length;e++)switch(this.buffer.charAt(e)){case"\r":case"\n":n=e;break m}let r=i.Range.create(this.document.positionAt(t),this.document.positionAt(n));return e.addComment(new a.Comment(this.document,r)),n}parseHeredoc(e,t,n){let r=-1,i=!0;for(let a=t;a<this.buffer.length;a++)switch(this.buffer.charAt(a)){case" ":i=!1;break;case"	":n||(i=!1);break;case"\r":case"\n":if(-1!==r&&e===this.buffer.substring(r,a))return a;r=-1,i=!0;break;default:i&&(r=a,i=!1)}return this.buffer.length}createInstruction(e,t,n,r,a){let s=this.document.positionAt(n),o=i.Range.create(s,this.document.positionAt(r)),l=i.Range.create(s,this.document.positionAt(a));return R.createInstruction(this.document,e,this.escapeChar,l,t,o)}}n.Parser=R},43736,(e,t,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.DockerfileParser=n.DefaultVariables=n.Directive=n.Keyword=n.Workdir=n.Volume=n.User=n.Stopsignal=n.Shell=n.Run=n.PropertyInstruction=n.Onbuild=n.ModifiableInstruction=n.Label=n.JSONInstruction=n.Heredoc=n.Healthcheck=n.From=n.Env=n.Entrypoint=n.Copy=n.Cmd=n.Arg=n.Add=n.Variable=n.Property=n.ParserDirective=n.Line=n.Instruction=n.Flag=n.Comment=n.JSONArgument=n.Argument=void 0;var r,i,a,s,o,l=e.r(68130);Object.defineProperty(n,"Argument",{enumerable:!0,get:function(){return l.Argument}});var u=e.r(10736);Object.defineProperty(n,"JSONArgument",{enumerable:!0,get:function(){return u.JSONArgument}});let c=e.r(40154);Object.defineProperty(n,"Comment",{enumerable:!0,get:function(){return c.Comment}});let d=e.r(55751);var f=e.r(14625);Object.defineProperty(n,"Flag",{enumerable:!0,get:function(){return f.Flag}});let g=e.r(17899);Object.defineProperty(n,"Instruction",{enumerable:!0,get:function(){return g.Instruction}});var h=e.r(58969);Object.defineProperty(n,"Line",{enumerable:!0,get:function(){return h.Line}});let m=e.r(93805);Object.defineProperty(n,"ParserDirective",{enumerable:!0,get:function(){return m.ParserDirective}});var p=e.r(57822);Object.defineProperty(n,"Property",{enumerable:!0,get:function(){return p.Property}});var b=e.r(79225);Object.defineProperty(n,"Variable",{enumerable:!0,get:function(){return b.Variable}});var y=e.r(72111);Object.defineProperty(n,"Add",{enumerable:!0,get:function(){return y.Add}});let v=e.r(74233);Object.defineProperty(n,"Arg",{enumerable:!0,get:function(){return v.Arg}});let E=e.r(87925);Object.defineProperty(n,"Cmd",{enumerable:!0,get:function(){return E.Cmd}});let w=e.r(80768);Object.defineProperty(n,"Copy",{enumerable:!0,get:function(){return w.Copy}});let A=e.r(64080);Object.defineProperty(n,"Entrypoint",{enumerable:!0,get:function(){return A.Entrypoint}});let N=e.r(49731);Object.defineProperty(n,"Env",{enumerable:!0,get:function(){return N.Env}});let I=e.r(34696);Object.defineProperty(n,"From",{enumerable:!0,get:function(){return I.From}});let S=e.r(77734);Object.defineProperty(n,"Healthcheck",{enumerable:!0,get:function(){return S.Healthcheck}});var T=e.r(72518);Object.defineProperty(n,"Heredoc",{enumerable:!0,get:function(){return T.Heredoc}});var R=e.r(30365);Object.defineProperty(n,"JSONInstruction",{enumerable:!0,get:function(){return R.JSONInstruction}});var O=e.r(66319);Object.defineProperty(n,"Label",{enumerable:!0,get:function(){return O.Label}});var x=e.r(46506);Object.defineProperty(n,"ModifiableInstruction",{enumerable:!0,get:function(){return x.ModifiableInstruction}});var k=e.r(71786);Object.defineProperty(n,"Onbuild",{enumerable:!0,get:function(){return k.Onbuild}});var C=e.r(22891);Object.defineProperty(n,"PropertyInstruction",{enumerable:!0,get:function(){return C.PropertyInstruction}});var _=e.r(82949);Object.defineProperty(n,"Run",{enumerable:!0,get:function(){return _.Run}});var V=e.r(58566);Object.defineProperty(n,"Shell",{enumerable:!0,get:function(){return V.Shell}});var P=e.r(42446);Object.defineProperty(n,"Stopsignal",{enumerable:!0,get:function(){return P.Stopsignal}});var D=e.r(4977);Object.defineProperty(n,"User",{enumerable:!0,get:function(){return D.User}});var F=e.r(78888);Object.defineProperty(n,"Volume",{enumerable:!0,get:function(){return F.Volume}});let U=e.r(10100);Object.defineProperty(n,"Workdir",{enumerable:!0,get:function(){return U.Workdir}}),(r=a||(n.Keyword=a={})).ADD="ADD",r.ARG="ARG",r.CMD="CMD",r.COPY="COPY",r.ENTRYPOINT="ENTRYPOINT",r.ENV="ENV",r.EXPOSE="EXPOSE",r.FROM="FROM",r.HEALTHCHECK="HEALTHCHECK",r.LABEL="LABEL",r.MAINTAINER="MAINTAINER",r.ONBUILD="ONBUILD",r.RUN="RUN",r.SHELL="SHELL",r.STOPSIGNAL="STOPSIGNAL",r.USER="USER",r.VOLUME="VOLUME",r.WORKDIR="WORKDIR",(i=s||(n.Directive=s={})).escape="escape",i.syntax="syntax",n.DefaultVariables=["ALL_PROXY","all_proxy","FTP_PROXY","ftp_proxy","HTTP_PROXY","http_proxy","HTTPS_PROXY","https_proxy","NO_PROXY","no_proxy"],(o||(n.DockerfileParser=o={})).parse=function(e){return new d.Parser().parse(e)}},11597,e=>{"use strict";let t,n,r,i,a;var s,o,l,u,c,d,f,g,h,m,p,b,y,v,E,w,A,N,I,S,T,R,O,x,k,C,_,V,P,D,F,U,L,M,B,j,G,$,W,K,X,Y,Z,J,H,z,q,Q,ee,et,en,er,ei,ea,es,eo,el=e.i(47909),eu=e.i(74017),ec=e.i(96250),ed=e.i(59756),ef=e.i(61916),eg=e.i(74677),eh=e.i(69741),em=e.i(16795),ep=e.i(87718),eb=e.i(95169),ey=e.i(47587),ev=e.i(66012),eE=e.i(70101),ew=e.i(74838),eA=e.i(10372),eN=e.i(93695);e.i(52474);var eI=e.i(220),eS=e.i(89171);let eT=/\{[^{}]+\}/g;function eR(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:i,bodySerializer:a,headers:s,requestInitExt:o,...l}={...e};o="object"==typeof process&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici?o:void 0,t=eP(t);let u=[];async function c(e,c){var d,f;let g,h,m,p,b,{baseUrl:y,fetch:v=r,Request:E=n,headers:w,params:A={},parseAs:N="json",querySerializer:I,bodySerializer:S=a??e_,body:T,...R}=c||{},O=t;y&&(O=eP(y)??t);let x="function"==typeof i?i:eC(i);I&&(x="function"==typeof I?I:eC({..."object"==typeof i?i:{},...I}));let k=void 0===T?void 0:S(T,eV(s,w,A.header)),C=eV(void 0===k||k instanceof FormData?{}:{"Content-Type":"application/json"},s,w,A.header),_={redirect:"follow",...l,...R,body:k,headers:C},V=new E((d=e,f={baseUrl:O,params:A,querySerializer:x},g=`${f.baseUrl}${d}`,f.params?.path&&(g=function(e,t){let n=e;for(let r of e.match(eT)??[]){let e=r.substring(1,r.length-1),i=!1,a="simple";if(e.endsWith("*")&&(i=!0,e=e.substring(0,e.length-1)),e.startsWith(".")?(a="label",e=e.substring(1)):e.startsWith(";")&&(a="matrix",e=e.substring(1)),!t||void 0===t[e]||null===t[e])continue;let s=t[e];if(Array.isArray(s)){n=n.replace(r,ek(e,s,{style:a,explode:i}));continue}if("object"==typeof s){n=n.replace(r,ex(e,s,{style:a,explode:i}));continue}if("matrix"===a){n=n.replace(r,`;${eO(e,s)}`);continue}n=n.replace(r,"label"===a?`.${encodeURIComponent(s)}`:encodeURIComponent(s))}return n}(g,f.params.path)),(h=f.querySerializer(f.params.query??{})).startsWith("?")&&(h=h.substring(1)),h&&(g+=`?${h}`),g),_);for(let e in R)e in V||(V[e]=R[e]);if(u.length){for(let t of(m=Math.random().toString(36).slice(2,11),p=Object.freeze({baseUrl:O,fetch:v,parseAs:N,querySerializer:x,bodySerializer:S}),u))if(t&&"object"==typeof t&&"function"==typeof t.onRequest){let n=await t.onRequest({request:V,schemaPath:e,params:A,options:p,id:m});if(n)if(n instanceof E)V=n;else if(n instanceof Response){b=n;break}else throw Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!b){try{b=await v(V,o)}catch(n){let t=n;if(u.length)for(let n=u.length-1;n>=0;n--){let r=u[n];if(r&&"object"==typeof r&&"function"==typeof r.onError){let n=await r.onError({request:V,error:t,schemaPath:e,params:A,options:p,id:m});if(n){if(n instanceof Response){t=void 0,b=n;break}if(n instanceof Error){t=n;continue}throw Error("onError: must return new Response() or instance of Error")}}}if(t)throw t}if(u.length)for(let t=u.length-1;t>=0;t--){let n=u[t];if(n&&"object"==typeof n&&"function"==typeof n.onResponse){let t=await n.onResponse({request:V,response:b,schemaPath:e,params:A,options:p,id:m});if(t){if(!(t instanceof Response))throw Error("onResponse: must return new Response() when modifying the response");b=t}}}}if(204===b.status||"HEAD"===V.method||"0"===b.headers.get("Content-Length"))return b.ok?{data:void 0,response:b}:{error:void 0,response:b};if(b.ok)return"stream"===N?{data:b.body,response:b}:{data:await b[N](),response:b};let P=await b.text();try{P=JSON.parse(P)}catch{}return{error:P,response:b}}return{request:(e,t,n)=>c(t,{...n,method:e.toUpperCase()}),GET:(e,t)=>c(e,{...t,method:"GET"}),PUT:(e,t)=>c(e,{...t,method:"PUT"}),POST:(e,t)=>c(e,{...t,method:"POST"}),DELETE:(e,t)=>c(e,{...t,method:"DELETE"}),OPTIONS:(e,t)=>c(e,{...t,method:"OPTIONS"}),HEAD:(e,t)=>c(e,{...t,method:"HEAD"}),PATCH:(e,t)=>c(e,{...t,method:"PATCH"}),TRACE:(e,t)=>c(e,{...t,method:"TRACE"}),use(...e){for(let t of e)if(t){if("object"!=typeof t||!("onRequest"in t||"onResponse"in t||"onError"in t))throw Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(t)}},eject(...e){for(let t of e){let e=u.indexOf(t);-1!==e&&u.splice(e,1)}}}}function eO(e,t,n){if(null==t)return"";if("object"==typeof t)throw Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function ex(e,t,n){if(!t||"object"!=typeof t)return"";let r=[],i={simple:",",label:".",matrix:";"}[n.style]||"&";if("deepObject"!==n.style&&!1===n.explode){for(let e in t)r.push(e,!0===n.allowReserved?t[e]:encodeURIComponent(t[e]));let i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(let i in t){let a="deepObject"===n.style?`${e}[${i}]`:i;r.push(eO(a,t[i],n))}let a=r.join(i);return"label"===n.style||"matrix"===n.style?`${i}${a}`:a}function ek(e,t,n){if(!Array.isArray(t))return"";if(!1===n.explode){let r={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(!0===n.allowReserved?t:t.map(e=>encodeURIComponent(e))).join(r);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}let r={simple:",",label:".",matrix:";"}[n.style]||"&",i=[];for(let r of t)"simple"===n.style||"label"===n.style?i.push(!0===n.allowReserved?r:encodeURIComponent(r)):i.push(eO(e,r,n));return"label"===n.style||"matrix"===n.style?`${r}${i.join(r)}`:i.join(r)}function eC(e){return function(t){let n=[];if(t&&"object"==typeof t)for(let r in t){let i=t[r];if(null!=i){if(Array.isArray(i)){if(0===i.length)continue;n.push(ek(r,i,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if("object"==typeof i){n.push(ex(r,i,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}n.push(eO(r,i,e))}}return n.join("&")}}function e_(e,t){return e instanceof FormData?e:t&&"application/x-www-form-urlencoded"===(t.get instanceof Function?t.get("Content-Type")??t.get("content-type"):t["Content-Type"]??t["content-type"])?new URLSearchParams(e).toString():JSON.stringify(e)}function eV(...e){let t=new Headers;for(let n of e)if(n&&"object"==typeof n)for(let[e,r]of n instanceof Headers?n.entries():Object.entries(n))if(null===r)t.delete(e);else if(Array.isArray(r))for(let n of r)t.append(e,n);else void 0!==r&&t.set(e,r);return t}function eP(e){return e.endsWith("/")?e.substring(0,e.length-1):e}var eD=e.i(67906);function eF(e,t){return!!(null!==e&&"object"==typeof e&&"$typeName"in e&&"string"==typeof e.$typeName)&&(void 0===t||t.typeName===e.$typeName)}function eU(){let e=0,t=0;for(let n=0;n<28;n+=7){let r=this.buf[this.pos++];if(e|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,(128&n)==0)return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){let r=this.buf[this.pos++];if(t|=(127&r)<<n,(128&r)==0)return this.assertBounds(),[e,t]}throw Error("invalid varint")}function eL(e,t,n){for(let r=0;r<28;r+=7){let i=e>>>r,a=i>>>7!=0||0!=t,s=(a?128|i:i)&255;if(n.push(s),!a)return}let r=e>>>28&15|(7&t)<<4,i=t>>3!=0;if(n.push((i?128|r:r)&255),i){for(let e=3;e<31;e+=7){let r=t>>>e,i=r>>>7!=0,a=(i?128|r:r)&255;if(n.push(a),!i)return}n.push(t>>>31&1)}}function eM(e){let t="-"===e[0];t&&(e=e.slice(1));let n=0,r=0;function i(t,i){let a=Number(e.slice(t,i));r*=1e6,(n=1e6*n+a)>=0x100000000&&(r+=n/0x100000000|0,n%=0x100000000)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?eG(n,r):ej(n,r)}function eB(e,t){if({lo:e,hi:t}={lo:e>>>0,hi:t>>>0},t<=2097151)return String(0x100000000*t+e);let n=0xffffff&e,r=(e>>>24|t<<8)&0xffffff,i=t>>16&65535,a=n+6777216*r+6710656*i,s=r+8147497*i,o=2*i;return a>=1e7&&(s+=Math.floor(a/1e7),a%=1e7),s>=1e7&&(o+=Math.floor(s/1e7),s%=1e7),o.toString()+e$(s)+e$(a)}function ej(e,t){return{lo:0|e,hi:0|t}}function eG(e,t){return t=~t,e?e=~e+1:t+=1,ej(e,t)}(o=F||(F={}))[o.Canceled=1]="Canceled",o[o.Unknown=2]="Unknown",o[o.InvalidArgument=3]="InvalidArgument",o[o.DeadlineExceeded=4]="DeadlineExceeded",o[o.NotFound=5]="NotFound",o[o.AlreadyExists=6]="AlreadyExists",o[o.PermissionDenied=7]="PermissionDenied",o[o.ResourceExhausted=8]="ResourceExhausted",o[o.FailedPrecondition=9]="FailedPrecondition",o[o.Aborted=10]="Aborted",o[o.OutOfRange=11]="OutOfRange",o[o.Unimplemented=12]="Unimplemented",o[o.Internal=13]="Internal",o[o.Unavailable=14]="Unavailable",o[o.DataLoss=15]="DataLoss",o[o.Unauthenticated=16]="Unauthenticated",(l=U||(U={}))[l.DOUBLE=1]="DOUBLE",l[l.FLOAT=2]="FLOAT",l[l.INT64=3]="INT64",l[l.UINT64=4]="UINT64",l[l.INT32=5]="INT32",l[l.FIXED64=6]="FIXED64",l[l.FIXED32=7]="FIXED32",l[l.BOOL=8]="BOOL",l[l.STRING=9]="STRING",l[l.BYTES=12]="BYTES",l[l.UINT32=13]="UINT32",l[l.SFIXED32=15]="SFIXED32",l[l.SFIXED64=16]="SFIXED64",l[l.SINT32=17]="SINT32",l[l.SINT64=18]="SINT64";let e$=e=>{let t=String(e);return"0000000".slice(t.length)+t};function eW(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function eK(){let e=this.buf[this.pos++],t=127&e;if((128&e)==0||(t|=(127&(e=this.buf[this.pos++]))<<7,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<14,(128&e)==0)||(t|=(127&(e=this.buf[this.pos++]))<<21,(128&e)==0))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;(128&e)!=0&&t<10;t++)e=this.buf[this.pos++];if((128&e)!=0)throw Error("invalid varint");return this.assertBounds(),t>>>0}let eX=function(){let e=new DataView(new ArrayBuffer(8));if("function"==typeof BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64&&(globalThis.Deno||"object"!=typeof process||"object"!=typeof process.env||"1"!==process.env.BUF_BIGINT_DISABLE)){let t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),r=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){let r="bigint"==typeof e?e:BigInt(e);if(r>n||r<t)throw Error(`invalid int64: ${e}`);return r},uParse(e){let t="bigint"==typeof e?e:BigInt(e);if(t>i||t<r)throw Error(`invalid uint64: ${e}`);return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),eY(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),eZ(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),eY(e),eM(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),eZ(e),eM(e)),dec:(e,t)=>{let n,r,i;return(r=0x80000000&(n=ej(e,t)).hi)&&(n=eG(n.lo,n.hi)),i=eB(n.lo,n.hi),r?"-"+i:i},uDec:(e,t)=>eB(e,t)}}();function eY(e){if(!/^-?[0-9]+$/.test(e))throw Error("invalid int64: "+e)}function eZ(e){if(!/^[0-9]+$/.test(e))throw Error("invalid uint64: "+e)}function eJ(e,t){switch(e){case U.STRING:return"";case U.BOOL:return!1;case U.DOUBLE:case U.FLOAT:return 0;case U.INT64:case U.UINT64:case U.SFIXED64:case U.FIXED64:case U.SINT64:return t?"0":eX.zero;case U.BYTES:return new Uint8Array(0);default:return 0}}let eH=Symbol.for("reflect unsafe local");function ez(e,t){let n=e[t.localName].case;return void 0===n?n:t.fields.find(e=>e.localName===n)}function eq(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]}function eQ(e,t){if(t.oneof){let n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function e0(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function e1(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}function e2(e,t){var n,r,i,a;if(e1(e)&&eH in e&&"add"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){let s=e.field();return t.listKind==s.listKind&&t.scalar===s.scalar&&(null==(n=t.message)?void 0:n.typeName)===(null==(r=s.message)?void 0:r.typeName)&&(null==(i=t.enum)?void 0:i.typeName)===(null==(a=s.enum)?void 0:a.typeName)}return!0}return!1}function e5(e,t){var n,r,i,a;if(e1(e)&&eH in e&&"has"in e&&"field"in e&&"function"==typeof e.field){if(void 0!==t){let s=e.field();return t.mapKey===s.mapKey&&t.mapKind==s.mapKind&&t.scalar===s.scalar&&(null==(n=t.message)?void 0:n.typeName)===(null==(r=s.message)?void 0:r.typeName)&&(null==(i=t.enum)?void 0:i.typeName)===(null==(a=s.enum)?void 0:a.typeName)}return!0}return!1}function e3(e,t){return e1(e)&&eH in e&&"desc"in e&&e1(e.desc)&&"message"===e.desc.kind&&(void 0===t||e.desc.typeName==t.typeName)}function e9(e){let t=e.fields[0];return e4(e.typeName)&&void 0!==t&&"scalar"==t.fieldKind&&"value"==t.name&&1==t.number}function e4(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}function e6(e,t){if(eF(t,e))return t;let n=function(e){let t;if(function(e){switch(e.file.edition){case 999:return!1;case 998:return!0;default:return e.fields.some(e=>2!=e.presence&&"message"!=e.fieldKind&&!e.oneof)}}(e)){let n,r,i=tr.get(e);if(i)({prototype:n,members:r}=i);else{for(let t of(n={},r=new Set,e.members))"oneof"!=t.kind&&("scalar"==t.fieldKind||"enum"==t.fieldKind)&&2!=t.presence&&(r.add(t),n[t.localName]=ti(t));tr.set(e,{prototype:n,members:r})}for(let i of((t=Object.create(n)).$typeName=e.typeName,e.members))if(!r.has(i)){if("field"==i.kind&&("message"==i.fieldKind||("scalar"==i.fieldKind||"enum"==i.fieldKind)&&2!=i.presence))continue;t[i.localName]=ti(i)}}else for(let n of(t={$typeName:e.typeName},e.members))("oneof"==n.kind||2==n.presence)&&(t[n.localName]=ti(n));return t}(e);return void 0!==t&&function(e,t,n){for(let r of e.members){let e,i=n[r.localName];if(null!=i){if("oneof"==r.kind){let t=ez(n,r);if(!t)continue;e=t,i=eQ(n,t)}else e=r;switch(e.fieldKind){case"message":i=e7(e,i);break;case"scalar":i=e8(e,i);break;case"list":i=function(e,t){if(Array.isArray(t)){if(e.scalar==U.BYTES)return t.map(te);if("message"==e.listKind)return t.map(t=>e7(e,t))}return t}(e,i);break;case"map":i=function(e,t){if(e1(t)){if(e.scalar==U.BYTES)return tt(t,te);if("message"==e.mapKind)return tt(t,t=>e7(e,t))}return t}(e,i)}e0(t,e,i)}}}(e,n,t),n}function e8(e,t){return e.scalar==U.BYTES?te(t):t}function e7(e,t){if("message"==e.fieldKind&&!e.oneof&&e9(e.message))return e8(e.message.fields[0],t);if(e1(t)){if("google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!==e.parent.typeName)return t;if(!eF(t,e.message))return e6(e.message,t)}return t}function te(e){return Array.isArray(e)?new Uint8Array(e):e}function tt(e,t){let n={};for(let r of Object.entries(e))n[r[0]]=t(r[1]);return n}let tn=Symbol(),tr=new WeakMap;function ti(e){if("oneof"==e.kind)return{case:void 0};if("list"==e.fieldKind)return[];if("map"==e.fieldKind)return{};if("message"==e.fieldKind)return tn;let t=e.getDefaultValue();return void 0!==t?"scalar"==e.fieldKind&&e.longAsString?t.toString():t:"scalar"==e.fieldKind?eJ(e.scalar,e.longAsString):e.enum.values[0].number}let ta=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class ts extends Error{constructor(e,t,n="FieldValueInvalidError"){super(t),this.name=n,this.field=()=>e}}let to=Symbol.for("@bufbuild/protobuf/text-encoding");function tl(){if(void 0==globalThis[to]){let e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[to]={encodeUtf8:t=>e.encode(t),decodeUtf8:e=>t.decode(e),checkUtf8(e){try{return encodeURIComponent(e),!0}catch(e){return!1}}}}return globalThis[to]}(u=L||(L={}))[u.Varint=0]="Varint",u[u.Bit64=1]="Bit64",u[u.LengthDelimited=2]="LengthDelimited",u[u.StartGroup=3]="StartGroup",u[u.EndGroup=4]="EndGroup",u[u.Bit32=5]="Bit32";class tu{constructor(e=tl().encodeUtf8){this.encodeUtf8=e,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;let t=new Uint8Array(e),n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(tf(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return td(e),eW(e,this.buf),this}bool(e){return this.buf.push(+!!e),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.encodeUtf8(e);return this.uint32(t.byteLength),this.raw(t)}float(e){var t=e;if("string"==typeof t){let e=t;if(Number.isNaN(t=Number(t))&&"NaN"!==e)throw Error("invalid float32: "+e)}else if("number"!=typeof t)throw Error("invalid float32: "+typeof t);if(Number.isFinite(t)&&(t>34028234663852886e22||t<-34028234663852886e22))throw Error("invalid float32: "+t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){tf(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){td(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return td(e),eW(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=eX.enc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),r=eX.uEnc(e);return n.setInt32(0,r.lo,!0),n.setInt32(4,r.hi,!0),this.raw(t)}int64(e){let t=eX.enc(e);return eL(t.lo,t.hi,this.buf),this}sint64(e){let t=eX.enc(e),n=t.hi>>31;return eL(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=eX.uEnc(e);return eL(t.lo,t.hi,this.buf),this}}class tc{constructor(e,t=tl().decodeUtf8){this.decodeUtf8=t,this.varint64=eU,this.uint32=eK,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength)}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case L.Varint:for(;128&this.buf[this.pos++];);break;case L.Bit64:this.pos+=4;case L.Bit32:this.pos+=4;break;case L.LengthDelimited:let r=this.uint32();this.pos+=r;break;case L.StartGroup:for(;;){let[e,n]=this.tag();if(n===L.EndGroup){if(void 0!==t&&e!==t)throw Error("invalid end group tag");break}this.skip(n,e)}break;default:throw Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return eX.dec(...this.varint64())}uint64(){return eX.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,eX.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return eX.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return eX.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.decodeUtf8(this.bytes())}}function td(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>0x7fffffff||e<-0x80000000)throw Error("invalid int32: "+e)}function tf(e){if("string"==typeof e)e=Number(e);else if("number"!=typeof e)throw Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>0xffffffff||e<0)throw Error("invalid uint32: "+e)}function tg(e,t){let n,r="list"==e.fieldKind?e2(t,e):"map"==e.fieldKind?e5(t,e):tm(e,t);if(!0!==r){switch(e.fieldKind){case"list":n=`expected ${tE(e)}, got ${ty(t)}`;break;case"map":n=`expected ${tw(e)}, got ${ty(t)}`;break;default:n=tb(e,t,r)}return new ts(e,n)}}function th(e,t,n){let r=tm(e,n);if(!0!==r)return new ts(e,`list item #${t+1}: ${tb(e,n,r)}`)}function tm(e,t){return void 0!==e.scalar?tp(t,e.scalar):void 0!==e.enum?e.enum.open?Number.isInteger(t):e.enum.values.some(e=>e.number===t):e3(t,e.message)}function tp(e,t){switch(t){case U.DOUBLE:return"number"==typeof e;case U.FLOAT:if("number"!=typeof e)return!1;if(Number.isNaN(e)||!Number.isFinite(e))return!0;if(e>34028234663852886e22||e<-34028234663852886e22)return`${e.toFixed()} out of range`;return!0;case U.INT32:case U.SFIXED32:case U.SINT32:if("number"!=typeof e||!Number.isInteger(e))return!1;if(e>0x7fffffff||e<-0x80000000)return`${e.toFixed()} out of range`;return!0;case U.FIXED32:case U.UINT32:if("number"!=typeof e||!Number.isInteger(e))return!1;if(e>0xffffffff||e<0)return`${e.toFixed()} out of range`;return!0;case U.BOOL:return"boolean"==typeof e;case U.STRING:if("string"!=typeof e)return!1;return tl().checkUtf8(e)||"invalid UTF8";case U.BYTES:return e instanceof Uint8Array;case U.INT64:case U.SFIXED64:case U.SINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return eX.parse(e),!0}catch(t){return`${e} out of range`}return!1;case U.FIXED64:case U.UINT64:if("bigint"==typeof e||"number"==typeof e||"string"==typeof e&&e.length>0)try{return eX.uParse(e),!0}catch(t){return`${e} out of range`}return!1}}function tb(e,t,n){return(n="string"==typeof n?`: ${n}`:`, got ${ty(t)}`,void 0!==e.scalar)?`expected ${function(e){switch(e){case U.STRING:return"string";case U.BOOL:return"boolean";case U.INT64:case U.SINT64:case U.SFIXED64:return"bigint (int64)";case U.UINT64:case U.FIXED64:return"bigint (uint64)";case U.BYTES:return"Uint8Array";case U.DOUBLE:return"number (float64)";case U.FLOAT:return"number (float32)";case U.FIXED32:case U.UINT32:return"number (uint32)";case U.INT32:case U.SFIXED32:case U.SINT32:return"number (int32)"}}(e.scalar)}`+n:void 0!==e.enum?`expected ${e.enum.toString()}`+n:`expected ${tv(e.message)}`+n}function ty(e){switch(typeof e){case"object":if(null===e)return"null";if(e instanceof Uint8Array)return`Uint8Array(${e.length})`;if(Array.isArray(e))return`Array(${e.length})`;if(e2(e))return tE(e.field());if(e5(e))return tw(e.field());if(e3(e))return tv(e.desc);if(eF(e))return`message ${e.$typeName}`;return"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function tv(e){return`ReflectMessage (${e.typeName})`}function tE(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${U[e.scalar]})`}}function tw(e){switch(e.mapKind){case"message":return`ReflectMap (${U[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${U[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${U[e.mapKey]}, ${U[e.scalar]})`}}function tA(e,t,n=!0){return new tI(e,t,n)}let tN=new WeakMap;class tI{get sortedFields(){let e=tN.get(this.desc);if(e)return e;let t=this.desc.fields.concat().sort((e,t)=>e.number-t.number);return tN.set(this.desc,t),t}constructor(e,t,n=!0){this.lists=new Map,this.maps=new Map,this.check=n,this.desc=e,this.message=this[eH]=null!=t?t:e6(e),this.fields=e.fields,this.oneofs=e.oneofs,this.members=e.members}findNumber(e){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(e=>[e.number,e]))),this._fieldsByNumber.get(e)}oneofCase(e){return tS(this.message,e),ez(this.message,e)}isSet(e){tS(this.message,e);var t=this.message;let n=e.localName;if(e.oneof)return t[e.oneof.localName].case===n;if(2!=e.presence)return void 0!==t[n]&&Object.prototype.hasOwnProperty.call(t,n);switch(e.fieldKind){case"list":return t[n].length>0;case"map":return Object.keys(t[n]).length>0;case"scalar":return!function(e,t){switch(e){case U.BOOL:return!1===t;case U.STRING:return""===t;case U.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}(e.scalar,t[n]);case"enum":return t[n]!==e.enum.values[0].number}throw Error("message field with implicit presence")}clear(e){tS(this.message,e);var t=this.message;let n=e.localName;if(e.oneof){let r=e.oneof.localName;t[r].case===n&&(t[r]={case:void 0})}else if(2!=e.presence)delete t[n];else switch(e.fieldKind){case"map":t[n]={};break;case"list":t[n]=[];break;case"enum":t[n]=e.enum.values[0].number;break;case"scalar":t[n]=eJ(e.scalar,e.longAsString)}}get(e){tS(this.message,e);let t=eQ(this.message,e);switch(e.fieldKind){case"list":let n=this.lists.get(e);return n&&n[eH]===t||this.lists.set(e,n=new tT(e,t,this.check)),n;case"map":let r=this.maps.get(e);return r&&r[eH]===t||this.maps.set(e,r=new tR(e,t,this.check)),r;case"message":return tx(e,t,this.check);case"scalar":return void 0===t?eJ(e.scalar,!1):tD(e,t);case"enum":return null!=t?t:e.enum.values[0].number}}set(e,t){let n;if(tS(this.message,e),this.check){let n=tg(e,t);if(n)throw n}n="message"==e.fieldKind?tO(e,t):e5(t)||e2(t)?t[eH]:tF(e,t),e0(this.message,e,n)}getUnknown(){return this.message.$unknown}setUnknown(e){this.message.$unknown=e}}function tS(e,t){if(t.parent.typeName!==e.$typeName)throw new ts(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class tT{field(){return this._field}get size(){return this._arr.length}constructor(e,t,n){this._field=e,this._arr=this[eH]=t,this.check=n}get(e){let t=this._arr[e];return void 0===t?void 0:tC(this._field,t,this.check)}set(e,t){if(e<0||e>=this._arr.length)throw new ts(this._field,`list item #${e+1}: out of range`);if(this.check){let n=th(this._field,e,t);if(n)throw n}this._arr[e]=tk(this._field,t)}add(e){if(this.check){let t=th(this._field,this._arr.length,e);if(t)throw t}this._arr.push(tk(this._field,e))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(let e of this._arr)yield tC(this._field,e,this.check)}*entries(){for(let e=0;e<this._arr.length;e++)yield[e,tC(this._field,this._arr[e],this.check)]}}class tR{constructor(e,t,n=!0){this.obj=this[eH]=null!=t?t:{},this.check=n,this._field=e}field(){return this._field}set(e,t){var n,r;if(this.check){let n=function(e,t,n){let r=tp(t,e.mapKey);if(!0!==r)return new ts(e,`invalid map key: ${tb({scalar:e.mapKey},t,r)}`);let i=tm(e,n);if(!0!==i)return new ts(e,`map entry ${ty(t)}: ${tb(e,n,i)}`)}(this._field,e,t);if(n)throw n}return this.obj[tV(e)]=(n=this._field,r=t,"message"==n.mapKind?tO(n,r):tF(n,r)),this}delete(e){let t=tV(e),n=Object.prototype.hasOwnProperty.call(this.obj,t);return n&&delete this.obj[t],n}clear(){for(let e of Object.keys(this.obj))delete this.obj[e]}get(e){let t=this.obj[tV(e)];return void 0!==t&&(t=t_(this._field,t,this.check)),t}has(e){return Object.prototype.hasOwnProperty.call(this.obj,tV(e))}*keys(){for(let e of Object.keys(this.obj))yield tP(e,this._field.mapKey)}*entries(){for(let e of Object.entries(this.obj))yield[tP(e[0],this._field.mapKey),t_(this._field,e[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(let e of Object.values(this.obj))yield t_(this._field,e,this.check)}forEach(e,t){for(let n of this.entries())e.call(t,n[1],n[0],this)}}function tO(e,t){return e3(t)?e4(t.message.$typeName)&&!e.oneof&&"message"==e.fieldKind?t.message.value:"google.protobuf.Struct"==t.desc.typeName&&"google.protobuf.Value"!=e.parent.typeName?function e(t){let n={};for(let[r,i]of Object.entries(t.fields))n[r]=function t(n){switch(n.kind.case){case"structValue":return e(n.kind.value);case"listValue":return n.kind.value.values.map(t);case"nullValue":case void 0:return null;default:return n.kind.value}}(i);return n}(t.message):t.message:t}function tx(e,t,n){return void 0!==t&&(e9(e.message)&&!e.oneof&&"message"==e.fieldKind?t={$typeName:e.message.typeName,value:tD(e.message.fields[0],t)}:"google.protobuf.Struct"==e.message.typeName&&"google.protobuf.Value"!=e.parent.typeName&&e1(t)&&(t=function e(t){let n={$typeName:"google.protobuf.Struct",fields:{}};if(e1(t))for(let[r,i]of Object.entries(t))n.fields[r]=function t(n){let r={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof n){case"number":r.kind={case:"numberValue",value:n};break;case"string":r.kind={case:"stringValue",value:n};break;case"boolean":r.kind={case:"boolValue",value:n};break;case"object":if(null===n)r.kind={case:"nullValue",value:0};else if(Array.isArray(n)){let e={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(n))for(let r of n)e.values.push(t(r));r.kind={case:"listValue",value:e}}else r.kind={case:"structValue",value:e(n)}}return r}(i);return n}(t))),new tI(e.message,t,n)}function tk(e,t){return"message"==e.listKind?tO(e,t):tF(e,t)}function tC(e,t,n){return"message"==e.listKind?tx(e,t,n):tD(e,t)}function t_(e,t,n){return"message"==e.mapKind?tx(e,t,n):t}function tV(e){return"string"==typeof e||"number"==typeof e?e:String(e)}function tP(e,t){switch(t){case U.STRING:break;case U.INT32:case U.FIXED32:case U.UINT32:case U.SFIXED32:case U.SINT32:{let t=Number.parseInt(e);if(Number.isFinite(t))return t;break}case U.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case U.UINT64:case U.FIXED64:try{return eX.uParse(e)}catch(e){}break;default:try{return eX.parse(e)}catch(e){}}return e}function tD(e,t){switch(e.scalar){case U.INT64:case U.SFIXED64:case U.SINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=eX.parse(t));break;case U.FIXED64:case U.UINT64:"longAsString"in e&&e.longAsString&&"string"==typeof t&&(t=eX.uParse(t))}return t}function tF(e,t){switch(e.scalar){case U.INT64:case U.SFIXED64:case U.SINT64:"longAsString"in e&&e.longAsString?t=String(t):("string"==typeof t||"number"==typeof t)&&(t=eX.parse(t));break;case U.FIXED64:case U.UINT64:"longAsString"in e&&e.longAsString?t=String(t):("string"==typeof t||"number"==typeof t)&&(t=eX.uParse(t))}return t}let tU={readUnknownFields:!0};function tL(e,t,n){let r=tA(e,void 0,!1);return tM(r,new tc(t),n?Object.assign(Object.assign({},tU),n):tU,!1,t.byteLength),r.message}function tM(e,t,n,r,i){var a;let s,o,l=r?t.len:t.pos+i,u=null!=(a=e.getUnknown())?a:[];for(;t.pos<l&&([s,o]=t.tag(),!r||o!=L.EndGroup);){let r=e.findNumber(s);if(!r){let e=t.skip(o,s);n.readUnknownFields&&u.push({no:s,wireType:o,data:e});continue}tB(e,t,r,o,n)}if(r&&(o!=L.EndGroup||s!==i))throw Error("invalid end group tag");u.length>0&&e.setUnknown(u)}function tB(e,t,n,r,i){var a;switch(n.fieldKind){case"scalar":e.set(n,tG(t,n.scalar));break;case"enum":let s=tG(t,U.INT32);if(n.enum.open)e.set(n,s);else if(n.enum.values.some(e=>e.number===s))e.set(n,s);else if(i.readUnknownFields){let t=[];eW(s,t);let i=null!=(a=e.getUnknown())?a:[];i.push({no:n.number,wireType:r,data:new Uint8Array(t)}),e.setUnknown(i)}break;case"message":e.set(n,tj(t,i,n,e.get(n)));break;case"list":!function(e,t,n,r){var i;let a=n.field();if("message"===a.listKind)return n.add(tj(e,r,a));let s=null!=(i=a.scalar)?i:U.INT32;if(t!=L.LengthDelimited||s==U.STRING||s==U.BYTES)return n.add(tG(e,s));let o=e.uint32()+e.pos;for(;e.pos<o;)n.add(tG(e,s))}(t,r,e.get(n),i);break;case"map":!function(e,t,n){let r,i,a=t.field(),s=e.uint32(),o=e.pos+s;for(;e.pos<o;){let[t]=e.tag();switch(t){case 1:r=tG(e,a.mapKey);break;case 2:switch(a.mapKind){case"scalar":i=tG(e,a.scalar);break;case"enum":i=e.int32();break;case"message":i=tj(e,n,a)}}}if(void 0===r&&(r=eJ(a.mapKey,!1)),void 0===i)switch(a.mapKind){case"scalar":i=eJ(a.scalar,!1);break;case"enum":i=a.enum.values[0].number;break;case"message":i=tA(a.message,void 0,!1)}t.set(r,i)}(t,e.get(n),i)}}function tj(e,t,n,r){let i=n.delimitedEncoding,a=null!=r?r:tA(n.message,void 0,!1);return tM(a,e,t,i,i?n.number:e.uint32()),a}function tG(e,t){switch(t){case U.STRING:return e.string();case U.BOOL:return e.bool();case U.DOUBLE:return e.double();case U.FLOAT:return e.float();case U.INT32:return e.int32();case U.INT64:return e.int64();case U.UINT64:return e.uint64();case U.FIXED64:return e.fixed64();case U.BYTES:return e.bytes();case U.FIXED32:return e.fixed32();case U.SFIXED32:return e.sfixed32();case U.SFIXED64:return e.sfixed64();case U.SINT64:return e.sint64();case U.UINT32:return e.uint32();case U.SINT32:return e.sint32()}}function t$(e){let t=F[e];return"string"!=typeof t?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,e=>"_"+e.toLowerCase())}class tW extends Error{constructor(e,t=F.Unknown,n,r,i){super(function(e,t){return e.length?`[${t$(t)}] ${e}`:`[${t$(t)}]`}(e,t)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=e,this.code=t,this.metadata=new Headers(null!=n?n:{}),this.details=null!=r?r:[],this.cause=i}static from(e,t=F.Unknown){return e instanceof tW?e:e instanceof Error?"AbortError"==e.name?new tW(e.message,F.Canceled):new tW(e.message,t,void 0,void 0,e):new tW(String(e),t,void 0,void 0,e)}static[Symbol.hasInstance](e){return e instanceof Error&&(Object.getPrototypeOf(e)===tW.prototype||"ConnectError"===e.name&&"code"in e&&"number"==typeof e.code&&"metadata"in e&&"details"in e&&Array.isArray(e.details)&&"rawMessage"in e&&"string"==typeof e.rawMessage&&"cause"in e)}findDetails(e){let t="message"===e.kind?{getMessage:t=>t===e.typeName?e:void 0}:e,n=[];for(let e of this.details){if("desc"in e){t.getMessage(e.desc.typeName)&&n.push(e6(e.desc,e.value));continue}let r=t.getMessage(e.type);if(r)try{n.push(tL(r,e.value))}catch(e){}}return n}}var tK=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var a,s,o;a=r,s=i,o=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){a({value:e,done:o})},s)})}}},tX=function(e){return this instanceof tX?(this.v=e,this):new tX(e)},tY=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof tX?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}},tZ=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:tX(e[r](t)),done:!1}:i?i(t):t}:i}},tJ=function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,i){var a,s,o;a=r,s=i,o=(t=e[n](t)).done,Promise.resolve(t.value).then(function(e){a({value:e,done:o})},s)})}}},tH=function(e){return this instanceof tH?(this.v=e,this):new tH(e)},tz=function(e){var t,n;return t={},r("next"),r("throw",function(e){throw e}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:tH(e[r](t)),done:!1}:i?i(t):t}:i}},tq=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof tH?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};function tQ(e,t){var n=e=>{var n,r,i,a,s,o,l,u;switch(e.methodKind){case"unary":return n=t,r=e,async function(e,t){var i,a;let s=await n.unary(r,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues);return null==(i=null==t?void 0:t.onHeader)||i.call(t,s.header),null==(a=null==t?void 0:t.onTrailer)||a.call(t,s.trailer),s.message};case"server_streaming":return i=t,a=e,function(e,t){return t0(i.stream(a,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,function(e){return tY(this,arguments,function*(){yield tX((yield*tZ(tK(e))))})}([e]),null==t?void 0:t.contextValues),t)};case"client_streaming":return s=t,o=e,async function(e,t){let n,r=await s.stream(o,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues);null==(d=null==t?void 0:t.onHeader)||d.call(t,r.header);let i=0;try{for(var a,l,u,c,d,f,g,h=!0,m=tJ(r.message);!(a=(g=await m.next()).done);h=!0)c=g.value,h=!1,n=c,i++}catch(e){l={error:e}}finally{try{!h&&!a&&(u=m.return)&&await u.call(m)}finally{if(l)throw l.error}}if(!n)throw new tW("protocol error: missing response message",F.Unimplemented);if(i>1)throw new tW("protocol error: received extra messages for client streaming method",F.Unimplemented);return null==(f=null==t?void 0:t.onTrailer)||f.call(t,r.trailer),n};case"bidi_streaming":return l=t,u=e,function(e,t){return t0(l.stream(u,null==t?void 0:t.signal,null==t?void 0:t.timeoutMs,null==t?void 0:t.headers,e,null==t?void 0:t.contextValues),t)};default:return null}};let r={};for(let t of e.methods){let e=n(t);null!=e&&(r[t.localName]=e)}return r}function t0(e,t){let n=(function(){return tq(this,arguments,function*(){var n,r;let i=yield tH(e);null==(n=null==t?void 0:t.onHeader)||n.call(t,i.header),yield tH((yield*tz(tJ(i.message)))),null==(r=null==t?void 0:t.onTrailer)||r.call(t,i.trailer)})})()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}let t1=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,t2=e=>{if("string"!=typeof e)throw TypeError("Invalid argument expected string");let t=e.match(t1);if(!t)throw Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},t5=e=>"*"===e||"x"===e||"X"===e,t3=e=>{let t=parseInt(e,10);return isNaN(t)?e:t},t9=(e,t)=>{let n,r;if(t5(e)||t5(t))return 0;let[i,a]=typeof(n=t3(e))!=typeof(r=t3(t))?[String(n),String(r)]:[n,r];return i>a?1:i<a?-1:0},t4=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){let r=t9(e[n]||"0",t[n]||"0");if(0!==r)return r}return 0},t6=(e,t)=>{let n=t2(e),r=t2(t),i=n.pop(),a=r.pop(),s=t4(n,r);return 0!==s?s:i&&a?t4(i.split("."),a.split(".")):i||a?i?-1:1:0};function t8(e){let t=function(){if(!i){i=[];let e=ne("std");for(let t=0;t<e.length;t++)i[e[t].charCodeAt(0)]=t;i[45]=e.indexOf("+"),i[95]=e.indexOf("/")}return i}(),n=3*e.length/4;"="==e[e.length-2]?n-=2:"="==e[e.length-1]&&(n-=1);let r=new Uint8Array(n),a=0,s=0,o,l=0;for(let n=0;n<e.length;n++){if(void 0===(o=t[e.charCodeAt(n)]))switch(e[n]){case"=":s=0;case"\n":case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(s){case 0:l=o,s=1;break;case 1:r[a++]=l<<2|(48&o)>>4,l=o,s=2;break;case 2:r[a++]=(15&l)<<4|(60&o)>>2,l=o,s=3;break;case 3:r[a++]=(3&l)<<6|o,s=0}}if(1==s)throw Error("invalid base64 string");return r.subarray(0,a)}function t7(e,t="std"){let n=ne(t),r="std"==t,i="",a=0,s,o=0;for(let t=0;t<e.length;t++)switch(s=e[t],a){case 0:i+=n[s>>2],o=(3&s)<<4,a=1;break;case 1:i+=n[o|s>>4],o=(15&s)<<2,a=2;break;case 2:i+=n[o|s>>6],i+=n[63&s],a=0}return a&&(i+=n[o],r&&(i+="=",1==a&&(i+="="))),i}function ne(e){return n||(r=(n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("")).slice(0,-2).concat("-","_")),"url"==e?r:n}function nt(e){let t=!1,n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i)}}return n.join("")}let nn=new Set(["constructor","toString","toJSON","valueOf"]);function nr(e){return nn.has(e)?e+"$":e}function ni(e){for(let t of e.field)eq(t,"jsonName")||(t.jsonName=nt(t.name));e.nestedType.forEach(ni)}function na(...e){let t,n,r,i=(t=new Map,n=new Map,r=new Map,{kind:"registry",types:t,extendees:n,[Symbol.iterator]:()=>t.values(),get files(){return r.values()},addFile(e,t,n){if(r.set(e.proto.name,e),!t)for(let t of function* e(t){switch(t.kind){case"file":for(let n of t.messages)yield n,yield*e(n);yield*t.enums,yield*t.services,yield*t.extensions;break;case"message":for(let n of t.nestedMessages)yield n,yield*e(n);yield*t.nestedEnums,yield*t.nestedExtensions}}(e))this.add(t);if(n)for(let r of e.dependencies)this.addFile(r,t,n)},add(e){if("extension"==e.kind){let t=n.get(e.extendee.typeName);t||n.set(e.extendee.typeName,t=new Map),t.set(e.number,e)}t.set(e.typeName,e)},get:e=>t.get(e),getFile:e=>r.get(e),getMessage(e){let n=t.get(e);return(null==n?void 0:n.kind)=="message"?n:void 0},getEnum(e){let n=t.get(e);return(null==n?void 0:n.kind)=="enum"?n:void 0},getExtension(e){let n=t.get(e);return(null==n?void 0:n.kind)=="extension"?n:void 0},getExtensionFor(e,t){var r;return null==(r=n.get(e.typeName))?void 0:r.get(t)},getService(e){let n=t.get(e);return(null==n?void 0:n.kind)=="service"?n:void 0}});if(!e.length)return i;if("$typeName"in e[0]&&"google.protobuf.FileDescriptorSet"==e[0].$typeName){for(let t of e[0].file)no(t,i);return i}if("$typeName"in e[0]){let t=e[0],n=e[1],r=new Set;for(let e of[t,...function e(t){let a=[];for(let e of t.dependency){if(void 0!=i.getFile(e)||r.has(e))continue;let s=n(e);if(!s)throw Error(`Unable to resolve ${e}, imported by ${t.name}`);"kind"in s?i.addFile(s,!1,!0):(r.add(s.name),a.push(s))}return a.concat(...a.map(e))}(t)].reverse())no(e,i)}else for(let t of e)for(let e of t.files)i.addFile(e);return i}let ns={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function no(e,t){var n,r,i,a;let s={kind:"file",proto:e,deprecated:null!=(r=null==(n=e.options)?void 0:n.deprecated)&&r,edition:function(e){switch(e.syntax){case"":case"proto2":return 998;case"proto3":return 999;case"editions":if(e.edition in ns)return e.edition;throw Error(`${e.name}: unsupported edition`);default:throw Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}(e),name:e.name.replace(/\.proto$/,""),dependencies:(i=e,a=t,i.dependency.map(e=>{let t=a.getFile(e);if(!t)throw Error(`Cannot find ${e}, imported by ${i.name}`);return t})),enums:[],messages:[],extensions:[],services:[],toString:()=>`file ${e.name}`},o=new Map,l={get:e=>o.get(e),add(e){var t;np((null==(t=e.proto.options)?void 0:t.mapEntry)===!0),o.set(e.typeName,e)}};for(let n of e.enumType)nc(n,s,void 0,t);for(let n of e.messageType)!function e(t,n,r,i,a){var s,o,l,u;let c={kind:"message",proto:t,deprecated:null!=(o=null==(s=t.options)?void 0:s.deprecated)&&o,file:n,parent:r,name:t.name,typeName:nf(t,r,n),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};for(let e of((null==(l=t.options)?void 0:l.mapEntry)===!0?a.add(c):((null!=(u=null==r?void 0:r.nestedMessages)?u:n.messages).push(c),i.add(c)),t.enumType))nc(e,n,c,i);for(let r of t.nestedType)e(r,n,c,i,a)}(n,s,void 0,t,l);for(let n of e.service)!function(e,t,n){var r,i;let a={kind:"service",proto:e,deprecated:null!=(i=null==(r=e.options)?void 0:r.deprecated)&&i,file:t,name:e.name,typeName:nf(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};for(let r of(t.services.push(a),n.add(a),e.method)){let e=function(e,t,n){var r,i,a,s;let o;o=e.clientStreaming&&e.serverStreaming?"bidi_streaming":e.clientStreaming?"client_streaming":e.serverStreaming?"server_streaming":"unary";let l=n.getMessage(ng(e.inputType)),u=n.getMessage(ng(e.outputType));np(l,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),np(u,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);let c=e.name;return{kind:"rpc",proto:e,deprecated:null!=(i=null==(r=e.options)?void 0:r.deprecated)&&i,parent:t,name:c,localName:nr(c.length?nr(c[0].toLowerCase()+c.substring(1)):c),methodKind:o,input:l,output:u,idempotency:null!=(s=null==(a=e.options)?void 0:a.idempotencyLevel)?s:0,toString:()=>`rpc ${t.typeName}.${c}`}}(r,a,n);a.methods.push(e),a.method[e.localName]=e}}(n,s,t);for(let e of(nl(s,t),o.values()))nu(e,t,l);for(let e of s.messages)nu(e,t,l),nl(e,t);t.addFile(s,!0)}function nl(e,t){switch(e.kind){case"file":for(let n of e.proto.extension){let r=nd(n,e,t);e.extensions.push(r),t.add(r)}break;case"message":for(let n of e.proto.extension){let r=nd(n,e,t);e.nestedExtensions.push(r),t.add(r)}for(let n of e.nestedMessages)nl(n,t)}}function nu(e,t,n){let r=e.proto.oneofDecl.map(t=>{var n,r;return n=t,{kind:"oneof",proto:n,deprecated:!1,parent:r=e,fields:[],name:n.name,localName:nr(nt(n.name)),toString(){return`oneof ${r.typeName}.${this.name}`}}}),i=new Set;for(let a of e.proto.field){let s=function(e,t){if(!eq(e,"oneofIndex")||e.proto3Optional)return;let n=t[e.oneofIndex];return np(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}(a,r),o=nd(a,e,t,s,n);e.fields.push(o),e.field[o.localName]=o,void 0===s?e.members.push(o):(s.fields.push(o),i.has(s)||(i.add(s),e.members.push(s)))}for(let t of r.filter(e=>i.has(e)))e.oneofs.push(t);for(let r of e.nestedMessages)nu(r,t,n)}function nc(e,t,n,r){var i,a,s,o,l,u,c;let d=function(e,t){var n;let r=((n=e).substring(0,1)+n.substring(1).replace(/[A-Z]/g,e=>"_"+e)).toLowerCase()+"_";for(let e of t){if(!e.name.toLowerCase().startsWith(r))return;let t=e.name.substring(r.length);if(0==t.length||/^\d/.test(t))return}return r}(e.name,e.value),f={kind:"enum",proto:e,deprecated:null!=(a=null==(i=e.options)?void 0:i.deprecated)&&a,file:t,parent:n,open:!0,name:e.name,typeName:nf(e,n,t),value:{},values:[],sharedPrefix:d,toString(){return`enum ${this.typeName}`}};for(let t of(f.open=1==nm("enumType",{proto:(u=f).proto,parent:null!=(c=u.parent)?c:u.file}),r.add(f),e.value)){let e=t.name;f.values.push(f.value[t.number]={kind:"enum_value",proto:t,deprecated:null!=(o=null==(s=t.options)?void 0:s.deprecated)&&o,parent:f,name:e,localName:nr(void 0==d?e:e.substring(d.length)),number:t.number,toString:()=>`enum value ${f.typeName}.${e}`})}(null!=(l=null==n?void 0:n.nestedEnums)?l:t.enums).push(f)}function nd(e,t,n,r,i){var a,s,o,l;let u=void 0===i,c={kind:"field",proto:e,deprecated:null!=(s=null==(a=e.options)?void 0:a.deprecated)&&s,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:function(e,t,n,r){if(2==e.label)return 3;if(3==e.label)return 2;if(t||e.proto3Optional||n)return 1;let i=nm("fieldPresence",{proto:e,parent:r});return 2==i&&(11==e.type||10==e.type)?1:i}(e,r,u,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(u){let r="file"==t.kind?t:t.file,i="file"==t.kind?void 0:t,a=nf(e,i,r);c.kind="extension",c.file=r,c.parent=i,c.oneof=void 0,c.typeName=a,c.jsonName=`[${a}]`,c.toString=()=>`extension ${a}`;let s=n.getMessage(ng(e.extendee));np(s,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),c.extendee=s}else np("message"==t.kind),c.parent=t,c.oneof=r,c.localName=r?nt(e.name):nr(nt(e.name)),c.jsonName=e.jsonName,c.toString=()=>`field ${t.typeName}.${e.name}`;let d=e.label,f=e.type,g=null==(o=e.options)?void 0:o.jstype;if(3===d){let r=11==f?null==i?void 0:i.get(ng(e.typeName)):void 0;if(r){let e,t;c.fieldKind="map";let{key:n,value:i}=(e=(l=r).fields.find(e=>1===e.number),t=l.fields.find(e=>2===e.number),np(e&&"scalar"==e.fieldKind&&e.scalar!=U.BYTES&&e.scalar!=U.FLOAT&&e.scalar!=U.DOUBLE&&t&&"list"!=t.fieldKind&&"map"!=t.fieldKind),{key:e,value:t});return c.mapKey=n.scalar,c.mapKind=i.fieldKind,c.message=i.message,c.delimitedEncoding=!1,c.enum=i.enum,c.scalar=i.scalar,c}switch(c.fieldKind="list",f){case 11:case 10:c.listKind="message",c.message=n.getMessage(ng(e.typeName)),np(c.message),c.delimitedEncoding=nh(e,t);break;case 14:c.listKind="enum",c.enum=n.getEnum(ng(e.typeName)),np(c.enum);break;default:c.listKind="scalar",c.scalar=f,c.longAsString=1==g}return c.packed=function(e,t){if(3!=e.label)return!1;switch(e.type){case 9:case 12:case 10:case 11:return!1}let n=e.options;return n&&eq(n,"packed")?n.packed:1==nm("repeatedFieldEncoding",{proto:e,parent:t})}(e,t),c}switch(f){case 11:case 10:c.fieldKind="message",c.message=n.getMessage(ng(e.typeName)),np(c.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.delimitedEncoding=nh(e,t),c.getDefaultValue=()=>void 0;break;case 14:{let t=n.getEnum(ng(e.typeName));np(void 0!==t,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.fieldKind="enum",c.enum=n.getEnum(ng(e.typeName)),c.getDefaultValue=()=>eq(e,"defaultValue")?function(e,t){let n=e.values.find(e=>e.name===t);if(!n)throw Error(`cannot parse ${e} default value: ${t}`);return n.number}(t,e.defaultValue):void 0;break}default:c.fieldKind="scalar",c.scalar=f,c.longAsString=1==g,c.getDefaultValue=()=>eq(e,"defaultValue")?function(e,t){switch(e){case U.STRING:return t;case U.BYTES:{let n=function(e){let t=[],n={tail:e,c:"",next(){return 0!=this.tail.length&&(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(e){if(this.tail.length>=e){let t=this.tail.substring(0,e);return this.tail=this.tail.substring(e),t}return!1}};for(;n.next();)if("\\"===n.c){if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{let e=n.c,r=n.take(2);if(!1===r)return!1;let i=parseInt(e+r,8);if(Number.isNaN(i))return!1;t.push(i);break}case"x":{let e=n.c,r=n.take(2);if(!1===r)return!1;let i=parseInt(e+r,16);if(Number.isNaN(i))return!1;t.push(i);break}case"u":{let e=n.c,r=n.take(4);if(!1===r)return!1;let i=parseInt(e+r,16);if(Number.isNaN(i))return!1;let a=new Uint8Array(4);new DataView(a.buffer).setInt32(0,i,!0),t.push(a[0],a[1],a[2],a[3]);break}case"U":{let e=n.c,r=n.take(8);if(!1===r)return!1;let i=eX.uEnc(e+r),a=new Uint8Array(8),s=new DataView(a.buffer);s.setInt32(0,i.lo,!0),s.setInt32(4,i.hi,!0),t.push(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7])}}}else t.push(n.c.charCodeAt(0));return new Uint8Array(t)}(t);if(!1===n)throw Error(`cannot parse ${U[e]} default value: ${t}`);return n}case U.INT64:case U.SFIXED64:case U.SINT64:return eX.parse(t);case U.UINT64:case U.FIXED64:return eX.uParse(t);case U.DOUBLE:case U.FLOAT:switch(t){case"inf":return 1/0;case"-inf":return-1/0;case"nan":return NaN;default:return parseFloat(t)}case U.BOOL:return"true"===t;case U.INT32:case U.UINT32:case U.SINT32:case U.FIXED32:case U.SFIXED32:return parseInt(t,10)}}(f,e.defaultValue):void 0}return c}function nf(e,t,n){return t?`${t.typeName}.${e.name}`:n.proto.package.length>0?`${n.proto.package}.${e.name}`:`${e.name}`}function ng(e){return e.startsWith(".")?e.substring(1):e}function nh(e,t){return 10==e.type||2==nm("messageEncoding",{proto:e,parent:t})}function nm(e,t){var n,r;let i=null==(n=t.proto.options)?void 0:n.features;if(i){let t=i[e];if(0!=t)return t}if("kind"in t){if("message"==t.kind)return nm(e,null!=(r=t.parent)?r:t.file);let n=ns[t.edition];if(!n)throw Error(`feature default for edition ${t.edition} not found`);return n[e]}return nm(e,t.parent)}function np(e,t){if(!e)throw Error(t)}function nb(e){var t,n,r,i,a,s,o,l;return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:null!=(n=null==(t=e.field)?void 0:t.map(ny))?n:[],extension:[],nestedType:null!=(i=null==(r=e.nestedType)?void 0:r.map(nb))?i:[],enumType:null!=(s=null==(a=e.enumType)?void 0:a.map(nv))?s:[],extensionRange:null!=(l=null==(o=e.extensionRange)?void 0:o.map(e=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},e)))?l:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function ny(e){var t,n,r,i;return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?(t=e.options,Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},t),{targets:null!=(n=t.targets)?n:[],editionDefaults:null!=(i=null==(r=t.editionDefaults)?void 0:r.map(e=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},e)))?i:[],uninterpretedOption:[]}))):void 0}))}function nv(e){return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(e=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},e))})}function nE(e,t,...n){return n.reduce((e,t)=>e.nestedMessages[t],e.messages[t])}let nw=nE((s={name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:0x1ff2b601}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:0x20000000}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:0x1ff2b601}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_UNSTABLE",number:9999},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:0x7fffffff}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]},(a=Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},s),{messageType:s.messageType.map(nb),enumType:s.enumType.map(nv)}))).messageType.forEach(ni),na(a,()=>void 0).getFile(a.name)),1);function nA(e,t){var n;let r=tL(nw,t8(e));return r.messageType.forEach(ni),r.dependency=null!=(n=null==t?void 0:t.map(e=>e.proto.name))?n:[],na(r,e=>null==t?void 0:t.find(t=>t.proto.name===e)).getFile(r.name)}function nN(e,t,...n){if(n.length>0)throw Error();return e.services[t]}(c=M||(M={}))[c.DECLARATION=0]="DECLARATION",c[c.UNVERIFIED=1]="UNVERIFIED",(d=B||(B={}))[d.DOUBLE=1]="DOUBLE",d[d.FLOAT=2]="FLOAT",d[d.INT64=3]="INT64",d[d.UINT64=4]="UINT64",d[d.INT32=5]="INT32",d[d.FIXED64=6]="FIXED64",d[d.FIXED32=7]="FIXED32",d[d.BOOL=8]="BOOL",d[d.STRING=9]="STRING",d[d.GROUP=10]="GROUP",d[d.MESSAGE=11]="MESSAGE",d[d.BYTES=12]="BYTES",d[d.UINT32=13]="UINT32",d[d.ENUM=14]="ENUM",d[d.SFIXED32=15]="SFIXED32",d[d.SFIXED64=16]="SFIXED64",d[d.SINT32=17]="SINT32",d[d.SINT64=18]="SINT64",(f=j||(j={}))[f.OPTIONAL=1]="OPTIONAL",f[f.REPEATED=3]="REPEATED",f[f.REQUIRED=2]="REQUIRED",(g=G||(G={}))[g.SPEED=1]="SPEED",g[g.CODE_SIZE=2]="CODE_SIZE",g[g.LITE_RUNTIME=3]="LITE_RUNTIME",(h=$||($={}))[h.STRING=0]="STRING",h[h.CORD=1]="CORD",h[h.STRING_PIECE=2]="STRING_PIECE",(m=W||(W={}))[m.JS_NORMAL=0]="JS_NORMAL",m[m.JS_STRING=1]="JS_STRING",m[m.JS_NUMBER=2]="JS_NUMBER",(p=K||(K={}))[p.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",p[p.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",p[p.RETENTION_SOURCE=2]="RETENTION_SOURCE",(b=X||(X={}))[b.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",b[b.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",b[b.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",b[b.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",b[b.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",b[b.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",b[b.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",b[b.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",b[b.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",b[b.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD",(y=Y||(Y={}))[y.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",y[y.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",y[y.IDEMPOTENT=2]="IDEMPOTENT",(v=Z||(Z={}))[v.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",v[v.EXPORT_ALL=1]="EXPORT_ALL",v[v.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",v[v.LOCAL_ALL=3]="LOCAL_ALL",v[v.STRICT=4]="STRICT",(E=J||(J={}))[E.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",E[E.EXPLICIT=1]="EXPLICIT",E[E.IMPLICIT=2]="IMPLICIT",E[E.LEGACY_REQUIRED=3]="LEGACY_REQUIRED",(w=H||(H={}))[w.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",w[w.OPEN=1]="OPEN",w[w.CLOSED=2]="CLOSED",(A=z||(z={}))[A.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",A[A.PACKED=1]="PACKED",A[A.EXPANDED=2]="EXPANDED",(N=q||(q={}))[N.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",N[N.VERIFY=2]="VERIFY",N[N.NONE=3]="NONE",(I=Q||(Q={}))[I.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",I[I.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",I[I.DELIMITED=2]="DELIMITED",(S=ee||(ee={}))[S.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",S[S.ALLOW=1]="ALLOW",S[S.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT",(T=et||(et={}))[T.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",T[T.STYLE2024=1]="STYLE2024",T[T.STYLE_LEGACY=2]="STYLE_LEGACY",(R=en||(en={}))[R.NONE=0]="NONE",R[R.SET=1]="SET",R[R.ALIAS=2]="ALIAS",(O=er||(er={}))[O.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",O[O.EDITION_LEGACY=900]="EDITION_LEGACY",O[O.EDITION_PROTO2=998]="EDITION_PROTO2",O[O.EDITION_PROTO3=999]="EDITION_PROTO3",O[O.EDITION_2023=1e3]="EDITION_2023",O[O.EDITION_2024=1001]="EDITION_2024",O[O.EDITION_UNSTABLE=9999]="EDITION_UNSTABLE",O[O.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",O[O.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",O[O.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",O[O.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",O[O.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",O[O.EDITION_MAX=0x7fffffff]="EDITION_MAX",(x=ei||(ei={}))[x.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",x[x.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",x[x.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT";let nI=nA("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),nS=nE(nA("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),0),nT={writeUnknownFields:!0};function nR(e,t,n){return nO(new tu,n?Object.assign(Object.assign({},nT),n):nT,tA(e,t)).finish()}function nO(e,t,n){var r;for(let r of n.sortedFields){if(!n.isSet(r)){if(3==r.presence)throw Error(`cannot encode ${r} to binary: required field not set`);continue}nx(e,t,n,r)}if(t.writeUnknownFields)for(let{no:t,wireType:i,data:a}of null!=(r=n.getUnknown())?r:[])e.tag(t,i).raw(a);return e}function nx(e,t,n,r){var i;switch(r.fieldKind){case"scalar":case"enum":nk(e,n.desc.typeName,r.name,null!=(i=r.scalar)?i:U.INT32,r.number,n.get(r));break;case"list":!function(e,t,n,r){var i;if("message"==n.listKind){for(let i of r)nC(e,t,n,i);return}let a=null!=(i=n.scalar)?i:U.INT32;if(n.packed){if(!r.size)return;for(let t of(e.tag(n.number,L.LengthDelimited).fork(),r))n_(e,n.parent.typeName,n.name,a,t);e.join();return}for(let t of r)nk(e,n.parent.typeName,n.name,a,n.number,t)}(e,t,r,n.get(r));break;case"message":nC(e,t,r,n.get(r));break;case"map":for(let[i,a]of n.get(r))!function(e,t,n,r,i){var a;switch(e.tag(n.number,L.LengthDelimited).fork(),nk(e,n.parent.typeName,n.name,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":nk(e,n.parent.typeName,n.name,null!=(a=n.scalar)?a:U.INT32,2,i);break;case"message":nO(e.tag(2,L.LengthDelimited).fork(),t,i).join()}e.join()}(e,t,r,i,a)}}function nk(e,t,n,r,i,a){n_(e.tag(i,function(e){switch(e){case U.BYTES:case U.STRING:return L.LengthDelimited;case U.DOUBLE:case U.FIXED64:case U.SFIXED64:return L.Bit64;case U.FIXED32:case U.SFIXED32:case U.FLOAT:return L.Bit32;default:return L.Varint}}(r)),t,n,r,a)}function nC(e,t,n,r){n.delimitedEncoding?nO(e.tag(n.number,L.StartGroup),t,r).tag(n.number,L.EndGroup):nO(e.tag(n.number,L.LengthDelimited).fork(),t,r).join()}function n_(e,t,n,r,i){try{switch(r){case U.STRING:e.string(i);break;case U.BOOL:e.bool(i);break;case U.DOUBLE:e.double(i);break;case U.FLOAT:e.float(i);break;case U.INT32:e.int32(i);break;case U.INT64:e.int64(i);break;case U.UINT64:e.uint64(i);break;case U.FIXED64:e.fixed64(i);break;case U.BYTES:e.bytes(i);break;case U.FIXED32:e.fixed32(i);break;case U.SFIXED32:e.sfixed32(i);break;case U.SFIXED64:e.sfixed64(i);break;case U.SINT64:e.sint64(i);break;case U.UINT32:e.uint32(i);break;case U.SINT32:e.sint32(i)}}catch(e){if(e instanceof Error)throw Error(`cannot encode field ${t}.${n} to binary: ${e.message}`);throw e}}function nV(e){let t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw Error(`invalid type url: ${e}`);return n}let nP=nA("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),nD=nE(nP,0),nF=nE(nP,1),nU=nE(nP,2);function nL(e,t){let n=e.typeName,r=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),i=Object.assign(Object.assign({},e.extendee),{fields:[r],members:[r],oneofs:[]}),a=e6(i,void 0!==t?{[n]:t}:void 0);return[tA(i,a),r,()=>{let t=a[n];if(void 0===t){let t=e.message;return e9(t)?eJ(t.fields[0].scalar,t.fields[0].longAsString):e6(t)}return t}]}function nM(e,t){if(e.extendee.typeName!=t.$typeName)throw Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}(k=ea||(ea={}))[k.NULL_VALUE=0]="NULL_VALUE";let nB={ignoreUnknownFields:!1};function nj(e,t,n){let r=tA(e);try{nG(r,t,n?Object.assign(Object.assign({},nB),n):nB)}catch(e){if(e instanceof Error&&ta.includes(e.name)&&"field"in e&&"function"==typeof e.field)throw Error(`cannot decode ${e.field()} from JSON: ${e.message}`,{cause:e});throw e}return r.message}function nG(e,t,n){var r;if(function(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t,n){var r,i,a,s,o;if(null===t||Array.isArray(t)||"object"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${ty(t)}`);if(0==Object.keys(t).length)return;let l=t["@type"];if("string"!=typeof l||""==l)throw Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);let u=l.includes("/")?l.substring(l.lastIndexOf("/")+1):l;if(!u.length)throw Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);let c=null==(r=n.registry)?void 0:r.getMessage(u);if(!c)throw Error(`cannot decode message ${e.$typeName} from JSON: ${l} is not in the type registry`);let d=tA(c);if(u.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value"))nG(d,t.value,n);else{let e=Object.assign({},t);delete e["@type"],nG(d,e,n)}i=d.desc,a=d.message,(s=e)||(s=e6(nS)),s.value=nR(i,a),s.typeUrl=(o=a.$typeName,`type.googleapis.com/${o}`)}(e.message,t,n),!0;case"google.protobuf.Timestamp":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${ty(t)}`);let n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);let r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=eX.parse(r/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}(e.message,t),!0;case"google.protobuf.Duration":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${ty(t)}`);let n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(null===n)throw Error(`cannot decode message ${e.$typeName} from JSON: ${ty(t)}`);let r=Number(n[1]);if(r>315576e6||r<-315576e6)throw Error(`cannot decode message ${e.$typeName} from JSON: ${ty(t)}`);e.seconds=eX.parse(r),"string"!=typeof n[2]||(e.nanos=parseInt(n[2]+"0".repeat(9-n[2].length)),(r<0||Object.is(r,-0))&&(e.nanos=-e.nanos))}(e.message,t),!0;case"google.protobuf.FieldMask":return function(e,t){if("string"!=typeof t)throw Error(`cannot decode message ${e.$typeName} from JSON: ${ty(t)}`);""!==t&&(e.paths=t.split(",").map(function(t){if(t.includes("_"))throw Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);let n=t.replace(/[A-Z]/g,e=>"_"+e.toLowerCase());return"_"===n[0]?n.substring(1):n}))}(e.message,t),!0;case"google.protobuf.Struct":return nH(e.message,t),!0;case"google.protobuf.Value":return nz(e.message,t),!0;case"google.protobuf.ListValue":return nq(e.message,t),!0;default:if(e9(e.desc)){let n=e.desc.fields[0];return null===t?e.clear(n):e.set(n,nZ(n,t,!0)),!0}return!1}}(e,t,n))return;if(null==t||Array.isArray(t)||"object"!=typeof t)throw Error(`cannot decode ${e.desc} from JSON: ${ty(t)}`);let i=new Map,a=new Map;for(let t of e.desc.fields)a.set(t.name,t).set(t.jsonName,t);for(let[s,o]of Object.entries(t)){let t=a.get(s);if(t){if(t.oneof){if(null===o&&"scalar"==t.fieldKind)continue;let e=i.get(t.oneof);if(void 0!==e)throw new ts(t.oneof,`oneof set multiple times by ${e.name} and ${t.name}`);i.set(t.oneof,t)}n$(e,t,o,n)}else{let t;if(s.startsWith("[")&&s.endsWith("]")&&(t=null==(r=n.registry)?void 0:r.getExtension(s.substring(1,s.length-1)))&&t.extendee.typeName===e.desc.typeName){let[r,i,a]=nL(t);n$(r,i,o,n),function(e,t,n){var r;nM(t,e);let i=(null!=(r=e.$unknown)?r:[]).filter(e=>e.no!==t.number),[a,s]=nL(t,n),o=new tu;nx(o,{writeUnknownFields:!0},a,s);let l=new tc(o.finish());for(;l.pos<l.len;){let[e,t]=l.tag(),n=l.skip(t,e);i.push({no:e,wireType:t,data:n})}e.$unknown=i}(e.message,t,a())}if(!t&&!n.ignoreUnknownFields)throw Error(`cannot decode ${e.desc} from JSON: key "${s}" is unknown`)}}}function n$(e,t,n,r){var i,a,s,o,l,u;switch(t.fieldKind){case"scalar":let c;i=e,(c=nZ(a=t,n,!1))===nY?i.clear(a):i.set(a,c);break;case"enum":let d;s=e,o=t,l=n,u=r,(d=nX(o.enum,l,u.ignoreUnknownFields,!1))===nY?s.clear(o):d!==nK&&s.set(o,d);break;case"message":!function(e,t,n,r){if(null===n&&"google.protobuf.Value"!=t.message.typeName)return e.clear(t);let i=e.isSet(t)?e.get(t):tA(t.message);nG(i,n,r),e.set(t,i)}(e,t,n,r);break;case"list":!function(e,t,n){if(null===t)return;let r=e.field();if(!Array.isArray(t))throw new ts(r,"expected Array, got "+ty(t));for(let i of t){if(null===i&&!nW(r))throw new ts(r,"list item must not be null");switch(r.listKind){case"message":let t=tA(r.message);nG(t,i,n),e.add(t);break;case"enum":let a=nX(r.enum,i,n.ignoreUnknownFields,!0);a!==nK&&e.add(a);break;case"scalar":e.add(nZ(r,i,!0))}}}(e.get(t),n,r);break;case"map":!function(e,t,n){if(null===t)return;let r=e.field();if("object"!=typeof t||Array.isArray(t))throw new ts(r,"expected object, got "+ty(t));for(let[i,a]of Object.entries(t)){let t;if(null===a&&!nW(r))throw new ts(r,"map value must not be null");switch(r.mapKind){case"message":let s=tA(r.message);nG(s,a,n),t=s;break;case"enum":if((t=nX(r.enum,a,n.ignoreUnknownFields,!0))===nK)return;break;case"scalar":t=nZ(r,a,!0)}let o=function(e,t){switch(e){case U.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case U.INT32:case U.FIXED32:case U.UINT32:case U.SFIXED32:case U.SINT32:return nJ(t);default:return t}}(r.mapKey,i);e.set(o,t)}}(e.get(t),n,r)}}function nW(e){var t,n;return(null==(t=e.message)?void 0:t.typeName)=="google.protobuf.Value"||(null==(n=e.enum)?void 0:n.typeName)=="google.protobuf.NullValue"}let nK=Symbol();function nX(e,t,n,r){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:r?e.values[0].number:nY;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":let i=e.values.find(e=>e.name===t);if(void 0!==i)return i.number;if(n)return nK}throw Error(`cannot decode ${e} from JSON: ${ty(t)}`)}let nY=Symbol();function nZ(e,t,n){if(null===t)return n?eJ(e.scalar,!1):nY;switch(e.scalar){case U.DOUBLE:case U.FLOAT:if("NaN"===t)return NaN;if("Infinity"===t)return 1/0;if("-Infinity"===t)return-1/0;if("number"==typeof t){if(Number.isNaN(t))throw new ts(e,"unexpected NaN number");if(!Number.isFinite(t))throw new ts(e,"unexpected infinite number");break}if("string"==typeof t){if(""===t||t.trim().length!==t.length)break;let e=Number(t);if(!Number.isFinite(e))break;return e}break;case U.INT32:case U.FIXED32:case U.SFIXED32:case U.SINT32:case U.UINT32:return nJ(t);case U.BYTES:if("string"==typeof t){if(""===t)return new Uint8Array(0);try{return t8(t)}catch(t){throw new ts(e,t instanceof Error?t.message:String(t))}}}return t}function nJ(e){if("string"==typeof e){if(""===e||e.trim().length!==e.length)return e;let t=Number(e);return Number.isNaN(t)?e:t}return e}function nH(e,t){if("object"!=typeof t||null==t||Array.isArray(t))throw Error(`cannot decode message ${e.$typeName} from JSON ${ty(t)}`);for(let[n,r]of Object.entries(t)){let t=e6(nF);nz(t,r),e.fields[n]=t}}function nz(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(null===t)e.kind={case:"nullValue",value:ea.NULL_VALUE};else if(Array.isArray(t)){let n=e6(nU);nq(n,t),e.kind={case:"listValue",value:n}}else{let n=e6(nD);nH(n,t),e.kind={case:"structValue",value:n}}break;default:throw Error(`cannot decode message ${e.$typeName} from JSON ${ty(t)}`)}return e}function nq(e,t){if(!Array.isArray(t))throw Error(`cannot decode message ${e.$typeName} from JSON ${ty(t)}`);for(let n of t){let t=e6(nF);nz(t,n),e.values.push(t)}}function nQ(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}let n0={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function n1(e,t){var n,r;let i=function(e,t){if(e.desc.typeName.startsWith("google.protobuf."))switch(e.desc.typeName){case"google.protobuf.Any":return function(e,t){let n,r;if(""===e.typeUrl)return{};let{registry:i}=t;if(i&&(n=function(e,t){var n,r;if(""===e.typeUrl)return;let i="message"==t.kind?t:t.getMessage(nV(e.typeUrl));if(i&&(n=e,r=i,""!==n.typeUrl&&("string"==typeof r?r:r.typeName)===nV(n.typeUrl)))return tL(i,e.value)}(e,i))&&(r=i.getMessage(n.$typeName)),!r||!n)throw Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let a=n1(tA(r,n),t);return(r.typeName.startsWith("google.protobuf.")||null===a||Array.isArray(a)||"object"!=typeof a)&&(a={value:a}),a["@type"]=e.typeUrl,a}(e.message,t);case"google.protobuf.Timestamp":return function(e){let t=1e3*Number(e.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);if(e.nanos>0x3b9ac9ff)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be greater than 99999999`);let n="Z";if(e.nanos>0){let t=(e.nanos+1e9).toString().substring(1);n="000000"===t.substring(3)?"."+t.substring(0,3)+"Z":"000"===t.substring(6)?"."+t.substring(0,6)+"Z":"."+t+"Z"}return new Date(t).toISOString().replace(".000Z",n)}(e.message);case"google.protobuf.Duration":return function(e){let t=Number(e.seconds),n=e.nanos;if(t>315576e6||t<-315576e6)throw Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);if(t>0&&n<0||t<0&&n>0)throw Error(`cannot encode message ${e.$typeName} to JSON: nanos sign must match seconds sign`);let r=e.seconds.toString();if(0!==n){let e=Math.abs(n).toString();"000000"===(e="0".repeat(9-e.length)+e).substring(3)?e=e.substring(0,3):"000"===e.substring(6)&&(e=e.substring(0,6)),r+="."+e,n<0&&0==t&&(r="-"+r)}return r+"s"}(e.message);case"google.protobuf.FieldMask":var n;return(n=e.message).paths.map(e=>{if(e.match(/_[0-9]?_/g)||e.match(/[A-Z]/g))throw Error(`cannot encode message ${n.$typeName} to JSON: lowerCamelCase of path name "`+e+'" is irreversible');return nt(e)}).join(",");case"google.protobuf.Struct":return n9(e.message);case"google.protobuf.Value":return n4(e.message);case"google.protobuf.ListValue":return n6(e.message);default:if(e9(e.desc)){let t=e.desc.fields[0];return n3(t,e.get(t))}return}}(e,t);if(void 0!==i)return i;let a={};for(let n of e.sortedFields){if(!e.isSet(n)){if(3==n.presence)throw Error(`cannot encode ${n} to JSON: required field not set`);if(!t.alwaysEmitImplicit||2!==n.presence)continue}let i=n2(n,e.get(n),t);void 0!==i&&(a[r=n,t.useProtoFieldName?r.name:r.jsonName]=i)}if(t.registry){let r=new Set;for(let{no:i}of null!=(n=e.getUnknown())?n:[])if(!r.has(i)){r.add(i);let n=t.registry.getExtensionFor(e.desc,i);if(!n)continue;let s=function(e,t){nM(t,e);let n=function(e,t){if(void 0===e)return[];if("enum"===t.fieldKind||"scalar"===t.fieldKind){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(e=>e.no===t.number)}(e.$unknown,t),[r,i,a]=nL(t);for(let e of n)tB(r,new tc(e.data),i,e.wireType,{readUnknownFields:!0});return a()}(e.message,n),[o,l]=nL(n,s),u=n2(l,o.get(l),t);void 0!==u&&(a[n.jsonName]=u)}}return a}function n2(e,t,n){switch(e.fieldKind){case"scalar":return n3(e,t);case"message":return n1(t,n);case"enum":return n5(e.enum,t,n.enumAsInteger);case"list":var r=t,i=n;let a=r.field(),s=[];switch(a.listKind){case"scalar":for(let e of r)s.push(n3(a,e));break;case"enum":for(let e of r)s.push(n5(a.enum,e,i.enumAsInteger));break;case"message":for(let e of r)s.push(n1(e,i))}return i.alwaysEmitImplicit||s.length>0?s:void 0;case"map":var o=t,l=n;let u=o.field(),c={};switch(u.mapKind){case"scalar":for(let[e,t]of o)c[e]=n3(u,t);break;case"message":for(let[e,t]of o)c[e]=n1(t,l);break;case"enum":for(let[e,t]of o)c[e]=n5(u.enum,t,l.enumAsInteger)}return l.alwaysEmitImplicit||o.size>0?c:void 0}}function n5(e,t,n){var r;if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: expected number, got ${ty(t)}`);if("google.protobuf.NullValue"==e.typeName)return null;if(n)return t;let i=e.value[t];return null!=(r=null==i?void 0:i.name)?r:t}function n3(e,t){var n,r,i,a,s,o;switch(e.scalar){case U.INT32:case U.SFIXED32:case U.SINT32:case U.FIXED32:case U.UINT32:if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(n=tg(e,t))?void 0:n.message}`);return t;case U.FLOAT:case U.DOUBLE:if("number"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(r=tg(e,t))?void 0:r.message}`);if(Number.isNaN(t))return"NaN";if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";return t;case U.STRING:if("string"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(i=tg(e,t))?void 0:i.message}`);return t;case U.BOOL:if("boolean"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(a=tg(e,t))?void 0:a.message}`);return t;case U.UINT64:case U.FIXED64:case U.INT64:case U.SFIXED64:case U.SINT64:if("bigint"!=typeof t&&"string"!=typeof t)throw Error(`cannot encode ${e} to JSON: ${null==(s=tg(e,t))?void 0:s.message}`);return t.toString();case U.BYTES:if(t instanceof Uint8Array)return t7(t);throw Error(`cannot encode ${e} to JSON: ${null==(o=tg(e,t))?void 0:o.message}`)}}function n9(e){let t={};for(let[n,r]of Object.entries(e.fields))t[n]=n4(r);return t}function n4(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":case"stringValue":return e.kind.value;case"structValue":return n9(e.kind.value);case"listValue":return n6(e.kind.value);default:throw Error(`${e.$typeName} must have a value`)}}function n6(e){return e.values.map(n4)}function n8(e){let t=Object.assign({},e);return null!=t.ignoreUnknownFields||(t.ignoreUnknownFields=!0),t}function n7(e,t,n,r){let i=t?re(e.input,r):rt(e.input,n);return{parse:(t?re(e.output,r):rt(e.output,n)).parse,serialize:i.serialize}}function re(e,t){return{parse(n){try{return tL(e,n,t)}catch(t){let e=t instanceof Error?t.message:String(t);throw new tW(`parse binary: ${e}`,F.Internal)}},serialize(n){try{return nR(e,n,t)}catch(t){let e=t instanceof Error?t.message:String(t);throw new tW(`serialize binary: ${e}`,F.Internal)}}}}function rt(e,t){var n,r;let i=null!=(n=null==t?void 0:t.textEncoder)?n:new TextEncoder,a=null!=(r=null==t?void 0:t.textDecoder)?r:new TextDecoder,s=n8(t);return{parse(t){try{let n=a.decode(t);return nj(e,function(e,t){try{return JSON.parse(e)}catch(n){let e=n instanceof Error?n.message:String(n);throw Error(`cannot decode message ${t} from JSON: ${e}`,{cause:n})}}(n,e.typeName),s)}catch(e){throw tW.from(e,F.InvalidArgument)}},serialize(t){try{var n;let r=JSON.stringify(n1(tA(e,t),s?Object.assign(Object.assign({},n0),s):n0),null,null!=(n=null==s?void 0:s.prettySpaces)?n:0);return i.encode(r)}catch(e){throw tW.from(e,F.Internal)}}}}function rn(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function rr(e,t){var n;return null!=(n=null==t?void 0:t.concat().reverse().reduce((e,t)=>t(e),e))?n:e}function ri(e){if(!e.aborted)return;if(void 0!==e.reason)return e.reason;let t=Error("This operation was aborted");return t.name="AbortError",t}function ra(e){var t;let n,r,i,{signal:a,cleanup:s}=(t=e.timeoutMs,r=new AbortController,i=()=>{r.abort(new tW("the operation timed out",F.DeadlineExceeded))},void 0!==t&&(t<=0?i():n=setTimeout(i,t)),{signal:r.signal,cleanup:()=>clearTimeout(n)}),o=function(...e){let t=new AbortController,n=e.filter(e=>void 0!==e).concat(t.signal);for(let e of n){if(e.aborted){r.apply(e);break}e.addEventListener("abort",r)}function r(){for(let e of(t.signal.aborted||t.abort(ri(this)),n))e.removeEventListener("abort",r)}return t}(e.signal,a);return[o.signal,function(e){let t=tW.from(a.aborted?ri(a):e);return o.abort(t),s(),Promise.reject(t)},function(){s(),o.abort()}]}function rs(e,n,r){var i;if(n&&new Headers(n).forEach((e,t)=>r.metadata.append(t,e)),"object"!=typeof e||null==e||Array.isArray(e))throw r;let a=r.code;"code"in e&&"string"==typeof e.code&&(a=null!=(i=function(e){if(!t)for(let e of(t={},Object.values(F)))"string"!=typeof e&&(t[t$(e)]=e);return t[e]}(e.code))?i:a);let s=e.message;if(null!=s&&"string"!=typeof s)throw r;let o=new tW(null!=s?s:"",a,n);if("details"in e&&Array.isArray(e.details))for(let t of e.details){if(null===t||"object"!=typeof t||Array.isArray(t)||"string"!=typeof t.type||"string"!=typeof t.value)throw r;try{o.details.push({type:t.type,value:t8(t.value),debug:t.debug})}catch(e){throw r}}return o}let ro="Content-Type",rl="Content-Encoding",ru="Connect-Protocol-Version",rc="User-Agent",rd=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i;function rf(e,t,n,r,i){let a=new Headers(null!=r?r:{});return void 0!==n&&a.set("Connect-Timeout-Ms",`${n}`),a.set(ro,"unary"==e?t?"application/proto":"application/json":t?"application/connect+proto":"application/connect+json"),a.set(ru,"1"),!a.has(rc)&&i&&a.set(rc,"connect-es/2.0.0-rc.3"),a}function rg(e){let t=new Headers,n=new Headers;return e.forEach((e,r)=>{r.toLowerCase().startsWith("trailer-")?n.append(r.substring(8),e):t.append(r,e)}),[t,n]}let rh="application/";function rm(e,t,n,r){let i=r.get(ro),a=function(e){let t=null==e?void 0:e.match(rd);if(t)return{stream:!!t[1],binary:!!t[3]}}(i);if(200!==n){let t=new tW(`HTTP ${n}`,function(e){switch(e){case 400:return F.Internal;case 401:return F.Unauthenticated;case 403:return F.PermissionDenied;case 404:return F.Unimplemented;case 429:case 502:case 503:case 504:return F.Unavailable;default:return F.Unknown}}(n),r);if("unary"==e&&a&&!a.binary)return{isUnaryError:!0,unaryError:t};throw t}let s={binary:t,stream:"unary"!==e};if((null==a?void 0:a.binary)!==s.binary||a.stream!==s.stream)throw new tW(`unsupported content type ${i}`,void 0===a?F.Unknown:F.Internal,r);return{isUnaryError:!1}}var rp=function(e){return this instanceof rp?(this.v=e,this):new rp(e)},rb=function(e,t,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),a=[];return r=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",function(e){return function(t){return Promise.resolve(t).then(e,u)}}),r[Symbol.asyncIterator]=function(){return this},r;function s(e,t){i[e]&&(r[e]=function(t){return new Promise(function(n,r){a.push([e,t,n,r])>1||o(e,t)})},t&&(r[e]=t(r[e])))}function o(e,t){try{var n;(n=i[e](t)).value instanceof rp?Promise.resolve(n.value.v).then(l,u):c(a[0][2],n)}catch(e){c(a[0][3],e)}}function l(e){o("next",e)}function u(e){o("throw",e)}function c(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}};let ry={redirect:"error"};var rv=e.i(29166),rE=e.i(66680),rw=e.i(2157),rA=e.i(50227),rN=e.i(43736),rI=Object.defineProperty,rS=Object.defineProperties,rT=Object.getOwnPropertyDescriptors,rR=Object.getOwnPropertySymbols,rO=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,rk=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),rC=(e,t,n)=>t in e?rI(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r_=(e,t)=>{for(var n in t||(t={}))rO.call(t,n)&&rC(e,n,t[n]);if(rR)for(var n of rR(t))rx.call(t,n)&&rC(e,n,t[n]);return e},rV=e.z,rP=function(e,t){this[0]=e,this[1]=t},rD=(e,t,n)=>{var r=(e,t,i,a)=>{try{var s=n[e](t),o=(t=s.value)instanceof rP,l=s.done;Promise.resolve(o?t[0]:t).then(n=>o?r("return"===e?e:"next",t[1]?{done:n.done,value:n.value}:n,i,a):i({value:n,done:l})).catch(e=>r("throw",e,i,a))}catch(e){a(e)}},i=e=>a[e]=t=>new Promise((n,i)=>r(e,t,n,i)),a={};return n=n.apply(e,t),a[rk("asyncIterator")]=()=>a,i("next"),i("throw"),i("return"),a},rF=(e,t,n)=>(t=e[rk("asyncIterator")])?t.call(e):(e=e[rk("iterator")](),t={},(n=(n,r)=>(r=e[n])&&(t[n]=t=>new Promise((n,i,a)=>(a=(t=r.call(e,t)).done,Promise.resolve(t.value).then(e=>n({value:e,done:a}),i)))))("next"),n("return"),t),rU="2.10.1",{runtime:rL,version:rM}=globalThis.Bun?{runtime:"bun",version:globalThis.Bun.version}:globalThis.Deno?{runtime:"deno",version:globalThis.Deno.version.deno}:(null==(_=null==(C=globalThis.process)?void 0:C.release)?void 0:_.name)==="node"?{runtime:"node",version:eD.default.version||"unknown"}:"string"==typeof EdgeRuntime?{runtime:"vercel-edge",version:"unknown"}:(null==(V=globalThis.navigator)?void 0:V.userAgent)==="Cloudflare-Workers"?{runtime:"cloudflare-worker",version:"unknown"}:{runtime:"unknown",version:"unknown"};async function rB(e){if("undefined"!=typeof crypto){let t=new TextEncoder().encode(e);return btoa(String.fromCharCode(...new Uint8Array(await crypto.subtle.digest("SHA-256",t))))}let{createHash:t}=rV("node:crypto");return t("sha256").update(e,"utf8").digest().toString("base64")}function rj(e){return Math.ceil(e/1e3)}async function rG(e){if("browser"===rL)throw Error("Browser runtime is not supported for dynamic import");return await Promise.resolve().then(()=>{let e=Error("Cannot find module as expression is too dynamic");throw e.code="MODULE_NOT_FOUND",e})}function r$(e){return e.replace(function({onlyFirst:e=!1}={}){let t=`(?:\\u001B\\][\\s\\S]*?(?:\\u0007|\\u001B\\u005C|\\u009C))`;return RegExp(`${t}|[\\u001B\\u009B][[\\]()#;?]*(?:\\d{1,4}(?:[;:]\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]`,e?void 0:"g")}(),"")}var rW={browser:"unknown",lang:"js",lang_version:rM,package_version:rU,publisher:"e2b",sdk_runtime:rL,system:(null==(es=eD.default.os)?void 0:es.family)||"unknown"};function rK(e){return"deno"===rL?Deno.env.get(e):"undefined"==typeof process?"":process.env[e]}function rX(e){return new rZ(`${e}: This error is likely due to sandbox timeout. You can modify the sandbox timeout by passing 'timeoutMs' when starting the sandbox or calling '.setTimeout' on the sandbox with the desired timeout.`)}var rY=class extends Error{constructor(e,t){super(e),this.name="SandboxError",t&&(this.stack=t)}},rZ=class extends rY{constructor(e,t){super(e,t),this.name="TimeoutError"}},rJ=class extends rY{constructor(e,t){super(e,t),this.name="InvalidArgumentError"}},rH=class extends rY{constructor(e,t){super(e,t),this.name="NotEnoughSpaceError"}},rz=class extends rY{constructor(e,t){super(e,t),this.name="NotFoundError"}},rq=class extends Error{constructor(e){super(e),this.name="AuthenticationError"}},rQ=class extends rY{constructor(e,t){super(e,t),this.name="TemplateError"}},r0=class extends rY{constructor(e){super(e),this.name="RateLimitError"}},r1=class extends Error{constructor(e,t){super(e),this.name="BuildError",t&&(this.stack=t)}},r2=class extends r1{constructor(e,t){super(e,t),this.name="FileUploadError"}};function r5(e){return JSON.parse(JSON.stringify(e))}function r3(e){return{async onRequest({request:t}){var n;return null==(n=e.info)||n.call(e,`Request ${t.method} ${t.url}`),t},async onResponse({response:t}){var n,r;return t.status>=400?null==(n=e.error)||n.call(e,"Response:",t.status,t.statusText):null==(r=e.info)||r.call(e,"Response:",t.status,t.statusText),t}}}function r9(e,t=rY,n){var r,i,a,s,o,l;if(!e.error)return;if(401===e.response.status){let t="Unauthorized, please check your credentials.",n=null!=(i=null==(r=e.error)?void 0:r.message)?i:e.error;return new rq(n?`${t} - ${n}`:t)}if(429===e.response.status){let t="Rate limit exceeded, please try again later",n=null!=(s=null==(a=e.error)?void 0:a.message)?s:e.error;return new r0(n?`${t} - ${n}`:t)}let u=null!=(l=null==(o=e.error)?void 0:o.message)?l:e.error;return new t(`${e.response.status}: ${u}`,n)}var r4=class{constructor(e,t={requireAccessToken:!1,requireApiKey:!1}){if((null==t?void 0:t.requireApiKey)&&!e.apiKey)throw new rq("API key is required, please visit the Team tab at https://e2b.dev/dashboard to get your API key. You can either set the environment variable `E2B_API_KEY` or you can pass it directly to the sandbox like Sandbox.create({ apiKey: 'e2b_...' })");if((null==t?void 0:t.requireAccessToken)&&!e.accessToken)throw new rq("Access token is required, please visit the Personal tab at https://e2b.dev/dashboard to get your access token. You can set the environment variable `E2B_ACCESS_TOKEN` or pass the `accessToken` in options.");this.api=eR({baseUrl:e.apiUrl,headers:r_(r_(r_(r_({},rW),e.apiKey&&{"X-API-KEY":e.apiKey}),e.accessToken&&{Authorization:`Bearer ${e.accessToken}`}),e.headers),querySerializer:{array:{style:"form",explode:!1}}}),e.logger&&this.api.use(r3(e.logger))}},r6="Keepalive-Ping-Interval",r8=class e{constructor(t){var n;this.apiKey=(null==t?void 0:t.apiKey)||e.apiKey,this.debug=(null==t?void 0:t.debug)||e.debug,this.domain=(null==t?void 0:t.domain)||e.domain,this.accessToken=(null==t?void 0:t.accessToken)||e.accessToken,this.requestTimeoutMs=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:6e4,this.logger=null==t?void 0:t.logger,this.headers=(null==t?void 0:t.headers)||{},this.headers["User-Agent"]=`e2b-js-sdk/${rU}`,this.apiUrl=(null==t?void 0:t.apiUrl)||e.apiUrl||(this.debug?"http://localhost:3000":`https://api.${this.domain}`),this.sandboxUrl=(null==t?void 0:t.sandboxUrl)||e.sandboxUrl}static get domain(){return rK("E2B_DOMAIN")||"e2b.app"}static get apiUrl(){return rK("E2B_API_URL")}static get sandboxUrl(){return rK("E2B_SANDBOX_URL")}static get debug(){return"true"===(rK("E2B_DEBUG")||"false").toLowerCase()}static get apiKey(){return rK("E2B_API_KEY")}static get accessToken(){return rK("E2B_ACCESS_TOKEN")}getSignal(e){let t=null!=e?e:this.requestTimeoutMs;return t?AbortSignal.timeout(t):void 0}getSandboxUrl(e,t){return this.sandboxUrl?this.sandboxUrl:`${this.debug?"http":"https"}://${this.getHost(e,t.envdPort,t.sandboxDomain)}`}getHost(e,t,n){return this.debug?`localhost:${t}`:`${t}-${e}.${null!=n?n:this.domain}`}};r8.envdPort=49983;var r7="user";async function ie({path:e,operation:t,user:n,expirationInSeconds:r,envdAccessToken:i}){let a;if(!i)throw Error("Access token is not set and signature cannot be generated!");let s=r?Math.floor(Date.now()/1e3)+r:null;return void 0==n&&(n=""),a=null===s?`${e}:${t}:${n}:${i}`:`${e}:${t}:${n}:${i}:${s.toString()}`,{signature:"v1_"+(await rB(a)).replace(/=+$/,""),expiration:s}}async function it(e){var t;if(!e.error)return;let n="string"==typeof e.error?e.error:(null==(t=e.error)?void 0:t.message)||await e.response.text();switch(e.response.status){case 400:return new rJ(n);case 401:return new rq(n);case 404:return new rz(n);case 429:return new rY(`${e.response.status}: ${n}: The requests are being rate limited.`);case 502:return rX(n);case 507:return new rH(n);default:return new rY(`${e.response.status}: ${n}`)}}async function ir(e){var t;let n;try{n=(await e[Symbol.asyncIterator]().next()).value}catch(e){if(e instanceof tW&&e.code===F.Unavailable)throw new rz("Sandbox is probably not running anymore");throw e}if((null==(t=n.event)?void 0:t.event.case)!=="start")throw Error("Expected start event");return n.event.event.value.pid}async function ii(e){var t;let n;try{n=(await e[Symbol.asyncIterator]().next()).value}catch(e){if(e instanceof tW&&e.code===F.Unavailable)throw new rz("Sandbox is probably not running anymore");throw e}if((null==(t=n.event)?void 0:t.case)!=="start")throw Error("Expected start event");return n.event.value}var ia=class{constructor(e,t){this.api=eR({baseUrl:e.apiUrl,fetch:null==e?void 0:e.fetch,headers:null==e?void 0:e.headers}),this.version=t.version,e.logger&&this.api.use(r3(e.logger))}},is="99.99.99",io="0.4.0";function il(e){if(e instanceof tW)switch(e.code){case F.InvalidArgument:return new rJ(e.message);case F.Unauthenticated:return new rq(e.message);case F.NotFound:return new rz(e.message);case F.Unavailable:return rX(e.message);case F.Canceled:return new rZ(`${e.message}: This error is likely due to exceeding 'requestTimeoutMs'. You can pass the request timeout value as an option when making the request.`);case F.DeadlineExceeded:return new rZ(`${e.message}: This error is likely due to exceeding 'timeoutMs' \u2014 the total time a long running request (like command execution or directory watch) can be active. It can be modified by passing 'timeoutMs' when making the request. Use '0' to disable the timeout.`);default:return new rY(`${e.code}: ${e.message}`)}return e}function iu(e,t){if(void 0==t&&0>t6(e,io)&&(t=r7),!t)return{};let n=function(e){switch(rL){case"deno":default:return btoa(e);case"node":case"bun":return Buffer.from(e).toString("base64")}}(`${t}:`);return{Authorization:`Basic ${n}`}}var ic=nN(nA("ChtmaWxlc3lzdGVtL2ZpbGVzeXN0ZW0ucHJvdG8SCmZpbGVzeXN0ZW0iMgoLTW92ZVJlcXVlc3QSDgoGc291cmNlGAEgASgJEhMKC2Rlc3RpbmF0aW9uGAIgASgJIjQKDE1vdmVSZXNwb25zZRIkCgVlbnRyeRgBIAEoCzIVLmZpbGVzeXN0ZW0uRW50cnlJbmZvIh4KDk1ha2VEaXJSZXF1ZXN0EgwKBHBhdGgYASABKAkiNwoPTWFrZURpclJlc3BvbnNlEiQKBWVudHJ5GAEgASgLMhUuZmlsZXN5c3RlbS5FbnRyeUluZm8iHQoNUmVtb3ZlUmVxdWVzdBIMCgRwYXRoGAEgASgJIhAKDlJlbW92ZVJlc3BvbnNlIhsKC1N0YXRSZXF1ZXN0EgwKBHBhdGgYASABKAkiNAoMU3RhdFJlc3BvbnNlEiQKBWVudHJ5GAEgASgLMhUuZmlsZXN5c3RlbS5FbnRyeUluZm8i/QEKCUVudHJ5SW5mbxIMCgRuYW1lGAEgASgJEiIKBHR5cGUYAiABKA4yFC5maWxlc3lzdGVtLkZpbGVUeXBlEgwKBHBhdGgYAyABKAkSDAoEc2l6ZRgEIAEoAxIMCgRtb2RlGAUgASgNEhMKC3Blcm1pc3Npb25zGAYgASgJEg0KBW93bmVyGAcgASgJEg0KBWdyb3VwGAggASgJEjEKDW1vZGlmaWVkX3RpbWUYCSABKAsyGi5nb29nbGUucHJvdG9idWYuVGltZXN0YW1wEhsKDnN5bWxpbmtfdGFyZ2V0GAogASgJSACIAQFCEQoPX3N5bWxpbmtfdGFyZ2V0Ii0KDkxpc3REaXJSZXF1ZXN0EgwKBHBhdGgYASABKAkSDQoFZGVwdGgYAiABKA0iOQoPTGlzdERpclJlc3BvbnNlEiYKB2VudHJpZXMYASADKAsyFS5maWxlc3lzdGVtLkVudHJ5SW5mbyIyCg9XYXRjaERpclJlcXVlc3QSDAoEcGF0aBgBIAEoCRIRCglyZWN1cnNpdmUYAiABKAgiRAoPRmlsZXN5c3RlbUV2ZW50EgwKBG5hbWUYASABKAkSIwoEdHlwZRgCIAEoDjIVLmZpbGVzeXN0ZW0uRXZlbnRUeXBlIuABChBXYXRjaERpclJlc3BvbnNlEjgKBXN0YXJ0GAEgASgLMicuZmlsZXN5c3RlbS5XYXRjaERpclJlc3BvbnNlLlN0YXJ0RXZlbnRIABIxCgpmaWxlc3lzdGVtGAIgASgLMhsuZmlsZXN5c3RlbS5GaWxlc3lzdGVtRXZlbnRIABI7CglrZWVwYWxpdmUYAyABKAsyJi5maWxlc3lzdGVtLldhdGNoRGlyUmVzcG9uc2UuS2VlcEFsaXZlSAAaDAoKU3RhcnRFdmVudBoLCglLZWVwQWxpdmVCBwoFZXZlbnQiNwoUQ3JlYXRlV2F0Y2hlclJlcXVlc3QSDAoEcGF0aBgBIAEoCRIRCglyZWN1cnNpdmUYAiABKAgiKwoVQ3JlYXRlV2F0Y2hlclJlc3BvbnNlEhIKCndhdGNoZXJfaWQYASABKAkiLQoXR2V0V2F0Y2hlckV2ZW50c1JlcXVlc3QSEgoKd2F0Y2hlcl9pZBgBIAEoCSJHChhHZXRXYXRjaGVyRXZlbnRzUmVzcG9uc2USKwoGZXZlbnRzGAEgAygLMhsuZmlsZXN5c3RlbS5GaWxlc3lzdGVtRXZlbnQiKgoUUmVtb3ZlV2F0Y2hlclJlcXVlc3QSEgoKd2F0Y2hlcl9pZBgBIAEoCSIXChVSZW1vdmVXYXRjaGVyUmVzcG9uc2UqUgoIRmlsZVR5cGUSGQoVRklMRV9UWVBFX1VOU1BFQ0lGSUVEEAASEgoORklMRV9UWVBFX0ZJTEUQARIXChNGSUxFX1RZUEVfRElSRUNUT1JZEAIqmAEKCUV2ZW50VHlwZRIaChZFVkVOVF9UWVBFX1VOU1BFQ0lGSUVEEAASFQoRRVZFTlRfVFlQRV9DUkVBVEUQARIUChBFVkVOVF9UWVBFX1dSSVRFEAISFQoRRVZFTlRfVFlQRV9SRU1PVkUQAxIVChFFVkVOVF9UWVBFX1JFTkFNRRAEEhQKEEVWRU5UX1RZUEVfQ0hNT0QQBTKfBQoKRmlsZXN5c3RlbRI5CgRTdGF0EhcuZmlsZXN5c3RlbS5TdGF0UmVxdWVzdBoYLmZpbGVzeXN0ZW0uU3RhdFJlc3BvbnNlEkIKB01ha2VEaXISGi5maWxlc3lzdGVtLk1ha2VEaXJSZXF1ZXN0GhsuZmlsZXN5c3RlbS5NYWtlRGlyUmVzcG9uc2USOQoETW92ZRIXLmZpbGVzeXN0ZW0uTW92ZVJlcXVlc3QaGC5maWxlc3lzdGVtLk1vdmVSZXNwb25zZRJCCgdMaXN0RGlyEhouZmlsZXN5c3RlbS5MaXN0RGlyUmVxdWVzdBobLmZpbGVzeXN0ZW0uTGlzdERpclJlc3BvbnNlEj8KBlJlbW92ZRIZLmZpbGVzeXN0ZW0uUmVtb3ZlUmVxdWVzdBoaLmZpbGVzeXN0ZW0uUmVtb3ZlUmVzcG9uc2USRwoIV2F0Y2hEaXISGy5maWxlc3lzdGVtLldhdGNoRGlyUmVxdWVzdBocLmZpbGVzeXN0ZW0uV2F0Y2hEaXJSZXNwb25zZTABElQKDUNyZWF0ZVdhdGNoZXISIC5maWxlc3lzdGVtLkNyZWF0ZVdhdGNoZXJSZXF1ZXN0GiEuZmlsZXN5c3RlbS5DcmVhdGVXYXRjaGVyUmVzcG9uc2USXQoQR2V0V2F0Y2hlckV2ZW50cxIjLmZpbGVzeXN0ZW0uR2V0V2F0Y2hlckV2ZW50c1JlcXVlc3QaJC5maWxlc3lzdGVtLkdldFdhdGNoZXJFdmVudHNSZXNwb25zZRJUCg1SZW1vdmVXYXRjaGVyEiAuZmlsZXN5c3RlbS5SZW1vdmVXYXRjaGVyUmVxdWVzdBohLmZpbGVzeXN0ZW0uUmVtb3ZlV2F0Y2hlclJlc3BvbnNlQmkKDmNvbS5maWxlc3lzdGVtQg9GaWxlc3lzdGVtUHJvdG9QAaICA0ZYWKoCCkZpbGVzeXN0ZW3KAgpGaWxlc3lzdGVt4gIWRmlsZXN5c3RlbVxHUEJNZXRhZGF0YeoCCkZpbGVzeXN0ZW1iBnByb3RvMw",[nI]),0),id=((P=id||{}).CHMOD="chmod",P.CREATE="create",P.REMOVE="remove",P.RENAME="rename",P.WRITE="write",P),ig=class{constructor(e,t,n,r){this.handleStop=e,this.events=t,this.onEvent=n,this.onExit=r,this.handleEvents()}async stop(){this.handleStop()}iterateEvents(){return rD(this,null,function*(){try{try{for(var e,t,n,r=rF(this.events);e=!(t=yield new rP(r.next())).done;e=!1){let e=t.value;"filesystem"===e.event.case&&(yield e.event)}}catch(e){n=[e]}finally{try{e&&(t=r.return)&&(yield new rP(t.call(r)))}finally{if(n)throw n[0]}}}catch(e){throw il(e)}})}async handleEvents(){var e,t,n;try{try{for(var r,i,a,s=rF(this.iterateEvents());r=!(i=await s.next()).done;r=!1){let t=i.value,n=function(e){switch(e){case 5:return"chmod";case 1:return"create";case 3:return"remove";case 4:return"rename";case 2:return"write"}}(t.value.type);void 0!==n&&(null==(e=this.onEvent)||e.call(this,{name:t.value.name,type:n}))}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&await i.call(s)}finally{if(a)throw a[0]}}null==(t=this.onExit)||t.call(this)}catch(e){null==(n=this.onExit)||n.call(this,e)}}},ih=((D=ih||{}).FILE="file",D.DIR="dir",D);function im(e){switch(e){case 2:return"dir";case 1:return"file"}}function ip(e){if(e)return new Date(1e3*Number(e.seconds)+Math.floor(e.nanos/1e6))}var ib=class{constructor(e,t,n){this.envdApi=t,this.connectionConfig=n,this.defaultWatchTimeout=6e4,this.defaultWatchRecursive=!1,this.rpc=tQ(ic,e)}async read(e,t){var n;let r=null!=(n=null==t?void 0:t.format)?n:"text",i=null==t?void 0:t.user;void 0==i&&0>t6(this.envdApi.version,io)&&(i=r7);let a=await this.envdApi.api.GET("/files",{params:{query:{path:e,username:i}},parseAs:"bytes"===r?"arrayBuffer":r,signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),s=await it(a);if(s)throw s;return"bytes"===r?new Uint8Array(a.data):"0"===a.response.headers.get("content-length")?"":a.data}async write(e,t,n){if("string"!=typeof e&&!Array.isArray(e))throw Error("Path or files are required");if("string"==typeof e&&Array.isArray(t))throw Error("Cannot specify both path and array of files. You have to specify either path and data for a single file or an array for multiple files.");let{path:r,writeOpts:i,writeFiles:a}="string"==typeof e?{path:e,writeOpts:n,writeFiles:[{data:t}]}:{path:void 0,writeOpts:t,writeFiles:e};if(0===a.length)return[];let s=await Promise.all(a.map(e=>new Response(e.data).blob())),o=null==i?void 0:i.user;void 0==o&&0>t6(this.envdApi.version,io)&&(o=r7);let l=await this.envdApi.api.POST("/files",{params:{query:{path:r,username:o}},bodySerializer:()=>s.reduce((e,t,n)=>(e.append("file",t,a[n].path),e),new FormData),signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs),body:{}}),u=await it(l);if(u)throw u;let c=l.data;if(!c)throw Error("Expected to receive information about written file");return 1===c.length&&r?c[0]:c}async list(e,t){var n;if("number"==typeof(null==t?void 0:t.depth)&&t.depth<1)throw new rJ("depth should be at least one");try{let r=await this.rpc.listDir({path:e,depth:null!=(n=null==t?void 0:t.depth)?n:1},{headers:iu(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),i=[];for(let e of r.entries){let t=im(e.type);t&&i.push({name:e.name,type:t,path:e.path,size:Number(e.size),mode:e.mode,permissions:e.permissions,owner:e.owner,group:e.group,modifiedTime:ip(e.modifiedTime),symlinkTarget:e.symlinkTarget})}return i}catch(e){throw il(e)}}async makeDir(e,t){try{return await this.rpc.makeDir({path:e},{headers:iu(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tW&&e.code===F.AlreadyExists)return!1;throw il(e)}}async rename(e,t,n){try{let r=(await this.rpc.move({source:e,destination:t},{headers:iu(this.envdApi.version,null==n?void 0:n.user),signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})).entry;if(!r)throw Error("Expected to receive information about moved object");return{name:r.name,type:im(r.type),path:r.path,size:Number(r.size),mode:r.mode,permissions:r.permissions,owner:r.owner,group:r.group,modifiedTime:ip(r.modifiedTime),symlinkTarget:r.symlinkTarget}}catch(e){throw il(e)}}async remove(e,t){try{await this.rpc.remove({path:e},{headers:iu(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)})}catch(e){throw il(e)}}async exists(e,t){try{return await this.rpc.stat({path:e},{headers:iu(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tW&&e.code===F.NotFound)return!1;throw il(e)}}async getInfo(e,t){try{let n=await this.rpc.stat({path:e},{headers:iu(this.envdApi.version,null==t?void 0:t.user),signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)});if(!n.entry)throw Error("Expected to receive information about the file or directory");return{name:n.entry.name,type:im(n.entry.type),path:n.entry.path,size:Number(n.entry.size),mode:n.entry.mode,permissions:n.entry.permissions,owner:n.entry.owner,group:n.entry.group,modifiedTime:ip(n.entry.modifiedTime),symlinkTarget:n.entry.symlinkTarget}}catch(e){throw il(e)}}async watchDir(e,t,n){var r,i,a;if((null==n?void 0:n.recursive)&&this.envdApi.version&&0>t6(this.envdApi.version,"0.1.4"))throw new rQ("You need to update the template to use recursive watching. You can do this by running `e2b template build` in the directory with the template.");let s=null!=(r=null==n?void 0:n.requestTimeoutMs)?r:this.connectionConfig.requestTimeoutMs,o=new AbortController,l=s?setTimeout(()=>{o.abort()},s):void 0,u=this.rpc.watchDir({path:e,recursive:null!=(i=null==n?void 0:n.recursive)?i:this.defaultWatchRecursive},{headers:rS(r_({},iu(this.envdApi.version,null==n?void 0:n.user)),rT({[r6]:"50"})),signal:o.signal,timeoutMs:null!=(a=null==n?void 0:n.timeoutMs)?a:this.defaultWatchTimeout});try{return await ii(u),clearTimeout(l),new ig(()=>o.abort(),u,t,null==n?void 0:n.onExit)}catch(e){throw il(e)}}},iy=class extends rY{constructor(e){super(e.error),this.result=e,this.name="CommandExitError"}get exitCode(){return this.result.exitCode}get error(){return this.result.error}get stdout(){return this.result.stdout}get stderr(){return this.result.stderr}},iv=class{constructor(e,t,n,r,i,a,s){this.pid=e,this.handleDisconnect=t,this.handleKill=n,this.events=r,this.onStdout=i,this.onStderr=a,this.onPty=s,this._stdout="",this._stderr="",this._wait=this.handleEvents()}get exitCode(){var e;return null==(e=this.result)?void 0:e.exitCode}get error(){var e;return null==(e=this.result)?void 0:e.error}get stderr(){return this._stderr}get stdout(){return this._stdout}async wait(){if(await this._wait,this.iterationError)throw this.iterationError;if(!this.result)throw new rY("Process exited without a result");if(0!==this.result.exitCode)throw new iy(this.result);return this.result}async disconnect(){this.handleDisconnect()}async kill(){return await this.handleKill()}iterateEvents(){return rD(this,null,function*(){var e;try{for(var t,n,r,i=rF(this.events);t=!(n=yield new rP(i.next())).done;t=!1){let t,r=n.value,i=null==(e=null==r?void 0:r.event)?void 0:e.event;switch(null==i?void 0:i.case){case"data":switch(i.value.output.case){case"stdout":t=new TextDecoder().decode(i.value.output.value),this._stdout+=t,yield[t,null,null];break;case"stderr":t=new TextDecoder().decode(i.value.output.value),this._stderr+=t,yield[null,t,null];break;case"pty":yield[null,null,i.value.output.value]}break;case"end":this.result={exitCode:i.value.exitCode,error:i.value.error,stdout:this.stdout,stderr:this.stderr}}}}catch(e){r=[e]}finally{try{t&&(n=i.return)&&(yield new rP(n.call(i)))}finally{if(r)throw r[0]}}})}async handleEvents(){var e,t,n;try{try{for(var r,i,a,s=rF(this.iterateEvents());r=!(i=await s.next()).done;r=!1){let[r,a,s]=i.value;null!==r?null==(e=this.onStdout)||e.call(this,r):null!==a?null==(t=this.onStderr)||t.call(this,a):s&&(null==(n=this.onPty)||n.call(this,s))}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&await i.call(s)}finally{if(a)throw a[0]}}}catch(e){this.iterationError=il(e)}}},iE=nN(nA("ChVwcm9jZXNzL3Byb2Nlc3MucHJvdG8SB3Byb2Nlc3MiSgoDUFRZEh8KBHNpemUYASABKAsyES5wcm9jZXNzLlBUWS5TaXplGiIKBFNpemUSDAoEY29scxgBIAEoDRIMCgRyb3dzGAIgASgNIqEBCg1Qcm9jZXNzQ29uZmlnEgsKA2NtZBgBIAEoCRIMCgRhcmdzGAIgAygJEi4KBGVudnMYAyADKAsyIC5wcm9jZXNzLlByb2Nlc3NDb25maWcuRW52c0VudHJ5EhAKA2N3ZBgEIAEoCUgAiAEBGisKCUVudnNFbnRyeRILCgNrZXkYASABKAkSDQoFdmFsdWUYAiABKAk6AjgBQgYKBF9jd2QiDQoLTGlzdFJlcXVlc3QiXAoLUHJvY2Vzc0luZm8SJgoGY29uZmlnGAEgASgLMhYucHJvY2Vzcy5Qcm9jZXNzQ29uZmlnEgsKA3BpZBgCIAEoDRIQCgN0YWcYAyABKAlIAIgBAUIGCgRfdGFnIjcKDExpc3RSZXNwb25zZRInCglwcm9jZXNzZXMYASADKAsyFC5wcm9jZXNzLlByb2Nlc3NJbmZvIpcBCgxTdGFydFJlcXVlc3QSJwoHcHJvY2VzcxgBIAEoCzIWLnByb2Nlc3MuUHJvY2Vzc0NvbmZpZxIeCgNwdHkYAiABKAsyDC5wcm9jZXNzLlBUWUgAiAEBEhAKA3RhZxgDIAEoCUgBiAEBEhIKBXN0ZGluGAQgASgISAKIAQFCBgoEX3B0eUIGCgRfdGFnQggKBl9zdGRpbiJiCg1VcGRhdGVSZXF1ZXN0EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvchIeCgNwdHkYAiABKAsyDC5wcm9jZXNzLlBUWUgAiAEBQgYKBF9wdHkiEAoOVXBkYXRlUmVzcG9uc2UirwMKDFByb2Nlc3NFdmVudBIxCgVzdGFydBgBIAEoCzIgLnByb2Nlc3MuUHJvY2Vzc0V2ZW50LlN0YXJ0RXZlbnRIABIvCgRkYXRhGAIgASgLMh8ucHJvY2Vzcy5Qcm9jZXNzRXZlbnQuRGF0YUV2ZW50SAASLQoDZW5kGAMgASgLMh4ucHJvY2Vzcy5Qcm9jZXNzRXZlbnQuRW5kRXZlbnRIABI0CglrZWVwYWxpdmUYBCABKAsyHy5wcm9jZXNzLlByb2Nlc3NFdmVudC5LZWVwQWxpdmVIABoZCgpTdGFydEV2ZW50EgsKA3BpZBgBIAEoDRpICglEYXRhRXZlbnQSEAoGc3Rkb3V0GAEgASgMSAASEAoGc3RkZXJyGAIgASgMSAASDQoDcHR5GAMgASgMSABCCAoGb3V0cHV0GlsKCEVuZEV2ZW50EhEKCWV4aXRfY29kZRgBIAEoERIOCgZleGl0ZWQYAiABKAgSDgoGc3RhdHVzGAMgASgJEhIKBWVycm9yGAQgASgJSACIAQFCCAoGX2Vycm9yGgsKCUtlZXBBbGl2ZUIHCgVldmVudCI1Cg1TdGFydFJlc3BvbnNlEiQKBWV2ZW50GAEgASgLMhUucHJvY2Vzcy5Qcm9jZXNzRXZlbnQiNwoPQ29ubmVjdFJlc3BvbnNlEiQKBWV2ZW50GAEgASgLMhUucHJvY2Vzcy5Qcm9jZXNzRXZlbnQiYwoQU2VuZElucHV0UmVxdWVzdBIpCgdwcm9jZXNzGAEgASgLMhgucHJvY2Vzcy5Qcm9jZXNzU2VsZWN0b3ISJAoFaW5wdXQYAiABKAsyFS5wcm9jZXNzLlByb2Nlc3NJbnB1dCITChFTZW5kSW5wdXRSZXNwb25zZSI3CgxQcm9jZXNzSW5wdXQSDwoFc3RkaW4YASABKAxIABINCgNwdHkYAiABKAxIAEIHCgVpbnB1dCLCAgoSU3RyZWFtSW5wdXRSZXF1ZXN0EjcKBXN0YXJ0GAEgASgLMiYucHJvY2Vzcy5TdHJlYW1JbnB1dFJlcXVlc3QuU3RhcnRFdmVudEgAEjUKBGRhdGEYAiABKAsyJS5wcm9jZXNzLlN0cmVhbUlucHV0UmVxdWVzdC5EYXRhRXZlbnRIABI6CglrZWVwYWxpdmUYAyABKAsyJS5wcm9jZXNzLlN0cmVhbUlucHV0UmVxdWVzdC5LZWVwQWxpdmVIABo3CgpTdGFydEV2ZW50EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvchoxCglEYXRhRXZlbnQSJAoFaW5wdXQYAiABKAsyFS5wcm9jZXNzLlByb2Nlc3NJbnB1dBoLCglLZWVwQWxpdmVCBwoFZXZlbnQiFQoTU3RyZWFtSW5wdXRSZXNwb25zZSJfChFTZW5kU2lnbmFsUmVxdWVzdBIpCgdwcm9jZXNzGAEgASgLMhgucHJvY2Vzcy5Qcm9jZXNzU2VsZWN0b3ISHwoGc2lnbmFsGAIgASgOMg8ucHJvY2Vzcy5TaWduYWwiFAoSU2VuZFNpZ25hbFJlc3BvbnNlIjsKDkNvbm5lY3RSZXF1ZXN0EikKB3Byb2Nlc3MYASABKAsyGC5wcm9jZXNzLlByb2Nlc3NTZWxlY3RvciI7Cg9Qcm9jZXNzU2VsZWN0b3ISDQoDcGlkGAEgASgNSAASDQoDdGFnGAIgASgJSABCCgoIc2VsZWN0b3IqSAoGU2lnbmFsEhYKElNJR05BTF9VTlNQRUNJRklFRBAAEhIKDlNJR05BTF9TSUdURVJNEA8SEgoOU0lHTkFMX1NJR0tJTEwQCTLKAwoHUHJvY2VzcxIzCgRMaXN0EhQucHJvY2Vzcy5MaXN0UmVxdWVzdBoVLnByb2Nlc3MuTGlzdFJlc3BvbnNlEj4KB0Nvbm5lY3QSFy5wcm9jZXNzLkNvbm5lY3RSZXF1ZXN0GhgucHJvY2Vzcy5Db25uZWN0UmVzcG9uc2UwARI4CgVTdGFydBIVLnByb2Nlc3MuU3RhcnRSZXF1ZXN0GhYucHJvY2Vzcy5TdGFydFJlc3BvbnNlMAESOQoGVXBkYXRlEhYucHJvY2Vzcy5VcGRhdGVSZXF1ZXN0GhcucHJvY2Vzcy5VcGRhdGVSZXNwb25zZRJKCgtTdHJlYW1JbnB1dBIbLnByb2Nlc3MuU3RyZWFtSW5wdXRSZXF1ZXN0GhwucHJvY2Vzcy5TdHJlYW1JbnB1dFJlc3BvbnNlKAESQgoJU2VuZElucHV0EhkucHJvY2Vzcy5TZW5kSW5wdXRSZXF1ZXN0GhoucHJvY2Vzcy5TZW5kSW5wdXRSZXNwb25zZRJFCgpTZW5kU2lnbmFsEhoucHJvY2Vzcy5TZW5kU2lnbmFsUmVxdWVzdBobLnByb2Nlc3MuU2VuZFNpZ25hbFJlc3BvbnNlQlcKC2NvbS5wcm9jZXNzQgxQcm9jZXNzUHJvdG9QAaICA1BYWKoCB1Byb2Nlc3PKAgdQcm9jZXNz4gITUHJvY2Vzc1xHUEJNZXRhZGF0YeoCB1Byb2Nlc3NiBnByb3RvMw"),0),iw=class{constructor(e,t,n){this.transport=e,this.connectionConfig=t,this.defaultPtyConnectionTimeout=6e4,this.rpc=tQ(iE,this.transport),this.envdVersion=n.version}async create(e){var t,n,r,i,a,s;let o=null!=(t=null==e?void 0:e.requestTimeoutMs)?t:this.connectionConfig.requestTimeoutMs,l=null!=(n=null==e?void 0:e.envs)?n:{};l.TERM=null!=(r=l.TERM)?r:"xterm-256color",l.LANG=null!=(i=l.LANG)?i:"C.UTF-8",l.LC_ALL=null!=(a=l.LC_ALL)?a:"C.UTF-8";let u=new AbortController,c=setTimeout(()=>{u.abort()},o),d=this.rpc.start({process:{cmd:"/bin/bash",args:["-i","-l"],envs:l,cwd:null==e?void 0:e.cwd},pty:{size:{cols:e.cols,rows:e.rows}}},{headers:rS(r_({},iu(this.envdVersion,null==e?void 0:e.user)),rT({[r6]:"50"})),signal:u.signal,timeoutMs:null!=(s=null==e?void 0:e.timeoutMs)?s:this.defaultPtyConnectionTimeout});try{let t=await ir(d);return clearTimeout(c),new iv(t,()=>u.abort(),()=>this.kill(t),d,void 0,void 0,e.onData)}catch(e){throw il(e)}}async connect(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0,o=this.rpc.connect({process:{selector:{case:"pid",value:e}}},{signal:a.signal,headers:{[r6]:"50"},timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultPtyConnectionTimeout});try{let e=await ir(o);return clearTimeout(s),new iv(e,()=>a.abort(),()=>this.kill(e),o,void 0,void 0,null==t?void 0:t.onData)}catch(e){throw il(e)}}async sendInput(e,t,n){try{await this.rpc.sendInput({input:{input:{case:"pty",value:t}},process:{selector:{case:"pid",value:e}}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw il(e)}}async resize(e,t,n){try{await this.rpc.update({process:{selector:{case:"pid",value:e}},pty:{size:t}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw il(e)}}async kill(e,t){try{return await this.rpc.sendSignal({process:{selector:{case:"pid",value:e}},signal:9},{signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tW&&e.code===F.NotFound)return!1;throw il(e)}}},iA=class{constructor(e,t,n){this.connectionConfig=t,this.defaultProcessConnectionTimeout=6e4,this.rpc=tQ(iE,e),this.envdVersion=n.version}async list(e){try{return(await this.rpc.list({},{signal:this.connectionConfig.getSignal(null==e?void 0:e.requestTimeoutMs)})).processes.map(e=>{let t,n;return r_((t=r_({pid:e.pid},e.tag&&{tag:e.tag}),n={args:e.config.args,envs:e.config.envs,cmd:e.config.cmd},rS(t,rT(n))),e.config.cwd&&{cwd:e.config.cwd})})}catch(e){throw il(e)}}async sendStdin(e,t,n){try{await this.rpc.sendInput({process:{selector:{case:"pid",value:e}},input:{input:{case:"stdin",value:new TextEncoder().encode(t)}}},{signal:this.connectionConfig.getSignal(null==n?void 0:n.requestTimeoutMs)})}catch(e){throw il(e)}}async kill(e,t){try{return await this.rpc.sendSignal({process:{selector:{case:"pid",value:e}},signal:9},{signal:this.connectionConfig.getSignal(null==t?void 0:t.requestTimeoutMs)}),!0}catch(e){if(e instanceof tW&&e.code===F.NotFound)return!1;throw il(e)}}async connect(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0,o=this.rpc.connect({process:{selector:{case:"pid",value:e}}},{signal:a.signal,headers:{[r6]:"50"},timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultProcessConnectionTimeout});try{let e=await ir(o);return clearTimeout(s),new iv(e,()=>a.abort(),()=>this.kill(e),o,null==t?void 0:t.onStdout,null==t?void 0:t.onStderr,void 0)}catch(e){throw il(e)}}async run(e,t){let n=await this.start(e,t);return(null==t?void 0:t.background)?n:n.wait()}async start(e,t){var n,r;let i=null!=(n=null==t?void 0:t.requestTimeoutMs)?n:this.connectionConfig.requestTimeoutMs,a=new AbortController,s=i?setTimeout(()=>{a.abort()},i):void 0;if((null==t?void 0:t.stdin)===!1&&0>t6(this.envdVersion,"0.3.0"))throw new rY(`Sandbox envd version ${this.envdVersion} can't specify stdin, it's always turned on. Please rebuild your template if you need this feature.`);let o=this.rpc.start({process:{cmd:"/bin/bash",cwd:null==t?void 0:t.cwd,envs:null==t?void 0:t.envs,args:["-l","-c",e]},stdin:(null==t?void 0:t.stdin)||!1},{headers:rS(r_({},iu(this.envdVersion,null==t?void 0:t.user)),rT({[r6]:"50"})),signal:a.signal,timeoutMs:null!=(r=null==t?void 0:t.timeoutMs)?r:this.defaultProcessConnectionTimeout});try{let e=await ir(o);return clearTimeout(s),new iv(e,()=>a.abort(),()=>this.kill(e),o,null==t?void 0:t.onStdout,null==t?void 0:t.onStderr,void 0)}catch(e){throw il(e)}}},iN=class{static async kill(e,t){var n;let r=new r8(t),i=new r4(r),a=await i.api.DELETE("/sandboxes/{sandboxID}",{params:{path:{sandboxID:e}},signal:r.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=a.error)?void 0:n.code)===404)return!1;let s=r9(a);if(s)throw s;return!0}static async getInfo(e,t){let n=await this.getFullInfo(e,t);return delete n.envdAccessToken,delete n.sandboxDomain,n}static async getMetrics(e,t){var n,r;let i=new r8(t),a=new r4(i),s=await a.api.GET("/sandboxes/{sandboxID}/metrics",{params:{path:{sandboxID:e,start:null==t?void 0:t.start,end:null==t?void 0:t.end}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)}),o=r9(s);if(o)throw o;return null!=(r=null==(n=s.data)?void 0:n.map(e=>({timestamp:new Date(e.timestamp),cpuUsedPct:e.cpuUsedPct,cpuCount:e.cpuCount,memUsed:e.memUsed,memTotal:e.memTotal,diskUsed:e.diskUsed,diskTotal:e.diskTotal})))?r:[]}static async setTimeout(e,t,n){var r;let i=new r8(n),a=new r4(i),s=await a.api.POST("/sandboxes/{sandboxID}/timeout",{params:{path:{sandboxID:e}},body:{timeout:rj(t)},signal:i.getSignal(null==n?void 0:n.requestTimeoutMs)});if((null==(r=s.error)?void 0:r.code)===404)throw new rz(`Sandbox ${e} not found`);let o=r9(s);if(o)throw o}static async getFullInfo(e,t){var n,r;let i=new r8(t),a=new r4(i),s=await a.api.GET("/sandboxes/{sandboxID}",{params:{path:{sandboxID:e}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=s.error)?void 0:n.code)===404)throw new rz(`Sandbox ${e} not found`);let o=r9(s);if(o)throw o;if(!s.data)throw Error("Sandbox not found");return rS(r_({sandboxId:s.data.sandboxID,templateId:s.data.templateID},s.data.alias&&{name:s.data.alias}),rT({metadata:null!=(r=s.data.metadata)?r:{},envdVersion:s.data.envdVersion,envdAccessToken:s.data.envdAccessToken,startedAt:new Date(s.data.startedAt),endAt:new Date(s.data.endAt),state:s.data.state,cpuCount:s.data.cpuCount,memoryMB:s.data.memoryMB,sandboxDomain:s.data.domain||void 0}))}static async betaPause(e,t){var n,r;let i=new r8(t),a=new r4(i),s=await a.api.POST("/sandboxes/{sandboxID}/pause",{params:{path:{sandboxID:e}},signal:i.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(n=s.error)?void 0:n.code)===404)throw new rz(`Sandbox ${e} not found`);if((null==(r=s.error)?void 0:r.code)===409)return!1;let o=r9(s);if(o)throw o;return!0}static async createSandbox(e,t,n){var r,i,a;let s=new r8(n),o=new r4(s),l=await o.api.POST("/sandboxes",{body:{autoPause:null!=(r=null==n?void 0:n.autoPause)&&r,templateID:e,metadata:null==n?void 0:n.metadata,mcp:null==n?void 0:n.mcp,envVars:null==n?void 0:n.envs,timeout:rj(t),secure:null==(i=null==n?void 0:n.secure)||i,allow_internet_access:null==(a=null==n?void 0:n.allowInternetAccess)||a,network:null==n?void 0:n.network},signal:s.getSignal(null==n?void 0:n.requestTimeoutMs)}),u=r9(l);if(u)throw u;if(0>t6(l.data.envdVersion,"0.1.0"))throw await this.kill(l.data.sandboxID,n),new rQ("You need to update the template to use the new SDK. You can do this by running `e2b template build` in the directory with the template.");return{sandboxId:l.data.sandboxID,sandboxDomain:l.data.domain||void 0,envdVersion:l.data.envdVersion,envdAccessToken:l.data.envdAccessToken,trafficAccessToken:l.data.trafficAccessToken||void 0}}static async connectSandbox(e,t){var n,r;let i=null!=(n=null==t?void 0:t.timeoutMs)?n:3e5,a=new r8(t),s=new r4(a),o=await s.api.POST("/sandboxes/{sandboxID}/connect",{params:{path:{sandboxID:e}},body:{timeout:rj(i)},signal:a.getSignal(null==t?void 0:t.requestTimeoutMs)});if((null==(r=o.error)?void 0:r.code)===404)throw new rz(`Paused sandbox ${e} not found`);let l=r9(o);if(l)throw l;return{sandboxId:o.data.sandboxID,sandboxDomain:o.data.domain||void 0,envdVersion:o.data.envdVersion,envdAccessToken:o.data.envdAccessToken,trafficAccessToken:o.data.trafficAccessToken||void 0}}},iI=class{constructor(e){this.config=new r8(e),this.client=new r4(this.config),this._hasNext=!0,this._nextToken=null==e?void 0:e.nextToken,this.query=null==e?void 0:e.query,this.limit=null==e?void 0:e.limit}get hasNext(){return this._hasNext}get nextToken(){return this._nextToken}async nextItems(){var e,t,n;let r;if(!this.hasNext)throw Error("No more items to fetch");(null==(e=this.query)?void 0:e.metadata)&&(r=new URLSearchParams(Object.fromEntries(Object.entries(this.query.metadata).map(([e,t])=>[encodeURIComponent(e),encodeURIComponent(t)]))).toString());let i=await this.client.api.GET("/v2/sandboxes",{params:{query:{metadata:r,state:null==(t=this.query)?void 0:t.state,limit:this.limit,nextToken:this.nextToken}},signal:this.config.getSignal()}),a=r9(i);if(a)throw a;return this._nextToken=i.response.headers.get("x-next-token")||void 0,this._hasNext=!!this._nextToken,(null!=(n=i.data)?n:[]).map(e=>{var t;return rS(r_({sandboxId:e.sandboxID,templateId:e.templateID},e.alias&&{name:e.alias}),rT({metadata:null!=(t=e.metadata)?t:{},startedAt:new Date(e.startedAt),endAt:new Date(e.endAt),state:e.state,cpuCount:e.cpuCount,memoryMB:e.memoryMB,envdVersion:e.envdVersion}))})}},iS=class extends iN{constructor(e){var t;super(),this.envdPort=49983,this.mcpPort=50005,this.connectionConfig=new r8(e),this.sandboxId=e.sandboxId,this.sandboxDomain=null!=(t=e.sandboxDomain)?t:this.connectionConfig.domain,this.envdAccessToken=e.envdAccessToken,this.trafficAccessToken=e.trafficAccessToken,this.envdApiUrl=this.connectionConfig.getSandboxUrl(this.sandboxId,{sandboxDomain:this.sandboxDomain,envdPort:this.envdPort});const n={"E2b-Sandbox-Id":this.sandboxId,"E2b-Sandbox-Port":this.envdPort.toString()},r=function(e){var t;try{new Headers}catch(e){throw Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}let n=null!=(t=e.useBinaryFormat)&&t;return{async unary(t,r,i,a,s,o){let{serialize:l,parse:u}=n7(t,n,e.jsonOptions,e.binaryOptions);return i=void 0===i?e.defaultTimeoutMs:i<=0?void 0:i,await function(e){let t=rr(e.next,e.interceptors),[n,r,i]=ra(e);return t(Object.assign(Object.assign({},e.req),{message:e6(e.req.method.input,e.req.message),signal:n})).then(e=>(i(),e),r)}({interceptors:e.interceptors,signal:r,timeoutMs:i,req:{stream:!1,service:t.parent,method:t,requestMethod:"POST",url:rn(e.baseUrl,t),header:rf(t.methodKind,n,i,a,!1),contextValues:null!=o?o:nQ(),message:s},next:async r=>{var i,a,s,o;let c=!0===e.useHttpGet&&t.idempotency===Y.NO_SIDE_EFFECTS,d=null;if(c){let e,t,i,u,c;a=r,s=l(r.message),o=n,e="?connect=v1",(null==(t=a.header.get(ro))?void 0:t.indexOf(rh))===0&&(e+="&encoding="+encodeURIComponent(t.slice(rh.length))),null!==(i=a.header.get(rl))&&"identity"!==i&&(e+="&compression="+encodeURIComponent(i),o=!0),o&&(e+="&base64=1"),e+="&message="+(o?t7(s,"url"):encodeURIComponent(new TextDecoder().decode(s))),u=a.url+e,c=new Headers(a.header),[ru,ro,"Content-Length",rl,"Accept-Encoding"].forEach(e=>c.delete(e)),r=Object.assign(Object.assign({},a),{requestMethod:"GET",url:u,header:c})}else d=l(r.message);let f=null!=(i=e.fetch)?i:globalThis.fetch,g=await f(r.url,Object.assign(Object.assign({},ry),{method:r.requestMethod,headers:r.header,signal:r.signal,body:d})),{isUnaryError:h,unaryError:m}=rm(t.methodKind,n,g.status,g.headers);if(h)throw rs(await g.json(),function(...e){let t=new Headers;for(let n of e)n.forEach((e,n)=>{t.append(n,e)});return t}(...rg(g.headers)),m);let[p,b]=rg(g.headers);return{stream:!1,service:t.parent,method:t,header:p,message:n?u(new Uint8Array(await g.arrayBuffer())):nj(t.output,await g.json(),n8(e.jsonOptions)),trailer:b}}})},async stream(t,r,i,a,s,o){let{serialize:l,parse:u}=n7(t,n,e.jsonOptions,e.binaryOptions);async function c(e){var n;let r,i;if("server_streaming"!=t.methodKind)throw"The fetch API does not support streaming request bodies";let a=await e[Symbol.asyncIterator]().next();if(!0==a.done)throw"missing request message";return(r=new Uint8Array((n=l(a.value)).length+5)).set(n,5),(i=new DataView(r.buffer,r.byteOffset,r.byteLength)).setUint8(0,0),i.setUint32(1,n.length),r}return i=void 0===i?e.defaultTimeoutMs:i<=0?void 0:i,await function(e){let t=rr(e.next,e.interceptors),[n,r,i]=ra(e),a=Object.assign(Object.assign({},e.req),{message:function(e,t){function n(t){return!0===t.done?t:{done:t.done,value:e6(e,t.value)}}return{[Symbol.asyncIterator](){let e=t[Symbol.asyncIterator](),r={next:()=>e.next().then(n)};return void 0!==e.throw&&(r.throw=t=>e.throw(t).then(n)),void 0!==e.return&&(r.return=t=>e.return(t).then(n)),r}}}(e.req.method.input,e.req.message),signal:n}),s=!1;return n.addEventListener("abort",function(){var t,n;let r=e.req.message[Symbol.asyncIterator]();s||null==(t=r.throw)||t.call(r,this.reason).catch(()=>{}),null==(n=r.return)||n.call(r).catch(()=>{})}),t(a).then(e=>Object.assign(Object.assign({},e),{message:{[Symbol.asyncIterator](){let t=e.message[Symbol.asyncIterator]();return{next:()=>t.next().then(e=>(!0==e.done&&(s=!0,i()),e),r)}}}}),r)}({interceptors:e.interceptors,timeoutMs:i,signal:r,req:{stream:!0,service:t.parent,method:t,requestMethod:"POST",url:rn(e.baseUrl,t),header:rf(t.methodKind,n,i,a,!1),contextValues:null!=o?o:nQ(),message:s},next:async r=>{var i;let a=null!=(i=e.fetch)?i:globalThis.fetch,s=await a(r.url,Object.assign(Object.assign({},ry),{method:r.requestMethod,headers:r.header,signal:r.signal,body:await c(r.message)}));if(rm(t.methodKind,n,s.status,s.headers),null===s.body)throw"missing response body";let o=new Headers;return Object.assign(Object.assign({},r),{header:s.headers,trailer:o,message:function(e,t,n,r){return rb(this,arguments,function*(){let i,a,s=(a=new Uint8Array(0),new ReadableStream({start(){i=e.getReader()},async pull(e){let t;for(;;){if(void 0===t&&a.byteLength>=5){let e=0;for(let t=1;t<5;t++)e=(e<<8)+a[t];t={flags:a[0],length:e}}if(void 0!==t&&a.byteLength>=t.length+5)break;let e=await i.read();if(e.done)break;!function(e){let t=new Uint8Array(a.length+e.length);t.set(a),t.set(e,a.length),a=t}(e.value)}if(void 0===t)return 0==a.byteLength?void e.close():void e.error(new tW("premature end of stream",F.DataLoss));let n=a.subarray(5,5+t.length);a=a.subarray(5+t.length),e.enqueue({flags:t.flags,data:n})}})).getReader(),o=!1;for(;;){let e=yield rp(s.read());if(e.done)break;let{flags:r,data:i}=e.value;if((1&r)==1)throw new tW("protocol error: received unsupported compressed output",F.Internal);if((2&r)==2){o=!0;let e=function(e){let t,n=new tW("invalid end stream",F.Unknown);try{t=JSON.parse("string"==typeof e?e:new TextDecoder().decode(e))}catch(e){throw n}if("object"!=typeof t||null==t||Array.isArray(t))throw n;let r=new Headers;if("metadata"in t){if("object"!=typeof t.metadata||null==t.metadata||Array.isArray(t.metadata))throw n;for(let[e,i]of Object.entries(t.metadata)){if(!Array.isArray(i)||i.some(e=>"string"!=typeof e))throw n;for(let t of i)r.append(e,t)}}let i="error"in t&&null!=t.error?rs(t.error,r,n):void 0;return{metadata:r,error:i}}(i);if(e.error){let t=e.error;throw n.forEach((e,n)=>{t.metadata.append(n,e)}),t}e.metadata.forEach((e,n)=>t.set(n,e));continue}yield yield rp(u(i))}if("throwIfAborted"in r&&r.throwIfAborted(),!o)throw"missing EndStreamResponse"})}(s.body,o,s.headers,r.signal)})}})}}}({baseUrl:this.envdApiUrl,useBinaryFormat:!1,interceptors:(null==e?void 0:e.logger)?[function(e){return t=>async n=>{var r,i;null==(r=e.info)||r.call(e,`Request: POST ${n.url}`);let a=await t(n);if(a.stream)return rS(r_({},a),rT({message:function(t){return rD(this,null,function*(){var n;try{for(var r,i,a,s=rF(t);r=!(i=yield new rP(s.next())).done;r=!1){let t=i.value;null==(n=e.debug)||n.call(e,"Response stream:",r5(t)),yield t}}catch(e){a=[e]}finally{try{r&&(i=s.return)&&(yield new rP(i.call(s)))}finally{if(a)throw a[0]}}})}(a.message)}));return null==(i=e.info)||i.call(e,"Response:",r5(a.message)),a}}(e.logger)]:void 0,fetch:(e,t)=>{let r=new Headers(this.connectionConfig.headers);return new Headers(null==t?void 0:t.headers).forEach((e,t)=>r.append(t,e)),new Headers(n).forEach((e,t)=>r.append(t,e)),this.envdAccessToken&&r.append("X-Access-Token",this.envdAccessToken),fetch(e,t=rS(r_({},null!=t?t:{}),rT({headers:r,redirect:"follow"})))}});this.envdApi=new ia({apiUrl:this.envdApiUrl,logger:null==e?void 0:e.logger,accessToken:this.envdAccessToken,headers:this.envdAccessToken?{"X-Access-Token":this.envdAccessToken}:{}},{version:e.envdVersion}),this.files=new ib(r,this.envdApi,this.connectionConfig),this.commands=new iA(r,this.connectionConfig,{version:e.envdVersion}),this.pty=new iw(r,this.connectionConfig,{version:e.envdVersion})}static list(e){return new iI(e)}static async create(e,t){var n,r;let{template:i,sandboxOpts:a}="string"==typeof e?{template:e,sandboxOpts:t}:{template:(null==e?void 0:e.mcp)?this.defaultMcpTemplate:this.defaultTemplate,sandboxOpts:e},s=new r8(a);if(s.debug)return new this(r_({sandboxId:"debug_sandbox_id",envdVersion:is},s));let o=new this(r_(r_({},await iN.createSandbox(i,null!=(n=null==a?void 0:a.timeoutMs)?n:this.defaultSandboxTimeoutMs,a)),s));if(null==a?void 0:a.mcp){o.mcpToken=crypto.randomUUID();let e=await o.commands.run(`mcp-gateway --config '${JSON.stringify(null==a?void 0:a.mcp)}'`,{user:"root",envs:{GATEWAY_ACCESS_TOKEN:null!=(r=o.mcpToken)?r:""}});if(0!==e.exitCode)throw Error(`Failed to start MCP gateway: ${e.stderr}`)}return o}static async betaCreate(e,t){var n,r;let{template:i,sandboxOpts:a}="string"==typeof e?{template:e,sandboxOpts:t}:{template:(null==e?void 0:e.mcp)?this.defaultMcpTemplate:this.defaultTemplate,sandboxOpts:e},s=new r8(a);if(s.debug)return new this(r_({sandboxId:"debug_sandbox_id",envdVersion:is},s));let o=new this(r_(r_({},await iN.createSandbox(i,null!=(n=null==a?void 0:a.timeoutMs)?n:this.defaultSandboxTimeoutMs,a)),s));if(null==a?void 0:a.mcp){o.mcpToken=crypto.randomUUID();let e=await o.commands.run(`mcp-gateway --config '${JSON.stringify(null==a?void 0:a.mcp)}'`,{user:"root",envs:{GATEWAY_ACCESS_TOKEN:null!=(r=o.mcpToken)?r:""}});if(0!==e.exitCode)throw Error(`Failed to start MCP gateway: ${e.stderr}`)}return o}static async connect(e,t){let n=await iN.connectSandbox(e,t),r=new r8(t);return new this(r_({sandboxId:e,sandboxDomain:n.sandboxDomain,envdAccessToken:n.envdAccessToken,trafficAccessToken:n.trafficAccessToken,envdVersion:n.envdVersion},r))}async connect(e){return await iN.connectSandbox(this.sandboxId,e),this}getHost(e){return this.connectionConfig.getHost(this.sandboxId,e,this.sandboxDomain)}async isRunning(e){let t=this.connectionConfig.getSignal(null==e?void 0:e.requestTimeoutMs),n=await this.envdApi.api.GET("/health",{signal:t});if(502==n.response.status)return!1;let r=await it(n);if(r)throw r;return!0}async setTimeout(e,t){this.connectionConfig.debug||await iN.setTimeout(this.sandboxId,e,r_(r_({},this.connectionConfig),t))}async kill(e){this.connectionConfig.debug||await iN.kill(this.sandboxId,r_(r_({},this.connectionConfig),e))}async betaPause(e){return await iN.betaPause(this.sandboxId,e)}getMcpUrl(){return`https://${this.getHost(this.mcpPort)}/mcp`}async getMcpToken(){return this.mcpToken||(this.mcpToken=await this.files.read("/etc/mcp-gateway/.token",{user:"root"})),this.mcpToken}async uploadUrl(e,t){t=null!=t?t:{};let n=!!this.envdAccessToken;if(!n&&void 0!=t.useSignatureExpiration)throw Error("Signature expiration can be used only when sandbox is created as secured.");let r=t.user;void 0==r&&0>t6(this.envdApi.version,io)&&(r=r7);let i=null!=e?e:"",a=this.fileUrl(i,r);if(n){let e=new URL(a),n=await ie({path:i,operation:"write",user:r,expirationInSeconds:t.useSignatureExpiration,envdAccessToken:this.envdAccessToken});return e.searchParams.set("signature",n.signature),n.expiration&&e.searchParams.set("signature_expiration",n.expiration.toString()),e.toString()}return a}async downloadUrl(e,t){t=null!=t?t:{};let n=!!this.envdAccessToken;if(!n&&void 0!=t.useSignatureExpiration)throw Error("Signature expiration can be used only when sandbox is created as secured.");let r=t.user;void 0==r&&0>t6(this.envdApi.version,io)&&(r=r7);let i=this.fileUrl(e,r);if(n){let n=new URL(i),a=await ie({path:e,operation:"read",user:r,expirationInSeconds:t.useSignatureExpiration,envdAccessToken:this.envdAccessToken});return n.searchParams.set("signature",a.signature),a.expiration&&n.searchParams.set("signature_expiration",a.expiration.toString()),n.toString()}return i}async getInfo(e){return await iN.getInfo(this.sandboxId,r_(r_({},this.connectionConfig),e))}async getMetrics(e){var t,n;if(this.envdApi.version){if(0>t6(this.envdApi.version,"0.1.5"))throw new rY("You need to update the template to use the new SDK. You can do this by running `e2b template build` in the directory with the template.");0>t6(this.envdApi.version,"0.2.4")&&(null==(n=null==(t=this.connectionConfig.logger)?void 0:t.warn)||n.call(t,"Disk metrics are not supported in this version of the sandbox, please rebuild the template to get disk metrics."))}return await iN.getMetrics(this.sandboxId,r_(r_({},this.connectionConfig),e))}fileUrl(e,t){let n=new URL("/files",this.envdApiUrl);return t&&n.searchParams.set("username",t),e&&n.searchParams.set("path",e),n.toString()}};iS.defaultTemplate="base",iS.defaultMcpTemplate="mcp-gateway",iS.defaultSandboxTimeoutMs=3e5;var iT=class{constructor(e,t,n){this.timestamp=e,this.level=t,this.message=n}toString(){return`[${this.timestamp.toISOString()}] [${this.level}] ${r$(this.message)}`}},iR=class extends iT{constructor(e,t){super(e,"debug",t)}},iO=class extends iT{constructor(e,t){super(e,"debug",t)}};function ix(e){let t=rA.default.join(e,".dockerignore");return rw.default.existsSync(t)?rw.default.readFileSync(t,"utf-8").split("\n").map(e=>e.trim()).filter(e=>e&&!e.startsWith("#")):[]}async function ik(e,t,n,r=!0){let{glob:i}=await rG("glob"),a=new Map;for(let s of(await i(e,{ignore:n,withFileTypes:!0,cwd:t})))if(s.isDirectory()){r&&a.set(s.fullpath(),s);let e=rA.default.join(s.relative()||".","**/*").replace(/\\/g,"/");(await i(e,{ignore:n,withFileTypes:!0,cwd:t})).forEach(e=>a.set(e.fullpath(),e))}else a.set(s.fullpath(),s);return Array.from(a.values()).sort()}async function iC(e,t,n,r,i,a){let s=rA.default.join(n,e),o=rE.default.createHash("sha256"),l=`COPY ${e} ${t}`;o.update(l);let u=await ik(e,n,r,!0);if(0===u.length){let e=Error(`No files found in ${s}`);throw a&&(e.stack=a),e}let c=e=>{o.update(e.mode.toString()),o.update(e.size.toString())};for(let e of u){let t=e.relativePosix();if(o.update(t),e.isSymbolicLink()){let t=rw.default.statSync(e.fullpath(),{throwIfNoEntry:!1});if(!(i&&((null==t?void 0:t.isFile())||(null==t?void 0:t.isDirectory())))){c(rw.default.lstatSync(e.fullpath()));let t=rw.default.readlinkSync(e.fullpath());o.update(t);continue}}let n=rw.default.statSync(e.fullpath());if(c(n),n.isFile()){let t=rw.default.readFileSync(e.fullpath());o.update(new Uint8Array(t))}}return o.digest("hex")}function i_(e){let t=Error().stack;if(!t)return;let n=t.split("\n").slice(1);if(!(n.length<e+1))return n.slice(e).join("\n")}function iV(e){return e.toString(8).padStart(4,"0")}async function iP(e,t,n,r){let{create:i}=await rG("tar"),a=(await ik(e,t,n,!0)).map(e=>e.relativePosix());return i({gzip:!0,cwd:t,follow:r,noDirRecurse:!0},a)}async function iD(e,t,n,r){let i=await iP(e,t,n,r),a=0;try{for(var s,o,l,u=rF(i);s=!(o=await u.next()).done;s=!1){let e=o.value;a+=e.length}}catch(e){l=[e]}finally{try{s&&(o=u.return)&&await o.call(u)}finally{if(l)throw l[0]}}return{contentLength:a,uploadStream:await iP(e,t,n,r)}}async function iF(e,{alias:t,cpuCount:n,memoryMB:r}){let i=await e.api.POST("/v3/templates",{body:{alias:t,cpuCount:n,memoryMB:r}}),a=r9(i,r1);if(a)throw a;if(!i.data)throw new r1("Failed to request build");return i.data}async function iU(e,{templateID:t,filesHash:n},r){let i=await e.api.GET("/templates/{templateID}/files/{hash}",{params:{path:{templateID:t,hash:n}}}),a=r9(i,r2,r);if(a)throw a;if(!i.data)throw new r2("Failed to get file upload link",r);return i.data}async function iL(e,t){let{fileName:n,url:r,fileContextPath:i,ignorePatterns:a,resolveSymlinks:s}=e;try{let{contentLength:e,uploadStream:o}=await iD(n,i,a,s),l=await fetch(r,{method:"PUT",body:o,headers:{"Content-Length":e.toString()},duplex:"half"});if(!l.ok)throw new r2(`Failed to upload file: ${l.statusText}`,t)}catch(e){if(e instanceof r2)throw e;throw new r2(`Failed to upload file: ${e}`,t)}}async function iM(e,{templateID:t,buildID:n,template:r}){let i=r9(await e.api.POST("/v2/templates/{templateID}/builds/{buildID}",{params:{path:{templateID:t,buildID:n}},body:r}),r1);if(i)throw i}async function iB(e,{templateID:t,buildID:n,logsOffset:r}){let i=await e.api.GET("/templates/{templateID}/builds/{buildID}/status",{params:{path:{templateID:t,buildID:n},query:{logsOffset:r}}}),a=r9(i,r1);if(a)throw a;if(!i.data)throw new r1("Failed to get build status");return i.data}async function ij(e,{alias:t}){let n=await e.api.GET("/templates/aliases/{alias}",{params:{path:{alias:t}}});if(404===n.response.status)return!1;if(403===n.response.status)return!0;let r=r9(n,rQ);if(r)throw r;return void 0!==n.data}async function iG(e,{templateID:t,buildID:n,onBuildLogs:r,logsRefreshFrequency:i,stackTraces:a}){var s,o,l,u,c;let d=0,f="building";for(;"building"===f||"waiting"===f;){let g=await iB(e,{templateID:t,buildID:n,logsOffset:d});switch(d+=g.logEntries.length,g.logEntries.forEach(e=>null==r?void 0:r(new iT(new Date(e.timestamp),e.level,r$(e.message)))),f=g.status){case"ready":return;case"waiting":break;case"error":{let e;if((null==(s=g.reason)?void 0:s.step)!==void 0){let t=(u=g.reason.step,c=a.length,"base"===u?0:"finalize"===u?c-1:Number(u));e=a[t]}throw new r1(null!=(l=null==(o=null==g?void 0:g.reason)?void 0:o.message)?l:"Unknown error",e)}}await new Promise(e=>setTimeout(e,i))}throw new r1("Unknown build error occurred.")}rv.default.red("ERROR"),rv.default.hex("#FF4400")("WARN "),rv.default.hex("#FF8800")("INFO "),rv.default.gray("DEBUG");var i$=class{constructor(e){this.cmd=e}getCmd(){return this.cmd}},iW=class{constructor(e){var t,n;this.defaultBaseImage="e2bdev/base",this.baseImage=this.defaultBaseImage,this.baseTemplate=void 0,this.registryConfig=void 0,this.startCmd=void 0,this.readyCmd=void 0,this.force=!1,this.forceNextLayer=!1,this.instructions=[],this.fileContextPath="browser"===rL?".":null!=(eo=function(e){let t=function(e){let t=Error.prepareStackTrace;try{let e=[];return Error.prepareStackTrace=(t,n)=>{let r=n.slice(4);return e=r,r},Error().stack,e}finally{Error.prepareStackTrace=t}}(4);if(0===t.length)return;let n=t[0].getFileName();if(n){if(n.startsWith("file:")){let{fileURLToPath:e}=function(e){if("browser"===rL)throw Error("Browser runtime is not supported for require");return rV(e)}("node:url");n=e(n)}return rA.default.dirname(n)}}(0))?eo:".",this.fileIgnorePatterns=[],this.logsRefreshFrequency=200,this.stackTraces=[],this.stackTracesEnabled=!0,this.stackTracesOverride=void 0,this.fileContextPath=null!=(t=null==e?void 0:e.fileContextPath)?t:this.fileContextPath,this.fileIgnorePatterns=null!=(n=null==e?void 0:e.fileIgnorePatterns)?n:this.fileIgnorePatterns}static toJSON(e,t=!0){return e.toJSON(t)}static toDockerfile(e){return e.toDockerfile()}static async build(e,t){var n,r,i;try{null==(n=t.onBuildLogs)||n.call(t,new iR(new Date,"Build started"));let i=new r8(t),a=new r4(i),s=await e.build(a,t);return null==(r=t.onBuildLogs)||r.call(t,new iT(new Date,"info","Waiting for logs...")),await iG(a,{templateID:s.templateId,buildID:s.buildId,onBuildLogs:t.onBuildLogs,logsRefreshFrequency:e.logsRefreshFrequency,stackTraces:e.stackTraces}),s}finally{null==(i=t.onBuildLogs)||i.call(t,new iO(new Date,"Build finished"))}}static async buildInBackground(e,t){let n=new r4(new r8(t));return await e.build(n,t)}static async getBuildStatus(e,t){let n=new r4(new r8(t));return await iB(n,{templateID:e.templateId,buildID:e.buildId,logsOffset:null==t?void 0:t.logsOffset})}static async aliasExists(e,t){return ij(new r4(new r8(t)),{alias:e})}fromDebianImage(e="stable"){return this.fromImage(`debian:${e}`)}fromUbuntuImage(e="latest"){return this.fromImage(`ubuntu:${e}`)}fromPythonImage(e="3"){return this.fromImage(`python:${e}`)}fromNodeImage(e="lts"){return this.fromImage(`node:${e}`)}fromBunImage(e="latest"){return this.fromImage(`oven/bun:${e}`)}fromBaseImage(){return this.fromImage(this.defaultBaseImage)}fromImage(e,t){return this.baseImage=e,this.baseTemplate=void 0,t&&(this.registryConfig={type:"registry",username:t.username,password:t.password}),this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromTemplate(e){return this.baseTemplate=e,this.baseImage=void 0,this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromDockerfile(e){let{baseImage:t}=this.runInStackTraceOverrideContext(()=>(function(e,t){let n;try{n=rw.default.existsSync(e)&&rw.default.statSync(e).isFile()?rw.default.readFileSync(e,"utf-8"):e}catch(t){n=e}let r=rN.DockerfileParser.parse(n).getInstructions(),i=r.filter(e=>"FROM"===e.getKeyword());if(i.length>1)throw Error("Multi-stage Dockerfiles are not supported");if(0===i.length)throw Error("Dockerfile must contain a FROM instruction");let a=i[0].getArguments(),s="e2bdev/base",o=!1,l=!1;for(let e of(a&&a.length>0&&(s=a[0].getValue()),t.setUser("root"),t.setWorkdir("/"),r)){let n=e.getKeyword();switch(n){case"FROM":case"EXPOSE":case"VOLUME":break;case"RUN":!function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n.map(e=>e.getValue()).join(" ");t.runCmd(e)}}(e,t);break;case"COPY":case"ADD":!function(e,t){var n;let r=e.getArguments();if(r&&r.length>=2){let i,a=r[0].getValue(),s=r[r.length-1].getValue(),o=e.getFlags().find(e=>"chown"===e.getName());o&&(i=null!=(n=o.getValue())?n:void 0),t.copy(a,s,{user:i})}}(e,t);break;case"WORKDIR":(function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n[0].getValue();t.setWorkdir(e)}})(e,t),l=!0;break;case"USER":(function(e,t){let n=e.getArguments();if(n&&n.length>0){let e=n[0].getValue();t.setUser(e)}})(e,t),o=!0;break;case"ENV":case"ARG":!function(e,t){let n=e.getArguments(),r=e.getKeyword();if(n&&n.length>=1){let e={};if(2===n.length){let t=n[0].getValue(),r=n[1].getValue();if(t.includes("=")&&r.includes("="))for(let t of n){let n=t.getValue(),r=n.indexOf("=");if(r>0){let t=n.substring(0,r),i=n.substring(r+1);e[t]=i}}else e[t]=r}else if(1===n.length){let t=n[0].getValue(),i=t.indexOf("=");if(i>0){let n=t.substring(0,i),r=t.substring(i+1);e[n]=r}else"ARG"===r&&t.trim()&&(e[t.trim()]="")}else for(let t of n){let n=t.getValue(),i=n.indexOf("=");if(i>0){let t=n.substring(0,i),r=n.substring(i+1);e[t]=r}else"ARG"===r&&(e[n]="")}Object.keys(e).length>0&&t.setEnvs(e)}}(e,t);break;case"CMD":case"ENTRYPOINT":!function(e,t){let n=e.getArguments();if(n&&n.length>0){let e,r=n.map(e=>e.getValue()).join(" ");try{let e=JSON.parse(r);Array.isArray(e)&&(r=e.join(" "))}catch(e){}t.setStartCmd(r,(e=Math.max(1,Math.floor(20)),new i$(`sleep ${e}`)))}}(e,t);break;default:console.warn(`Unsupported instruction: ${n}`)}}return o||t.setUser("user"),l||t.setWorkdir("/home/user"),{baseImage:s}})(e,this),i_(2));return this.baseImage=t,this.baseTemplate=void 0,this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromAWSRegistry(e,t){return this.baseImage=e,this.baseTemplate=void 0,this.registryConfig={type:"aws",awsAccessKeyId:t.accessKeyId,awsSecretAccessKey:t.secretAccessKey,awsRegion:t.region},this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}fromGCPRegistry(e,t){var n,r;return this.baseImage=e,this.baseTemplate=void 0,this.registryConfig={type:"gcp",serviceAccountJson:(n=this.fileContextPath.toString(),"string"==typeof(r=t.serviceAccountJSON)?rw.default.readFileSync(rA.default.join(n,r),"utf-8"):JSON.stringify(r))},this.forceNextLayer&&(this.force=!0),this.collectStackTrace(),this}copy(e,t,n){var r;if("browser"===rL)throw Error("Browser runtime is not supported for copy");for(let i of Array.isArray(e)?e:[e]){let e=[i.toString(),t.toString(),null!=(r=null==n?void 0:n.user)?r:"",(null==n?void 0:n.mode)?iV(n.mode):""];this.instructions.push({type:"COPY",args:e,force:(null==n?void 0:n.forceUpload)||this.forceNextLayer,forceUpload:null==n?void 0:n.forceUpload,resolveSymlinks:null==n?void 0:n.resolveSymlinks})}return this.collectStackTrace(),this}copyItems(e){if("browser"===rL)throw Error("Browser runtime is not supported for copyItems");return this.runInNewStackTraceContext(()=>{for(let t of e)this.copy(t.src,t.dest,{forceUpload:t.forceUpload,user:t.user,mode:t.mode,resolveSymlinks:t.resolveSymlinks})}),this}remove(e,t){let n=Array.isArray(e)?e:[e],r=["rm"];return(null==t?void 0:t.recursive)&&r.push("-r"),(null==t?void 0:t.force)&&r.push("-f"),r.push(...n.map(e=>e.toString())),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==t?void 0:t.user}))}rename(e,t,n){let r=["mv",e.toString(),t.toString()];return(null==n?void 0:n.force)&&r.push("-f"),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}makeDir(e,t){let n=Array.isArray(e)?e:[e],r=["mkdir","-p"];return(null==t?void 0:t.mode)&&r.push(`-m ${iV(t.mode)}`),r.push(...n.map(e=>e.toString())),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==t?void 0:t.user}))}makeSymlink(e,t,n){let r=["ln","-s"];return(null==n?void 0:n.force)&&r.push("-f"),r.push(e.toString(),t.toString()),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}runCmd(e,t){let n=[(Array.isArray(e)?e:[e]).join(" && ")];return(null==t?void 0:t.user)&&n.push(t.user),this.instructions.push({type:"RUN",args:n,force:this.forceNextLayer}),this.collectStackTrace(),this}setWorkdir(e){return this.instructions.push({type:"WORKDIR",args:[e.toString()],force:this.forceNextLayer}),this.collectStackTrace(),this}setUser(e){return this.instructions.push({type:"USER",args:[e],force:this.forceNextLayer}),this.collectStackTrace(),this}pipInstall(e,t){var n;let r=null==(n=null==t?void 0:t.g)||n,i=["pip","install"],a=e?Array.isArray(e)?e:[e]:void 0;return!1===r&&i.push("--user"),a?i.push(...a):i.push("."),this.runInNewStackTraceContext(()=>this.runCmd(i.join(" "),{user:r?"root":void 0}))}npmInstall(e,t){let n=["npm","install"],r=e?Array.isArray(e)?e:[e]:void 0;return(null==t?void 0:t.g)&&n.push("-g"),(null==t?void 0:t.dev)&&n.push("--save-dev"),r&&n.push(...r),this.runInNewStackTraceContext(()=>this.runCmd(n.join(" "),{user:(null==t?void 0:t.g)?"root":void 0}))}bunInstall(e,t){let n=["bun","install"],r=e?Array.isArray(e)?e:[e]:void 0;return(null==t?void 0:t.g)&&n.push("-g"),(null==t?void 0:t.dev)&&n.push("--dev"),r&&n.push(...r),this.runInNewStackTraceContext(()=>this.runCmd(n.join(" "),{user:(null==t?void 0:t.g)?"root":void 0}))}aptInstall(e,t){let n=Array.isArray(e)?e:[e];return this.runInNewStackTraceContext(()=>this.runCmd(["apt-get update",`DEBIAN_FRONTEND=noninteractive DEBCONF_NOWARNINGS=yes apt-get install -y ${(null==t?void 0:t.noInstallRecommends)?"--no-install-recommends ":""}${n.join(" ")}`],{user:"root"}))}addMcpServer(e){if("mcp-gateway"!==this.baseTemplate)throw new r1("MCP servers can only be added to mcp-gateway template",i_(2));let t=Array.isArray(e)?e:[e];return this.runInNewStackTraceContext(()=>this.runCmd(`mcp-gateway pull ${t.join(" ")}`,{user:"root"}))}gitClone(e,t,n){let r=["git","clone",e];return(null==n?void 0:n.branch)&&(r.push(`--branch ${n.branch}`),r.push("--single-branch")),(null==n?void 0:n.depth)&&r.push(`--depth ${n.depth}`),t&&r.push(t.toString()),this.runInNewStackTraceContext(()=>this.runCmd(r.join(" "),{user:null==n?void 0:n.user}))}setStartCmd(e,t){return this.startCmd=e,t instanceof i$?this.readyCmd=t.getCmd():this.readyCmd=t,this.collectStackTrace(),this}setReadyCmd(e){return e instanceof i$?this.readyCmd=e.getCmd():this.readyCmd=e,this.collectStackTrace(),this}setEnvs(e){return 0===Object.keys(e).length||(this.instructions.push({type:"ENV",args:Object.entries(e).flatMap(([e,t])=>[e,t]),force:this.forceNextLayer}),this.collectStackTrace()),this}skipCache(){return this.forceNextLayer=!0,this}betaDevContainerPrebuild(e){if("devcontainer"!==this.baseTemplate)throw new r1("Devcontainers can only used in the devcontainer template",i_(2));return this.runInNewStackTraceContext(()=>this.runCmd(`devcontainer build --workspace-folder ${e}`,{user:"root"}))}betaSetDevContainerStart(e){if("devcontainer"!==this.baseTemplate)throw new r1("Devcontainers can only used in the devcontainer template",i_(2));return this.runInNewStackTraceContext(()=>this.setStartCmd(`sudo devcontainer up --workspace-folder ${e} && sudo /prepare-exec.sh ${e} | sudo tee /devcontainer.sh > /dev/null && sudo chmod +x /devcontainer.sh && sudo touch /devcontainer.up`,new i$("[ -f /devcontainer.up ]")))}collectStackTrace(e=3){return this.stackTracesEnabled&&(this.stackTracesOverride?this.stackTraces.push(this.stackTracesOverride):this.stackTraces.push(i_(e))),this}disableStackTrace(){return this.stackTracesEnabled=!1,this}enableStackTrace(){return this.stackTracesEnabled=!0,this}runInNewStackTraceContext(e){this.disableStackTrace();let t=e();return this.enableStackTrace(),this.collectStackTrace(4),t}runInStackTraceOverrideContext(e,t){this.stackTracesOverride=t;let n=e();return this.stackTracesOverride=void 0,n}async toJSON(e){let t=this.instructions;return e&&(t=await this.instructionsWithHashes()),JSON.stringify(this.serialize(t),void 0,2)}toDockerfile(){if(void 0!==this.baseTemplate)throw Error("Cannot convert template built from another template to Dockerfile. Templates based on other templates can only be built using the E2B API.");if(void 0===this.baseImage)throw Error("No base image specified for template");let e=`FROM ${this.baseImage}
`;for(let t of this.instructions){if("RUN"===t.type){e+=`RUN ${t.args[0]}
`;continue}if("COPY"===t.type){e+=`COPY ${t.args[0]} ${t.args[1]}
`;continue}if("ENV"===t.type){let n=[];for(let e=0;e<t.args.length;e+=2)n.push(`${t.args[e]}=${t.args[e+1]}`);e+=`ENV ${n.join(" ")}
`;continue}e+=`${t.type} ${t.args.join(" ")}
`}return this.startCmd&&(e+=`ENTRYPOINT ${this.startCmd}
`),e}async build(e,t){var n,r,i,a,s,o;t.skipCache&&(this.force=!0),null==(n=t.onBuildLogs)||n.call(t,new iT(new Date,"info",`Requesting build for template: ${t.alias}`));let{templateID:l,buildID:u}=await iF(e,{alias:t.alias,cpuCount:null!=(r=t.cpuCount)?r:2,memoryMB:null!=(i=t.memoryMB)?i:1024});null==(a=t.onBuildLogs)||a.call(t,new iT(new Date,"info",`Template created with ID: ${l}, Build ID: ${u}`));let c=await this.instructionsWithHashes(),d=c.map(async(n,r)=>{var i,a,s,o;let u;if("COPY"!==n.type)return;let c=n.args.length>0?n.args[0]:null,d=null!=(i=n.filesHash)?i:null;if(null===c||null===d)throw Error("Source path and files hash are required");let f=n.forceUpload;r+1>=0&&r+1<this.stackTraces.length&&(u=this.stackTraces[r+1]);let{present:g,url:h}=await iU(e,{templateID:l,filesHash:d},u);f&&null!=h||!1===g&&null!=h?(await iL({fileName:c,fileContextPath:this.fileContextPath.toString(),url:h,ignorePatterns:[...this.fileIgnorePatterns,...ix(this.fileContextPath.toString())],resolveSymlinks:null!=(a=n.resolveSymlinks)&&a},u),null==(s=t.onBuildLogs)||s.call(t,new iT(new Date,"info",`Uploaded '${c}'`))):null==(o=t.onBuildLogs)||o.call(t,new iT(new Date,"info",`Skipping upload of '${c}', already cached`))});return await Promise.all(d),null==(s=t.onBuildLogs)||s.call(t,new iT(new Date,"info","All file uploads completed")),null==(o=t.onBuildLogs)||o.call(t,new iT(new Date,"info","Starting building...")),await iM(e,{templateID:l,buildID:u,template:this.serialize(c)}),{alias:t.alias,templateId:l,buildId:u}}async instructionsWithHashes(){return Promise.all(this.instructions.map(async(e,t)=>{var n;let r;if("COPY"!==e.type)return e;let i=e.args.length>0?e.args[0]:null,a=e.args.length>1?e.args[1]:null;if(null===i||null===a)throw Error("Source path and destination path are required");return t+1>=0&&t+1<this.stackTraces.length&&(r=this.stackTraces[t+1]),rS(r_({},e),rT({filesHash:await iC(i,a,this.fileContextPath.toString(),[...this.fileIgnorePatterns,..."browser"===rL?[]:ix(this.fileContextPath.toString())],null!=(n=e.resolveSymlinks)&&n,r)}))}))}serialize(e){let t={startCmd:this.startCmd,readyCmd:this.readyCmd,steps:e,force:this.force};return void 0!==this.baseImage&&(t.fromImage=this.baseImage),void 0!==this.baseTemplate&&(t.fromTemplate=this.baseTemplate),void 0!==this.registryConfig&&(t.fromImageRegistry=this.registryConfig),t}};function iK(e){return new iW(e)}iK.build=iW.build,iK.buildInBackground=iW.buildInBackground,iK.getBuildStatus=iW.getBuildStatus,iK.aliasExists=iW.aliasExists,iK.toJSON=iW.toJSON,iK.toDockerfile=iW.toDockerfile;let iX={"estate-document-analyzer":{"SKILL.md":`# Estate Document Analyzer Skill

You are an expert estate planning document analyzer. When given estate planning documents (wills, trusts, POAs, etc.), you:

1. **Extract Key Information**:
   - Document type and date
   - Principal/grantor name
   - Named parties (executors, trustees, agents, beneficiaries)
   - Key provisions and terms

2. **Identify Issues**:
   - Missing signatures or witnesses
   - Outdated information
   - Ambiguous language
   - Potential conflicts with other documents

3. **Provide Recommendations**:
   - Suggest updates needed
   - Flag inconsistencies
   - Note state-specific compliance issues

Output format: JSON with sections for extracted_info, issues, and recommendations.`},"estate-goals-profiler":{"SKILL.md":`# Estate Goals Profiler Skill

You help clients articulate and prioritize their estate planning goals. You:

1. **Identify Goals**:
   - Asset protection
   - Tax minimization
   - Family provision
   - Charitable giving
   - Business succession
   - Healthcare directives

2. **Assess Priorities**:
   - Rank goals by importance
   - Identify potential conflicts
   - Suggest compromise solutions

3. **Recommend Documents**:
   - Map goals to specific documents needed
   - Prioritize document creation order

Output format: JSON with prioritized_goals, conflicts, and document_recommendations.`},"financial-profile-classifier":{"SKILL.md":`# Financial Profile Classifier Skill

You analyze financial situations for estate planning purposes. You:

1. **Classify Estate Size**:
   - Simple (under $1M)
   - Moderate ($1M - $5M)
   - Complex ($5M - $12M)
   - High Net Worth ($12M+)

2. **Identify Tax Implications**:
   - Federal estate tax exposure
   - State estate/inheritance tax
   - Gift tax considerations
   - Generation-skipping tax

3. **Recommend Strategies**:
   - Basic will vs. living trust
   - Irrevocable trust options
   - Charitable planning
   - Life insurance planning

Output format: JSON with classification, tax_exposure, and strategy_recommendations.`},"us-estate-planning-analyzer":{"SKILL.md":`# US Estate Planning Analyzer Skill

You are an expert in US estate planning law. You analyze estate plans for:

1. **Federal Compliance**:
   - Estate tax exemption limits (current: $13.61M per person)
   - Gift tax annual exclusion ($18,000 per recipient)
   - Portability elections
   - QTIP trust requirements

2. **State-Specific Rules**:
   - Community property vs. common law states
   - State estate tax thresholds
   - State inheritance taxes
   - Homestead exemptions

3. **Document Requirements**:
   - Will execution requirements by state
   - Trust formation rules
   - POA statutory forms
   - Healthcare directive compliance

4. **Gap Analysis**:
   - Missing essential documents
   - Outdated provisions
   - Beneficiary inconsistencies
   - Tax optimization opportunities

Output format: JSON with compliance_status, state_specific_issues, gaps, and recommendations.`}},iY=process.env.E2B_API_KEY,iZ=process.env.ANTHROPIC_API_KEY,iJ="/home/user/generated",iH="/home/user/.claude/skills";async function iz(e){try{let{prompt:t,outputFile:n,timeoutMs:r=24e4}=await e.json();if(!t)return eS.NextResponse.json({error:"Prompt is required"},{status:400});if(!iY||!iZ)return eS.NextResponse.json({error:"API keys not configured"},{status:500});let i=await iS.create("base",{timeoutMs:3e5,apiKey:iY});try{for(let[e,t]of(await i.commands.run(`mkdir -p ${iJ}`),await i.commands.run(`mkdir -p ${iH}`),Object.entries(iX))){let n=`${iH}/${e}`;for(let[e,r]of(await i.commands.run(`mkdir -p "${n}"`),Object.entries(t)))await i.files.write(`${n}/${e}`,r)}let e=`
#!/bin/bash
set -e

cd ${iJ}

# Install Claude Code CLI
npm install -g @anthropic-ai/claude-code 2>&1 || {
    echo "Failed to install claude-code, trying npx..."
    export USE_NPX=1
}

# Create prompt file
cat > /tmp/prompt.txt << 'PROMPT_EOF'
${t.replace(/'/g,"'\\''")}
PROMPT_EOF

echo "=== Starting Claude Code ==="
echo "Working directory: $(pwd)"
echo "Available skills:"
ls -la $HOME/.claude/skills/ 2>/dev/null || echo "(no skills)"

# Run Claude Code
if [ "\${USE_NPX:-}" = "1" ]; then
    npx -y @anthropic-ai/claude-code --print --dangerously-skip-permissions -p "$(cat /tmp/prompt.txt)" 2>&1
else
    claude --print --dangerously-skip-permissions -p "$(cat /tmp/prompt.txt)" 2>&1
fi

echo ""
echo "=== Claude Code Finished ==="
echo "Generated files:"
ls -la ${iJ}/ 2>/dev/null || echo "(none)"
`;await i.files.write("/tmp/run_claude.sh",e),await i.commands.run("chmod +x /tmp/run_claude.sh");let a=await i.commands.run("bash /tmp/run_claude.sh",{envs:{ANTHROPIC_API_KEY:iZ,HOME:"/home/user",CI:"true"},timeoutMs:r}),s="";if(n)try{s=await i.files.read(`${iJ}/${n}`)}catch{let e=(await i.commands.run(`find ${iJ} -type f 2>/dev/null || true`)).stdout.split("\n").filter(e=>e.trim());e.length>0&&(s=await i.files.read(e[0]))}return eS.NextResponse.json({success:!0,stdout:a.stdout,stderr:a.stderr,exitCode:a.exitCode,fileContent:s})}finally{await i.kill()}}catch(e){return console.error("E2B execution error:",e),eS.NextResponse.json({success:!1,error:e instanceof Error?e.message:"Unknown error"},{status:500})}}e.s(["POST",()=>iz],16453);var iq=e.i(16453);let iQ=new el.AppRouteRouteModule({definition:{kind:eu.RouteKind.APP_ROUTE,page:"/api/e2b/execute/route",pathname:"/api/e2b/execute",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/app/api/e2b/execute/route.ts",nextConfigOutput:"",userland:iq}),{workAsyncStorage:i0,workUnitAsyncStorage:i1,serverHooks:i2}=iQ;function i5(){return(0,ec.patchFetch)({workAsyncStorage:i0,workUnitAsyncStorage:i1})}async function i3(e,t,n){iQ.isDev&&(0,ed.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let r="/api/e2b/execute/route";r=r.replace(/\/index$/,"")||"/";let i=await iQ.prepare(e,t,{srcPage:r,multiZoneDraftMode:!1});if(!i)return t.statusCode=400,t.end("Bad Request"),null==n.waitUntil||n.waitUntil.call(n,Promise.resolve()),null;let{buildId:a,params:s,nextConfig:o,parsedUrl:l,isDraftMode:u,prerenderManifest:c,routerServerContext:d,isOnDemandRevalidate:f,revalidateOnlyGenerated:g,resolvedPathname:h,clientReferenceManifest:m,serverActionsManifest:p}=i,b=(0,eh.normalizeAppPath)(r),y=!!(c.dynamicRoutes[b]||c.routes[h]),v=async()=>((null==d?void 0:d.render404)?await d.render404(e,t,l,!1):t.end("This page could not be found"),null);if(y&&!u){let e=!!c.routes[h],t=c.dynamicRoutes[b];if(t&&!1===t.fallback&&!e){if(o.experimental.adapterPath)return await v();throw new eN.NoFallbackError}}let E=null;!y||iQ.isDev||u||(E="/index"===(E=h)?"/":E);let w=!0===iQ.isDev||!y,A=y&&!w;p&&m&&(0,eg.setManifestsSingleton)({page:r,clientReferenceManifest:m,serverActionsManifest:p});let N=e.method||"GET",I=(0,ef.getTracer)(),S=I.getActiveScopeSpan(),T={params:s,prerenderManifest:c,renderOpts:{experimental:{authInterrupts:!!o.experimental.authInterrupts},cacheComponents:!!o.cacheComponents,supportsDynamicResponse:w,incrementalCache:(0,ed.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:o.cacheLife,waitUntil:n.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,n,r,i)=>iQ.onRequestError(e,t,r,i,d)},sharedContext:{buildId:a}},R=new em.NodeNextRequest(e),O=new em.NodeNextResponse(t),x=ep.NextRequestAdapter.fromNodeNextRequest(R,(0,ep.signalFromNodeResponse)(t));try{let i=async e=>iQ.handle(x,T).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=I.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==eb.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let i=n.get("next.route");if(i){let t=`${N} ${i}`;e.setAttributes({"next.route":i,"http.route":i,"next.span_name":t}),e.updateName(t)}else e.updateName(`${N} ${r}`)}),a=!!(0,ed.getRequestMeta)(e,"minimalMode"),s=async s=>{var l,h;let m=async({previousCacheEntry:o})=>{try{if(!a&&f&&g&&!o)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let r=await i(s);e.fetchMetrics=T.renderOpts.fetchMetrics;let l=T.renderOpts.pendingWaitUntil;l&&n.waitUntil&&(n.waitUntil(l),l=void 0);let u=T.renderOpts.collectedTags;if(!y)return await (0,ev.sendResponse)(R,O,r,T.renderOpts.pendingWaitUntil),null;{let e=await r.blob(),t=(0,eE.toNodeOutgoingHttpHeaders)(r.headers);u&&(t[eA.NEXT_CACHE_TAGS_HEADER]=u),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let n=void 0!==T.renderOpts.collectedRevalidate&&!(T.renderOpts.collectedRevalidate>=eA.INFINITE_CACHE)&&T.renderOpts.collectedRevalidate,i=void 0===T.renderOpts.collectedExpire||T.renderOpts.collectedExpire>=eA.INFINITE_CACHE?void 0:T.renderOpts.collectedExpire;return{value:{kind:eI.CachedRouteKind.APP_ROUTE,status:r.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:n,expire:i}}}}catch(t){throw(null==o?void 0:o.isStale)&&await iQ.onRequestError(e,t,{routerKind:"App Router",routePath:r,routeType:"route",revalidateReason:(0,ey.getRevalidateReason)({isStaticGeneration:A,isOnDemandRevalidate:f})},!1,d),t}},p=await iQ.handleResponse({req:e,nextConfig:o,cacheKey:E,routeKind:eu.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:c,isRoutePPREnabled:!1,isOnDemandRevalidate:f,revalidateOnlyGenerated:g,responseGenerator:m,waitUntil:n.waitUntil,isMinimalMode:a});if(!y)return null;if((null==p||null==(l=p.value)?void 0:l.kind)!==eI.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(h=p.value)?void 0:h.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});a||t.setHeader("x-nextjs-cache",f?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let b=(0,eE.fromNodeOutgoingHttpHeaders)(p.value.headers);return a&&y||b.delete(eA.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||b.get("Cache-Control")||b.set("Cache-Control",(0,ew.getCacheControlHeader)(p.cacheControl)),await (0,ev.sendResponse)(R,O,new Response(p.value.body,{headers:b,status:p.value.status||200})),null};S?await s(S):await I.withPropagatedContext(e.headers,()=>I.trace(eb.BaseServerSpan.handleRequest,{spanName:`${N} ${r}`,kind:ef.SpanKind.SERVER,attributes:{"http.method":N,"http.target":e.url}},s))}catch(t){if(t instanceof eN.NoFallbackError||await iQ.onRequestError(e,t,{routerKind:"App Router",routePath:b,routeType:"route",revalidateReason:(0,ey.getRevalidateReason)({isStaticGeneration:A,isOnDemandRevalidate:f})},!1,d),y)throw t;return await (0,ev.sendResponse)(R,O,new Response(null,{status:500})),null}}e.s(["handler",()=>i3,"patchFetch",()=>i5,"routeModule",()=>iQ,"serverHooks",()=>i2,"workAsyncStorage",()=>i0,"workUnitAsyncStorage",()=>i1],11597)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e4a6c2ab._.js.map