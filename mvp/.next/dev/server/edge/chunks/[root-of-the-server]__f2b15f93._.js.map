{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/middleware.ts"],"sourcesContent":["import { clerkMiddleware, createRouteMatcher } from \"@clerk/nextjs/server\";\nimport { NextResponse } from \"next/server\";\nimport type { NextRequest } from \"next/server\";\n\n// Check if Clerk is configured\nconst isClerkConfigured = !!process.env.NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY;\n\n// Routes that require authentication\nconst isProtectedRoute = createRouteMatcher([\n  \"/intake/(.*)\",              // All intake pages require login\n  \"/analysis/(.*)\",            // Analysis requires login\n  \"/documents/generate/(.*)\",  // Document generation requires login\n  \"/documents/upload/(.*)\",    // Document upload requires login\n]);\n\n// Routes that should be accessible to everyone (public)\nconst isPublicRoute = createRouteMatcher([\n  \"/\",\n  \"/intake\",                   // Landing page only (shows sign-in prompt)\n  \"/sign-in(.*)\",\n  \"/sign-up(.*)\",\n  \"/api/(.*)\",\n]);\n\n// Middleware that skips Clerk if not configured\nfunction simpleMiddleware(req: NextRequest) {\n  return NextResponse.next();\n}\n\n// Export the appropriate middleware\nexport default isClerkConfigured\n  ? clerkMiddleware(async (auth, req) => {\n      if (isProtectedRoute(req)) {\n        await auth.protect();\n      }\n    })\n  : simpleMiddleware;\n\nexport const config = {\n  matcher: [\n    // Skip Next.js internals and all static files\n    \"/((?!_next|[^?]*\\\\.(?:html?|css|js(?!on)|jpe?g|webp|png|gif|svg|ttf|woff2?|ico|csv|docx?|xlsx?|zip|webmanifest)).*)\",\n    // Always run for API routes\n    \"/(api|trpc)(.*)\",\n  ],\n};\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AACA;AAAA;;;AAGA,+BAA+B;AAC/B,MAAM,oBAAoB,CAAC,CAAC,QAAQ,GAAG,CAAC,iCAAiC;AAEzE,qCAAqC;AACrC,MAAM,mBAAmB,IAAA,wMAAkB,EAAC;IAC1C;IACA;IACA;IACA;CACD;AAED,wDAAwD;AACxD,MAAM,gBAAgB,IAAA,wMAAkB,EAAC;IACvC;IACA;IACA;IACA;IACA;CACD;AAED,gDAAgD;AAChD,SAAS,iBAAiB,GAAgB;IACxC,OAAO,gMAAY,CAAC,IAAI;AAC1B;uCAGe,oBACX,IAAA,wMAAe,EAAC,OAAO,MAAM;IAC3B,IAAI,iBAAiB,MAAM;QACzB,MAAM,KAAK,OAAO;IACpB;AACF,KACA;AAEG,MAAM,SAAS;IACpB,SAAS;QACP,8CAA8C;QAC9C;QACA,4BAA4B;QAC5B;KACD;AACH"}}]
}